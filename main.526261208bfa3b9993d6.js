(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.r(e),n.d(e,"Component",function(){return o}),n.d(e,"ComponentContainer",function(){return u}),n.d(e,"Provider",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.__assign)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.__values)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.__read)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var t;return Object(r.__generator)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.__spreadArray)(Object(r.__spreadArray)([],Object(r.__read)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.__read)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=Object(r.__values)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var f=Object(r.__read)(h.value,2),d=f[1];u===this.normalizeInstanceIdentifier(f[0])&&d.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(c,u),c},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=Object(r.__values)(this.onInitCallbacks),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e=n("zIRd"),r=n("/6Yf"),i=n("qOnz"),o=n("mrSG"),s=n("q/0M"),a="";function u(t){a=t}var c,l=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(i.stringify)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(i.jsonEval)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(i.contains)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l(e)}}catch(n){}return new h},d=f("localStorage"),p=f("sessionStorage"),g=new s.Logger("@firebase/database"),m=(c=1,function(){return c++}),y=function(t){var e=Object(i.stringToByteArray)(t),n=new i.Sha1;n.update(e);var r=n.digest();return i.base64.encodeByteArray(r)},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var o=t[r];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?n+=v.apply(null,o):n+="object"==typeof o?Object(i.stringify)(o):o,n+=" "}return n},b=null,_=!0,w=function(t,e){Object(i.assert)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(g.logLevel=s.LogLevel.VERBOSE,b=g.log.bind(g),e&&p.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,p.remove("logging_enabled"))},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===b&&!0===p.get("logging_enabled")&&w(!0)),b){var n=v.apply(null,t);b(n)}},T=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];E.apply(void 0,Object(o.__spreadArray)([t],Object(o.__read)(e)))}},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+v.apply(void 0,Object(o.__spreadArray)([],Object(o.__read)(t)));g.error(n)},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+v.apply(void 0,Object(o.__spreadArray)([],Object(o.__read)(t)));throw g.error(n),new Error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+v.apply(void 0,Object(o.__spreadArray)([],Object(o.__read)(t)));g.warn(n)},C=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},k="[MIN_NAME]",A="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===k||e===A)return-1;if(e===k||t===A)return 1;var n=F(t),r=F(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},N=function(t,e){return t===e?0:t<e?-1:1},j=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(i.stringify)(e))},P=function(t){if("object"!=typeof t||null===t)return Object(i.stringify)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",o=0;o<e.length;o++)0!==o&&(r+=","),r+=Object(i.stringify)(e[o]),r+=":",r+=P(t[e[o]]);return r+"}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function D(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var M=function(t){var e,n,r,o,s;Object(i.assert)(!C(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},L=new RegExp("^-?(0*)\\d{1,10}$"),F=function(t){if(L.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},U=function(t){try{t()}catch(e){setTimeout(function(){throw O("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},V=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},q=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(n,r){setTimeout(function(){e.appCheck?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){O('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),B=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(E("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):new Promise(function(n,r){setTimeout(function(){e.auth_?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)})},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';O(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),H=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),K=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,z="websocket",W="long_polling",G=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=d.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&d.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function $(t,e,n){var r;if(Object(i.assert)("string"==typeof e,"typeof type must == string"),Object(i.assert)("object"==typeof n,"typeof params must == object"),e===z)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==W)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var o=[];return D(n,function(t,e){o.push(t+"="+e)}),r+o.join("&")}var Q=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(i.contains)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(i.deepCopy)(this.counters_)},t}(),Y={},X={};function J(t){var e=t.toString();return Y[e]||(Y[e]=new Q),Y[e]}var Z=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&U(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),tt="start",et="close",nt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=T(t),this.stats_=J(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),$(e,W,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Z(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(i.isNodeSdk)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new rt(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.__read)(t,5),i=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===tt)n.id=s,n.password=a;else{if(i!==et)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.__read)(t,2),i=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&K.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(i.isNodeSdk)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(i.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(i.base64Encode)(e),r=R(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(i.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(i.stringify)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),rt=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(i.isNodeSdk)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=m(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){E("frame writing exception"),u.stack&&E(u.stack),E(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||E("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(i.isNodeSdk)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){E("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),it=null;"undefined"!=typeof MozWebSocket?it=MozWebSocket:"undefined"!=typeof WebSocket&&(it=WebSocket);var ot=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=T(this.connId),this.stats_=J(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var o={v:"5"};return!Object(i.isNodeSdk)()&&"undefined"!=typeof location&&location.hostname&&K.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),r&&(o.ac=r),$(t,z,o)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,d.set("previous_websocket_failure",!0);try{if(Object(i.isNodeSdk)()){var r={headers:{"User-Agent":"Firebase/5/"+a+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?r.headers.Authorization=this.authToken||"":r.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var o=process.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new it(this.connURL,[],r)}else this.mySock=new it(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==it&&!t.forceDisallow_},t.previouslyFailed=function(){return d.isInMemoryStorage||!0===d.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){d.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(i.jsonEval)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(i.assert)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(i.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),st=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[nt,ot]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=ot&&ot.isAvailable(),s=i&&!ot.previouslyFailed();if(e.webSocketOnly&&(i||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ot];else{var a=this.transports_=[];try{for(var u=Object(o.__values)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),at=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=T("c:"+this.id+":"),this.transportManager_=new st(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=j("t",t),n=j("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=j("t",t),n=j("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=j("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?S("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&O("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),V(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(d.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ut=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ct=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(i.assert)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.__spreadArray)([],Object(o.__read)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(i.assert)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),lt=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(i.isMobileCordova)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(o.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.assert)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ct),ht=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ft(){return new ht("")}function dt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pt(t){return t.pieces_.length-t.pieceNum_}function gt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new ht(t.pieces_,e)}function mt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function yt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function vt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ht(e,0)}function bt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ht)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ht(n,0)}function _t(t){return t.pieceNum_>=t.pieces_.length}function wt(t,e){var n=dt(t),r=dt(e);if(null===n)return e;if(n===r)return wt(gt(t),gt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Et(t,e){for(var n=yt(t,0),r=yt(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Tt(t,e){if(pt(t)!==pt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function St(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(pt(t)>pt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var It=function(){return function(t,e){this.errorPrefix_=e,this.parts_=yt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(i.stringLength)(this.parts_[n]);Ot(this)}}();function Ot(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ct(t))}function Ct(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var kt,At,xt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(o.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.assert)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ct),Nt=1e3,jt=function(t){function e(n,r,o,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=o,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=T("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Nt,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(i.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return xt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&lt.getInstance().on("online",h.onOnline_,h),h}return Object(o.__extends)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,o={r:r,a:t,b:e};this.log_(Object(i.stringify)(o)),Object(i.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new i.Deferred,r={p:t._path.toString(),q:t._queryObject},o={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&o===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var o=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),Object(i.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(i.assert)(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(i.contains)(t,"w")){var n=Object(i.safeGet)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',o=e._path.toString();O("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(i.isAdmin)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(i.isValidFormat)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(i.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(i.stringify)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):S("Unrecognized action received from server: "+Object(i.stringify)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(i.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Nt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Nt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(o.__awaiter)(this,void 0,void 0,function(){var t,n,r,s,a,u,c,l,h,f,d,p,g,m=this;return Object(o.__generator)(this,function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){Object(i.assert)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return f=o.__read.apply(void 0,[y.sent(),2]),d=f[0],p=f[1],u?E("getToken() completed but was canceled"):(E("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,c=new at(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){O(t+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")},a)),[3,4];case 3:return g=y.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&O(g),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){E("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){E("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(i.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=Nt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return P(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ht(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){E("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){E("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(o.__values)(this.listens.values()),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.__values)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(i.isNodeSdk)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+a.replace(/\./g,"-")]=1,Object(i.isMobileCordova)()?t["framework.cordova"]=1:Object(i.isReactNative)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=lt.getInstance().currentlyOnline();return Object(i.isEmpty)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ut),Pt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Rt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Pt(k,t),r=new Pt(k,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Pt.MIN},t}(),Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return kt},set:function(t){kt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(i.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return new Pt(A,kt)},e.prototype.makePost=function(t,e){return Object(i.assert)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Pt(t,kt)},e.prototype.toString=function(){return".key"},e}(Rt),Mt=new Dt,Lt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ft=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ut=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ft(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Lt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Lt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ut,t}();function qt(t,e){return x(t.name,e.name)}function Bt(t,e){return x(t,e)}var Ht,Kt,zt,Wt,Gt,$t=function(t){return"number"==typeof t?"number:"+M(t):"string:"+t},Qt=function(t){if(t.isLeafNode()){var e=t.val();Object(i.assert)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(i.contains)(e,".sv"),"Priority must be a string or number.")}else Object(i.assert)(t===At||t.isEmpty(),"priority of unexpected type.");Object(i.assert)(t===At||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Yt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(i.assert)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Qt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ht},set:function(t){Ht=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return _t(e)?this:".priority"===dt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=dt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(i.assert)(".priority"!==r||1===pt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(gt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+$t(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?M(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(i.assert)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(i.assert)(o>=0,"Unknown leaf type: "+n),Object(i.assert)(s>=0,"Unknown leaf type: "+r),o===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Xt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return new Pt(A,new Yt("[PRIORITY-POST]",zt))},e.prototype.makePost=function(t,e){var n=Kt(t);return new Pt(e,new Yt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Rt)),Jt=Math.log(2),Zt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Jt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),te=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Ft(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Ft.BLACK):(a(h,Ft.BLACK),a(h,Ft.RED))}return o}(new Zt(t.length));return new Vt(r||e,o)},ee={},ne=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(i.assert)(ee&&Xt,"ChildrenNode.ts has not been loaded"),Wt=Wt||new t({".priority":ee},{".priority":Xt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(i.safeGet)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return Object(i.contains)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(i.assert)(e!==Mt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Pt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?te(s,e.getCompare()):ee;var l=e.toString(),h=Object(o.__assign)({},this.indexSet_);h[l]=e;var f=Object(o.__assign)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(i.map)(this.indexes_,function(t,o){var s=Object(i.safeGet)(r.indexSet_,o);if(Object(i.assert)(s,"Missing index implementation for "+o),t===ee){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Pt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),te(a,s.getCompare())}return ee}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Pt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(i.map)(this.indexes_,function(t){if(t===ee)return t;var r=n.get(e.name);return r?t.remove(new Pt(e.name,r)):t}),this.indexSet_)},t}(),re=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Qt(this.priorityNode_),this.children_.isEmpty()&&Object(i.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Gt||(Gt=new t(new Vt(Bt),null,ne.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Gt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Gt:e},t.prototype.getChild=function(t){var e=dt(t);return null===e?this:this.getImmediateChild(e).getChild(gt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(i.assert)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Pt(e,n),o=void 0,s=void 0;n.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=o.isEmpty()?Gt:this.priorityNode_;return new t(o,a,s)},t.prototype.updateChild=function(t,e){var n=dt(t);if(null===n)return e;Object(i.assert)(".priority"!==dt(t)||1===pt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(gt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Xt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+$t(this.getPriority().val())+":"),this.forEachChild(Xt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Pt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Pt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Pt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Pt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Pt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ie?-1:0},t.prototype.withIndex=function(e){if(e===Mt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Mt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Xt),r=e.getIterator(Xt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Mt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ie=new(function(t){function e(){return t.call(this,new Vt(Bt),re.EMPTY_NODE,ne.Default)||this}return Object(o.__extends)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return re.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(re));function oe(t,e){if(void 0===e&&(e=null),null===t)return re.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(i.assert)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Yt(t,oe(e));if(t instanceof Array){var n=re.EMPTY_NODE;return D(t,function(e,r){if(Object(i.contains)(t,e)&&"."!==e.substring(0,1)){var o=oe(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}}),n.updatePriority(oe(e))}var r=[],o=!1;if(D(t,function(t,e){if("."!==t.substring(0,1)){var n=oe(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new Pt(t,n)))}}),0===r.length)return re.EMPTY_NODE;var s=te(r,qt,function(t){return t.name},Bt);if(o){var a=te(r,Xt.getCompare());return new re(s,oe(e),new ne({".priority":a},{".priority":Xt}))}return new re(s,oe(e),ne.Default)}Object.defineProperties(Pt,{MIN:{value:new Pt(k,re.EMPTY_NODE)},MAX:{value:new Pt(A,ie)}}),Dt.__EMPTY_NODE=re.EMPTY_NODE,Yt.__childrenNodeConstructor=re,At=ie,zt=ie,Kt=oe;var se,ae,ue=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(i.assert)(!_t(e)&&".priority"!==dt(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.__extends)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=oe(t),r=re.EMPTY_NODE.updateChild(this.indexPath_,n);return new Pt(e,r)},e.prototype.maxPost=function(){var t=re.EMPTY_NODE.updateChild(this.indexPath_,ie);return new Pt(A,t)},e.prototype.toString=function(){return yt(this.indexPath_,0).join("/")},e}(Rt),ce=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return Pt.MAX},e.prototype.makePost=function(t,e){var n=oe(t);return new Pt(e,n)},e.prototype.toString=function(){return".value"},e}(Rt)),le="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",he=(se=0,ae=[],function(t){var e,n=t===se;se=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=le.charAt(t%64),t=Math.floor(t/64);Object(i.assert)(0===t,"Cannot push at time == 0");var o=r.join("");if(n){for(e=11;e>=0&&63===ae[e];e--)ae[e]=0;ae[e]++}else for(e=0;e<12;e++)ae[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)o+=le.charAt(ae[e]);return Object(i.assert)(20===o.length,"nextPushId: Length should be 20."),o}),fe=function(t){if("2147483647"===t)return"-";var e=F(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return A;var o=le.charAt(le.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},de=function(t){if("-2147483648"===t)return k;var e=F(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=le.charAt(le.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function pe(t){return{type:"value",snapshotNode:t}}function ge(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function me(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ye(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ve=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,o,s){Object(i.assert)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(me(e,a)):Object(i.assert)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ge(e,n)):s.trackChildChange(ye(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Xt,function(t,r){e.hasChild(t)||n.trackChildChange(me(t,r))}),e.isLeafNode()||e.forEachChild(Xt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ye(e,r,i))}else n.trackChildChange(ge(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?re.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new ve(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Pt(e,n))||(n=re.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=re.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(re.EMPTY_NODE);var i=this;return e.forEachChild(Xt,function(t,e){i.matches(new Pt(t,e))||(r=r.updateImmediateChild(t,re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),_e=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Pt(e,n))||(n=re.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=re.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=re.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(re.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,re.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,o){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(i.assert)(u.numChildren()===this.limit_,"");var c=new Pt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=o&&o.trackChildChange(ye(e,n,f)),u.updateImmediateChild(e,n);null!=o&&o.trackChildChange(me(e,f));var g=u.updateImmediateChild(e,re.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=o&&o.trackChildChange(ge(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=o&&(o.trackChildChange(me(l.name,l.node)),o.trackChildChange(ge(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,re.EMPTY_NODE)):t},t}(),we=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(i.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(i.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:k},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(i.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(i.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:A},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(i.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Xt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ee(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Te(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Se(t,e){var n=t.copy();return n.index_=e,n}function Ie(t){var e,n={};return t.isDefault()||(t.index_===Xt?e="$priority":t.index_===ce?e="$value":t.index_===Mt?e="$key":(Object(i.assert)(t.index_ instanceof ue,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(i.stringify)(e),t.startSet_&&(n.startAt=Object(i.stringify)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(i.stringify)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(i.stringify)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(i.stringify)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Oe(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Xt&&(e.i=t.index_.toString()),e}var Ce=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=T("p:rest:"),o.listens_={},o}return Object(o.__extends)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(i.assert)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,o){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Ie(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(i.safeGet)(s.listens_,u)===c&&o(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Ie(t._queryParams),r=t._path.toString(),o=new i.Deferred;return this.restRequest_(r+".json",n,function(t,n){var i=n;404===t&&(i=null,t=null),null===t?(e.onDataUpdate_(r,i,!1,null),o.resolve(i)):o.reject(new Error(i))}),o.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(s){var a=Object(o.__read)(s,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(i.querystring)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=Object(i.jsonEval)(h.responseText)}catch(e){O("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&O("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ut),ke=function(){function t(){this.rootNode_=re.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Ae(){return{value:null,children:new Map}}function xe(t,e,n){if(_t(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=dt(e);t.children.has(r)||t.children.set(r,Ae()),xe(t.children.get(r),e=gt(e),n)}}function Ne(t,e){if(_t(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Xt,function(e,n){xe(t,new ht(e),n)}),Ne(t,e)}if(t.children.size>0){var r=dt(e);return e=gt(e),t.children.has(r)&&Ne(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function je(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){je(r,new ht(e.toString()+"/"+t),n)})}var Pe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.__assign)({},t);return this.last_&&D(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Re=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Pe(t);var n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;D(e,function(e,o){o>0&&Object(i.contains)(t.statsToReport_,e)&&(n[e]=o,r=!0)}),r&&this.server_.reportStats(n),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),De=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Me(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Le,Fe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=De.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(_t(this.path)){if(null!=this.affectedTree.value)return Object(i.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ht(e));return new t(ft(),n,this.revert)}return Object(i.assert)(dt(this.path)===e,"operationForChild called for unrelated child."),new t(gt(this.path),this.affectedTree,this.revert)},t}(),Ue=function(){function t(t,e){this.source=t,this.path=e,this.type=De.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,ft()):new t(this.source,gt(this.path))},t}(),Ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=De.OVERWRITE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,ft(),this.snap.getImmediateChild(e)):new t(this.source,gt(this.path),this.snap)},t}(),qe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=De.MERGE}return t.prototype.operationForChild=function(e){if(_t(this.path)){var n=this.children.subtree(new ht(e));return n.isEmpty()?null:n.value?new Ve(this.source,ft(),n.value):new t(this.source,ft(),n)}return Object(i.assert)(dt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,gt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Be=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(_t(t))return this.isFullyInitialized()&&!this.filtered_;var e=dt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),He=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function Ke(t,e,n,r,o,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(i.assertionError)("Should only compare child_ events.");var r=new Pt(e.childName,e.snapshotNode),o=new Pt(n.childName,n.snapshotNode);return t.index_.compare(r,o)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);o.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function ze(t,e){return{eventCache:t,serverCache:e}}function We(t,e,n,r){return ze(new Be(e,n,r),t.serverCache)}function Ge(t,e,n,r){return ze(t.eventCache,new Be(e,n,r))}function $e(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qe(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ye=function(){function t(t,e){void 0===e&&(Le||(Le=new Vt(N)),e=Le),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return D(e,function(t,e){n=n.set(new ht(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ft(),value:this.value};if(_t(t))return null;var n=dt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(gt(t),e);return null!=i?{path:bt(new ht(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(_t(e))return this;var n=dt(e),r=this.children.get(n);return null!==r?r.subtree(gt(e)):new t(null)},t.prototype.set=function(e,n){if(_t(e))return new t(n,this.children);var r=dt(e),i=(this.children.get(r)||new t(null)).set(gt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(_t(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=dt(e),r=this.children.get(n);if(r){var i=r.remove(gt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(_t(t))return this.value;var e=dt(t),n=this.children.get(e);return n?n.get(gt(t)):null},t.prototype.setTree=function(e,n){if(_t(e))return n;var r,i=dt(e),o=(this.children.get(i)||new t(null)).setTree(gt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ft(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(bt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ft(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(_t(t))return null;var i=dt(t),o=this.children.get(i);return o?o.findOnPath_(gt(t),bt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ft(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(_t(e))return this;this.value&&r(n,this.value);var i=dt(e),o=this.children.get(i);return o?o.foreachOnPath_(gt(e),bt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ft(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(bt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Xe=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ye(null))},t}();function Je(t,e,n){if(_t(e))return new Xe(new Ye(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=wt(i,e);return o=o.updateChild(s,n),new Xe(t.writeTree_.set(i,o))}var a=new Ye(n),u=t.writeTree_.setTree(e,a);return new Xe(u)}function Ze(t,e,n){var r=t;return D(n,function(t,n){r=Je(r,bt(e,t),n)}),r}function tn(t,e){if(_t(e))return Xe.empty();var n=t.writeTree_.setTree(e,new Ye(null));return new Xe(n)}function en(t,e){return null!=nn(t,e)}function nn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(wt(n.path,e)):null}function rn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Xt,function(t,n){e.push(new Pt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Pt(t,n.value))}),e}function on(t,e){if(_t(e))return t;var n=nn(t,e);return new Xe(null!=n?new Ye(n):t.writeTree_.subtree(e))}function sn(t){return t.writeTree_.isEmpty()}function an(t,e){return un(ft(),t.writeTree_,e)}function un(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,o){".priority"===e?(Object(i.assert)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=un(bt(t,e),o,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(bt(t,".priority"),r)),n}function cn(t,e){return _n(e,t)}function ln(t,e){if(t.snap)return St(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&St(bt(t.path,n),e))return!0;return!1}function hn(t){return t.visible}function fn(t,e,n){for(var r=Xe.empty(),o=0;o<t.length;++o){var s=t[o];if(e(s)){var a=s.path,u=void 0;if(s.snap)St(n,a)?r=Je(r,u=wt(n,a),s.snap):St(a,n)&&(u=wt(a,n),r=Je(r,ft(),s.snap.getChild(u)));else{if(!s.children)throw Object(i.assertionError)("WriteRecord should have .snap or .children");if(St(n,a))r=Ze(r,u=wt(n,a),s.children);else if(St(a,n))if(_t(u=wt(a,n)))r=Ze(r,ft(),s.children);else{var c=Object(i.safeGet)(s.children,dt(u));if(c){var l=c.getChild(gt(u));r=Je(r,ft(),l)}}}}}return r}function dn(t,e,n,r,i){if(r||i){var o=on(t.visibleWrites,e);return!i&&sn(o)?n:i||null!=n||en(o,ft())?an(fn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(St(t.path,e)||St(e,t.path))},e),n||re.EMPTY_NODE):null}var s=nn(t.visibleWrites,e);if(null!=s)return s;var a=on(t.visibleWrites,e);return sn(a)?n:null!=n||en(a,ft())?an(a,n||re.EMPTY_NODE):null}function pn(t,e,n,r){return dn(t.writeTree,t.treePath,e,n,r)}function gn(t,e){return function(t,e,n){var r=re.EMPTY_NODE,i=nn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=on(t.visibleWrites,e);return n.forEachChild(Xt,function(t,e){var n=an(on(o,new ht(t)),e);r=r.updateImmediateChild(t,n)}),rn(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return rn(on(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function mn(t,e,n,r){return function(t,e,n,r,o){Object(i.assert)(r||o,"Either existingEventSnap or existingServerSnap must exist");var s=bt(e,n);if(en(t.visibleWrites,s))return null;var a=on(t.visibleWrites,s);return sn(a)?o.getChild(n):an(a,o.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function yn(t,e){return function(t,e){return nn(t.visibleWrites,e)}(t.writeTree,bt(t.treePath,e))}function vn(t,e,n){return function(t,e,n,r){var i=bt(e,n),o=nn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?an(on(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function bn(t,e){return _n(bt(t.treePath,e),t.writeTree)}function _n(t,e){return{treePath:t,writeTree:e}}var wn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(i.assert)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(i.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(n,ye(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(n,me(n,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(n,ge(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw Object(i.assertionError)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ye(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),En=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Tn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Be(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qe(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=on(t.visibleWrites,e),c=nn(u,ft());if(null!=c)a=c;else{if(null==n)return[];a=an(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),d=f.getNext();d&&l.length<1;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function Sn(t,e,n,r,o,s){var a=e.eventCache;if(null!=yn(r,n))return e;var u=void 0,c=void 0;if(_t(n))if(Object(i.assert)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Qe(e),h=gn(r,l instanceof re?l:re.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var f=pn(r,Qe(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{var d=dt(n);if(".priority"===d){Object(i.assert)(1===pt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=mn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var m=gt(n),y=void 0;if(a.isCompleteForChild(d)){c=e.serverCache.getNode();var v=mn(r,n,a.getNode(),c);y=null!=v?a.getNode().getImmediateChild(d).updateChild(m,v):a.getNode().getImmediateChild(d)}else y=vn(r,d,e.serverCache);u=null!=y?t.filter.updateChild(a.getNode(),d,y,m,o,s):a.getNode()}}return We(e,u,a.isFullyInitialized()||_t(n),t.filter.filtersNodes())}function In(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(_t(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=dt(n);if(!c.isCompleteForPath(n)&&pt(n)>1)return e;var d=gt(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,En,null)}var g=Ge(e,u,c.isFullyInitialized()||_t(n),l.filtersNodes());return Sn(t,g,n,i,new Tn(i,g,o),a)}function On(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new Tn(i,e,o);if(_t(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=We(e,u,!0,t.filter.filtersNodes());else{var h=dt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=We(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=gt(n),d=c.getNode().getImmediateChild(h),p=void 0;if(_t(f))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===mt(f)&&g.getChild(vt(f)).isEmpty()?g:g.updateChild(f,r):re.EMPTY_NODE}a=d.equals(p)?e:We(e,t.filter.updateChild(c.getNode(),h,p,f,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function Cn(t,e){return t.eventCache.isCompleteForChild(e)}function kn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function An(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=_t(n)?r:new Ye(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=kn(0,e.serverCache.getNode().getImmediateChild(n),r);c=In(t,c,new ht(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=kn(0,e.serverCache.getNode().getImmediateChild(n),r);c=In(t,c,new ht(n),h,i,o,s,a)}}),c}var xn,Nn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new ve(r.getIndex()),o=(n=r).loadsAllData()?new ve(n.getIndex()):n.hasLimit()?new _e(n):new be(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(re.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(re.EMPTY_NODE,a.getNode(),null),l=new Be(u,s.isFullyInitialized(),i.filtersNodes()),h=new Be(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=ze(h,l),this.eventGenerator_=new He(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function jn(t,e){var n=Qe(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_t(e)&&!n.getImmediateChild(dt(e)).isEmpty())?n.getChild(e):null}function Pn(t){return 0===t.eventRegistrations_.length}function Rn(t,e,n){var r=[];if(n){Object(i.assert)(null==e,"A cancel should cancel all event registrations.");var o=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,o);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Dn(t,e,n,r){e.type===De.MERGE&&null!==e.source.queryId&&(Object(i.assert)(Qe(t.viewCache_),"We should always have a full cache before handling merges"),Object(i.assert)($e(t.viewCache_),"Missing event cache, even though we have a server cache"));var o,s,a=t.viewCache_,u=function(t,e,n,r,o){var s,a,u=new wn;if(n.type===De.OVERWRITE){var c=n;c.source.fromUser?s=On(t,e,c.path,c.snap,r,o,u):(Object(i.assert)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!_t(c.path),s=In(t,e,c.path,c.snap,r,o,a,u))}else if(n.type===De.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=bt(n,r);Cn(e,dt(c))&&(a=On(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=bt(n,r);Cn(e,dt(c))||(a=On(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,o,u):(Object(i.assert)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=An(t,e,l.path,l.children,r,o,a,u))}else if(n.type===De.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,o,s){var a;if(null!=yn(r,n))return e;var u=new Tn(r,e,o),c=e.eventCache.getNode(),l=void 0;if(_t(n)||".priority"===dt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=pn(r,Qe(e));else{var f=e.serverCache.getNode();Object(i.assert)(f instanceof re,"serverChildren would be complete if leaf node"),h=gn(r,f)}l=t.filter.updateFullNode(c,h=h,s)}else{var d=dt(n),p=vn(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?t.filter.updateChild(c,d,p,gt(n),u,s):e.eventCache.getNode().hasChild(d)?t.filter.updateChild(c,d,re.EMPTY_NODE,gt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=pn(r,Qe(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=yn(r,ft()),We(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,o,u):function(t,e,n,r,i,o,s){if(null!=yn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(_t(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return In(t,e,n,u.getNode().getChild(n),i,o,a,s);if(_t(n)){var c=new Ye(null);return u.getNode().forEachChild(Mt,function(t,e){c=c.set(new ht(t),e)}),An(t,e,n,c,i,o,a,s)}return e}var l=new Ye(null);return r.foreach(function(t,e){var r=bt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),An(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,o,u)}else{if(n.type!==De.LISTEN_COMPLETE)throw Object(i.assertionError)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return Sn(t,Ge(e,o.getNode(),o.isFullyInitialized()||_t(n),o.isFiltered()),n,r,En,i)}(t,e,n.path,r,u)}var f=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=$e(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe($e(e)))}}(e,s,f),{viewCache:s,changes:f}}(t.processor_,a,e,n,r);return o=t.processor_,s=u.viewCache,Object(i.assert)(s.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Object(i.assert)(s.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Object(i.assert)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Mn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Mn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),Ke(t,i,"child_removed",e,r,n),Ke(t,i,"child_added",e,r,n),Ke(t,i,"child_moved",o,r,n),Ke(t,i,"child_changed",e,r,n),Ke(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Ln,Fn=function(){return function(){this.views=new Map}}();function Un(t,e,n,r){var s,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(i.assert)(null!=c,"SyncTree gave us an op for an invalid query."),Dn(c,e,n,r)}var l=[];try{for(var h=Object(o.__values)(t.views.values()),f=h.next();!f.done;f=h.next())l=l.concat(Dn(c=f.value,e,n,r))}catch(d){s={error:d}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return l}function Vn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=pn(n,i?r:null),a=!1;s?a=!0:r instanceof re?(s=gn(n,r),a=!1):(s=re.EMPTY_NODE,a=!1);var u=ze(new Be(s,a,!1),new Be(r,i,!1));return new Nn(e,u)}return o}function qn(t){var e,n,r=[];try{for(var i=Object(o.__values)(t.views.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Bn(t,e){var n,r,i=null;try{for(var s=Object(o.__values)(t.views.values()),a=s.next();!a.done;a=s.next())i=i||jn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function Hn(t,e){return e._queryParams.loadsAllData()?Wn(t):t.views.get(e._queryIdentifier)}function Kn(t,e){return null!=Hn(t,e)}function zn(t){return null!=Wn(t)}function Wn(t){var e,n;try{for(var r=Object(o.__values)(t.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.query._queryParams.loadsAllData())return s}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Gn=1,$n=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Ye(null),this.pendingWriteTree_={visibleWrites:Xe.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Qn(t,e,n,r,o){return function(t,e,n,r,o){Object(i.assert)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=Je(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,o),o?er(t,new Ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Yn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(i.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var o=r.visible,s=!1,a=t.allWrites.length-1;o&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&ln(u,r.path)?o=!1:St(r.path,u.path)&&(s=!0)),a--}return!!o&&(s?(function(t){t.visibleWrites=fn(t.allWrites,hn,ft()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=tn(t.visibleWrites,r.path):D(r.children,function(e){t.visibleWrites=tn(t.visibleWrites,bt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var o=new Ye(null);return null!=r.snap?o=o.set(ft(),!0):D(r.children,function(t){o=o.set(new ht(t),!0)}),er(t,new Fe(r.path,o,n))}return[]}function Xn(t,e,n){return er(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Jn(t,e,n,r){var s=e._path,a=t.syncPointTree_.get(s),u=[];if(a&&("default"===e._queryIdentifier||Kn(a,e))){var c=function(t,e,n,r){var s,a,u=e._queryIdentifier,c=[],l=[],h=zn(t);if("default"===u)try{for(var f=Object(o.__values)(t.views.entries()),d=f.next();!d.done;d=f.next()){var p,g=Object(o.__read)(d.value,2),m=g[0];l=l.concat(Rn(p=g[1],n,r)),Pn(p)&&(t.views.delete(m),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(y){s={error:y}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}else(p=t.views.get(u))&&(l=l.concat(Rn(p,n,r)),Pn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!zn(t)&&c.push(new(Object(i.assert)(xn,"Reference.ts has not been loaded"),xn)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),f=t.syncPointTree_.findOnPath(s,function(t,e){return zn(e)});if(h&&!f){var d=t.syncPointTree_.subtree(s);if(!d.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&zn(e))return[Wn(e)];var r=[];return e&&(r=qn(e)),D(n,function(t,e){r=r.concat(e)}),r})}(d),g=0;g<p.length;++g){var m=p[g],y=m.query,v=ir(t,m);t.listenProvider_.startListening(lr(y),or(t,y),v.hashFn,v.onComplete)}}!f&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(lr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(sr(e));t.listenProvider_.stopListening(lr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=sr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Zn(t,e,n){var r=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=wt(t,r);o=o||Bn(e,n),s=s||zn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||zn(u),o=o||Bn(u,ft())):(u=new Fn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=o?a=!0:(a=!1,o=re.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Bn(e,ft());n&&(o=o.updateImmediateChild(t,n))}));var c=Kn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=sr(e);Object(i.assert)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Gn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var f=function(t,e,n,r,i,o){var s=Vn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Xt,function(t,e){r.push(ge(t,e))}),n.isFullyInitialized()&&r.push(pe(n.getNode())),Mn(t,r,n.getNode(),e)}(s,n)}(u,e,n,cn(t.pendingWriteTree_,r),o,a);if(!c&&!s){var d=Hn(u,e);f=f.concat(function(t,e,n){var r=e._path,o=or(t,e),s=ir(t,n),a=t.listenProvider_.startListening(lr(e),o,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(o)Object(i.assert)(!zn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!_t(t)&&e&&zn(e))return[Wn(e).query];var r=[];return e&&(r=r.concat(qn(e).map(function(t){return t.query}))),D(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(lr(h),or(t,h))}return a}(t,e,d))}return f}function tr(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Bn(n,wt(t,e));if(r)return r});return dn(r,e,i,n,!0)}function er(t,e){return nr(e,t.syncPointTree_,null,cn(t.pendingWriteTree_,ft()))}function nr(t,e,n,r){if(_t(t.path))return rr(t,e,n,r);var i=e.get(ft());null==n&&null!=i&&(n=Bn(i,ft()));var o=[],s=dt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=bn(r,s);o=o.concat(nr(a,u,c,l))}return i&&(o=o.concat(Un(i,t,r,n))),o}function rr(t,e,n,r){var i=e.get(ft());null==n&&null!=i&&(n=Bn(i,ft()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=bn(r,e),u=t.operationForChild(e);u&&(o=o.concat(rr(u,i,s,a)))}),i&&(o=o.concat(Un(i,t,r,n))),o}function ir(t,e){var n=e.query,r=or(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||re.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ar(t,n);if(r){var i=ur(r),o=i.path,s=i.queryId,a=wt(o,e);return cr(t,o,new Ue(Me(s),a))}return[]}(t,n._path,r):function(t,e){return er(t,new Ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Jn(t,n,null,i)}}}function or(t,e){var n=sr(e);return t.queryToTagMap.get(n)}function sr(t){return t._path.toString()+"$"+t._queryIdentifier}function ar(t,e){return t.tagToQueryMap.get(e)}function ur(t){var e=t.indexOf("$");return Object(i.assert)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ht(t.substr(0,e))}}function cr(t,e,n){var r=t.syncPointTree_.get(e);return Object(i.assert)(r,"Missing sync point for query tag that we're tracking"),Un(r,n,cn(t.pendingWriteTree_,e),null)}function lr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(i.assert)(Ln,"Reference.ts has not been loaded"),Ln)(t._repo,t._path):t}var hr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),fr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=bt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return tr(this.syncTree_,this.path_)},t}(),dr=function(t,e,n){return t&&"object"==typeof t?(Object(i.assert)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?pr(t[".sv"],e,n):"object"==typeof t[".sv"]?gr(t[".sv"],e):void Object(i.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},pr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(i.assert)(!1,"Unexpected server value: "+t)}},gr=function(t,e,n){t.hasOwnProperty("increment")||Object(i.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(i.assert)(!1,"Unexpected increment value: "+r);var o=e.node();if(Object(i.assert)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var s=o.getValue();return"number"!=typeof s?r:s+r},mr=function(t,e,n,r){return vr(e,new fr(n,t),r)},yr=function(t,e,n){return vr(t,new hr(e),n)};function vr(t,e,n){var r,i=t.getPriority().val(),o=dr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=dr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Yt(a,oe(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Yt(o))),u.forEachChild(Xt,function(t,i){var o=vr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var br=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function _r(t,e){for(var n=e instanceof ht?e:new ht(e),r=t,o=dt(n);null!==o;){var s=Object(i.safeGet)(r.node.children,o)||{children:{},childCount:0};r=new br(o,r,s),o=dt(n=gt(n))}return r}function wr(t){return t.node.value}function Er(t,e){t.node.value=e,Cr(t)}function Tr(t){return t.node.childCount>0}function Sr(t,e){D(t.node.children,function(n,r){e(new br(n,t,r))})}function Ir(t,e,n,r){n&&!r&&e(t),Sr(t,function(t){Ir(t,e,!0,r)}),n&&r&&e(t)}function Or(t){return new ht(null===t.parent?t.name:Or(t.parent)+"/"+t.name)}function Cr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===wr(t)&&!Tr(t)}(n),o=Object(i.contains)(t.node.children,e);r&&o?(delete t.node.children[e],t.node.childCount--,Cr(t)):r||o||(t.node.children[e]=n.node,t.node.childCount++,Cr(t))}(t.parent,t.name,t)}var kr=/[\[\].#$\/\u0000-\u001F\u007F]/,Ar=/[\[\].#$\u0000-\u001F\u007F]/,xr=10485760,Nr=function(t){return"string"==typeof t&&0!==t.length&&!kr.test(t)},jr=function(t){return"string"==typeof t&&0!==t.length&&!Ar.test(t)},Pr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!C(t)||t&&"object"==typeof t&&Object(i.contains)(t,".sv")},Rr=function(t,e,n,r){r&&void 0===e||Dr(Object(i.errorPrefix)(t,"value"),e,n)},Dr=function(t,e,n){var r=n instanceof ht?new It(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Ct(r));if("function"==typeof e)throw new Error(t+"contains a function "+Ct(r)+" with contents = "+e.toString());if(C(e))throw new Error(t+"contains "+e.toString()+" "+Ct(r));if("string"==typeof e&&e.length>xr/3&&Object(i.stringLength)(e)>xr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+Ct(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var o=!1,s=!1;if(D(e,function(e,n){if(".value"===e)o=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Nr(e)))throw new Error(t+" contains an invalid key ("+e+") "+Ct(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(i.stringLength)(e),Ot(t)}(r,e),Dr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=Object(i.stringLength)(u),a.parts_.length>0&&(a.byteLength_-=1)}),o&&s)throw new Error(t+' contains ".value" child '+Ct(r)+" in addition to actual children.")}},Mr=function(t,e,n,r){if(!r||void 0!==e){var o=Object(i.errorPrefix)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");var s=[];D(e,function(t,e){var r=new ht(t);if(Dr(o,e,bt(n,r)),".priority"===mt(r)&&!Pr(e))throw new Error(o+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=yt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Nr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Et);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&St(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},Lr=function(t,e,n){if(!n||void 0!==e){if(C(e))throw new Error(Object(i.errorPrefix)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Pr(e))throw new Error(Object(i.errorPrefix)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Fr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(i.errorPrefix)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ur=function(t,e,n,r){if(!(r&&void 0===n||Nr(n)))throw new Error(Object(i.errorPrefix)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vr=function(t,e,n,r){if(!(r&&void 0===n||jr(n)))throw new Error(Object(i.errorPrefix)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qr=function(t,e){if(".info"===dt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Br=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Nr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),jr(t)}(n))throw new Error(Object(i.errorPrefix)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Hr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(i.errorPrefix)(t,e)+"must be a boolean.")},Kr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function zr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Tt(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Wr(t,e,n){zr(t,n),$r(t,function(t){return Tt(t,e)})}function Gr(t,e,n){zr(t,n),$r(t,function(t){return St(t,e)||St(e,t)})}function $r(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Qr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Qr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&E("event: "+n.toString()),U(r)}}}var Yr="repo_interrupt",Xr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Kr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ae(),this.transactionQueueTree_=new br,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Jr(t){var e=t.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Zr(t){return(e=(e={timestamp:Jr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ti(t,e,n,r,o){t.dataUpdateCount++;var s=new ht(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(o)if(r){var u=Object(i.map)(n,function(t){return oe(t)});a=function(t,e,n,r){var i=ar(t,r);if(i){var o=ur(i),s=o.path,a=o.queryId,u=wt(s,e),c=Ye.fromObject(n);return cr(t,s,new qe(Me(a),u,c))}return[]}(t.serverSyncTree_,s,u,o)}else{var c=oe(n);a=function(t,e,n,r){var i=ar(t,r);if(null!=i){var o=ur(i),s=o.path,a=o.queryId,u=wt(s,e);return cr(t,s,new Ve(Me(a),u,n))}return[]}(t.serverSyncTree_,s,c,o)}else if(r){var l=Object(i.map)(n,function(t){return oe(t)});a=function(t,e,n){var r=Ye.fromObject(n);return er(t,new qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=oe(n);a=Xn(t.serverSyncTree_,s,h)}var f=s;a.length>0&&(f=di(t,s)),Gr(t.eventQueue_,f,a)}function ei(t,e){ni(t,"connected",e),!1===e&&function(t){ci(t,"onDisconnectEvents");var e=Zr(t),n=Ae();je(t.onDisconnect_,ft(),function(r,i){var o=mr(r,i,t.serverSyncTree_,e);xe(n,r,o)});var r=[];je(n,ft(),function(e,n){r=r.concat(Xn(t.serverSyncTree_,e,n));var i=vi(t,e);di(t,i)}),t.onDisconnect_=Ae(),Gr(t.eventQueue_,ft(),r)}(t)}function ni(t,e,n){var r=new ht("/.info/"+e),i=oe(n);t.infoData_.updateSnapshot(r,i);var o=Xn(t.infoSyncTree_,r,i);Gr(t.eventQueue_,r,o)}function ri(t){return t.nextWriteId_++}function ii(t,e,n,r,i){ci(t,"set",{path:e.toString(),value:n,priority:r});var o=Zr(t),s=oe(n,r),a=tr(t.serverSyncTree_,e),u=yr(s,a,o),c=ri(t),l=Qn(t.serverSyncTree_,e,u,c,!0);zr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||O("set at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,c,!o);Gr(t.eventQueue_,e,s),li(0,i,n,r)});var h=vi(t,e);di(t,h),Gr(t.eventQueue_,h,[])}function oi(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Ne(t.onDisconnect_,e),li(0,n,r,i)})}function si(t,e,n,r){var i=oe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&xe(t.onDisconnect_,e,i),li(0,r,n,o)})}function ai(t,e,n){var r;r=".info"===dt(e._path)?Jn(t.infoSyncTree_,e,n):Jn(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}function ui(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Yr)}function ci(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),E.apply(void 0,Object(o.__spreadArray)([r],Object(o.__read)(e)))}function li(t,e,n,r){e&&U(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function hi(t,e,n){return tr(t.serverSyncTree_,e,n)||re.EMPTY_NODE}function fi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||yi(t,e),wr(e)){var n=gi(t,e);Object(i.assert)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),o=hi(t,e,r),s=o,a=o.hash(),u=0;u<n.length;u++){var c=n[u];Object(i.assert)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=wt(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=e;t.server_.put(f.toString(),h,function(r){ci(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Yn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(yi(t,_r(t.transactionQueueTree_,e)),fi(t,t.transactionQueueTree_),Gr(t.eventQueue_,e,i),a=0;a<o.length;a++)U(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(O("transaction at "+f.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;di(t,e)}},a)}(t,Or(e),n)}else Tr(e)&&Sr(e,function(e){fi(t,e)})}function di(t,e){var n=pi(t,e),r=Or(n);return function(t,e,n){if(0!==e.length){for(var r=[],o=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=wt(n,c.path),h=!1;if(Object(i.assert)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,o=o.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",o=o.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else{var f=hi(t,c.path,s);c.currentInputSnapshot=f;var d=e[a].update(f.val());if(void 0!==d){Dr("transaction failed: Data returned ",d,c.path);var p=oe(d);"object"==typeof d&&null!=d&&Object(i.contains)(d,".priority")||(p=p.updatePriority(f.getPriority()));var g=c.currentWriteId,m=Zr(t),y=yr(p,f,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=ri(t),s.splice(s.indexOf(g),1),o=(o=o.concat(Qn(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(Yn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",o=o.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0))}Gr(t.eventQueue_,n,o),o=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(yi(t,t.transactionQueueTree_),u=0;u<r.length;u++)U(r[u]);fi(t,t.transactionQueueTree_)}}(t,gi(t,n),r),r}function pi(t,e){var n,r=t.transactionQueueTree_;for(n=dt(e);null!==n&&void 0===wr(r);)r=_r(r,n),n=dt(e=gt(e));return r}function gi(t,e){var n=[];return mi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function mi(t,e,n){var r=wr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Sr(e,function(e){mi(t,e,n)})}function yi(t,e){var n=wr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Er(e,n.length>0?n:void 0)}Sr(e,function(e){yi(t,e)})}function vi(t,e){var n=Or(pi(t,e)),r=_r(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){bi(t,e)}),bi(t,r),Ir(r,function(e){bi(t,e)}),n}function bi(t,e){var n=wr(e);if(n){for(var r=[],o=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(i.assert)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(i.assert)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),o=o.concat(Yn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Er(e,void 0):n.length=s+1,Gr(t.eventQueue_,Or(e),o),a=0;a<r.length;a++)U(r[a])}}var _i=function(t,e){var n=wi(t),r=n.namespace;return"firebase.com"===n.domain&&I(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||I("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new G(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new ht(n.pathString)}},wi=function(t){var e="",n="",r="",i="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.__values)(t.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):O("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:s}},Ei=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(i.stringify)(this.snapshot.exportVal())},t}(),Ti=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Si=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(i.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Ii=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new i.Deferred;return oi(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){qr("OnDisconnect.remove",this._path);var t=new i.Deferred;return si(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){qr("OnDisconnect.set",this._path),Rr("OnDisconnect.set",t,this._path,!1);var e=new i.Deferred;return si(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){qr("OnDisconnect.setWithPriority",this._path),Rr("OnDisconnect.setWithPriority",t,this._path,!1),Lr("OnDisconnect.setWithPriority",e,!1);var n=new i.Deferred;return function(t,e,n,r,i){var o=oe(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&xe(t.onDisconnect_,e,o),li(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){qr("OnDisconnect.update",this._path),Mr("OnDisconnect.update",t,this._path,!1);var e=new i.Deferred;return function(t,e,n,r){if(Object(i.isEmpty)(n))return E("onDisconnect().update() called with empty data.  Don't do anything."),void li(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&D(n,function(n,r){var i=oe(r);xe(t.onDisconnect_,bt(e,n),i)}),li(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),Oi=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return _t(this._path)?null:mt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new xi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Oe(this._queryParams),e=P(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Oe(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(i.getModularInstance)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Tt(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Ci(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function ki(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Mt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==k)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==A)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===Xt){if(null!=e&&!Pr(e)||null!=n&&!Pr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(i.assert)(t.getIndex()instanceof ue||t.getIndex()===ce,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ai(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var xi=function(t){function e(e,n){return t.call(this,e,n,new we,!1)||this}return Object(o.__extends)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=vt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Oi),Ni=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new ht(e),r=Ri(this.ref,e);return new t(this._node.getChild(n),r,Xt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Ri(n.ref,r),Xt))})},t.prototype.hasChild=function(t){var e=new ht(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function ji(t,e){return(t=Object(i.getModularInstance)(t))._checkNotDeleted("ref"),void 0!==e?Ri(t._root,e):t._root}function Pi(t,e){(t=Object(i.getModularInstance)(t))._checkNotDeleted("refFromURL");var n=_i(e,t._repo.repoInfo_.nodeAdmin);Br("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||I("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),ji(t,n.path.toString())}function Ri(t,e){var n;return null===dt((t=Object(i.getModularInstance)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vr("child","path",n,!1)):Vr("child","path",e,!1),new xi(t._repo,bt(t._path,e))}function Di(t,e){t=Object(i.getModularInstance)(t),qr("push",t._path),Rr("push",e,t._path,!0);var n,r=Jr(t._repo),o=he(r),s=Ri(t,o),a=Ri(t,o);return n=null!=e?Li(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Mi(t){return qr("remove",t._path),Li(t,null)}function Li(t,e){t=Object(i.getModularInstance)(t),qr("set",t._path),Rr("set",e,t._path,!1);var n=new i.Deferred;return ii(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Fi(t,e){t=Object(i.getModularInstance)(t),qr("setPriority",t._path),Lr("setPriority",e,!1);var n=new i.Deferred;return ii(t._repo,bt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Ui(t,e,n){if(qr("setWithPriority",t._path),Rr("setWithPriority",e,t._path,!1),Lr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new i.Deferred;return ii(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Vi(t,e){Mr("update",e,t._path,!1);var n=new i.Deferred;return function(t,e,n,r){ci(t,"update",{path:e.toString(),value:n});var o=!0,s=Zr(t),a={};if(D(n,function(n,r){o=!1,a[n]=mr(bt(e,n),oe(r),t.serverSyncTree_,s)}),o)E("update() called with empty data.  Don't do anything."),li(0,r,"ok",void 0);else{var u=ri(t),c=function(t,e,n,r){!function(t,e,n,r){Object(i.assert)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ze(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var o=Ye.fromObject(n);return er(t,new qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(t.serverSyncTree_,e,a,u);zr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||O("update at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,u,!o),a=s.length>0?di(t,e):e;Gr(t.eventQueue_,a,s),li(0,r,n,i)}),D(n,function(n){var r=vi(t,bt(e,n));di(t,r)}),Gr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var qi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Ei("value",this,new Ni(t.snapshotNode,new xi(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ti(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Bi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ti(this,t,e):null},t.prototype.createEvent=function(t,e){Object(i.assert)(null!=t.childName,"Child events should have a childName.");var n=Ri(new xi(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Ei(t.type,this,new Ni(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Hi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){ai(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Si(n,o||void 0),c="value"===e?new qi(u):new Bi(e,u);return function(t,e,n){var r;r=".info"===dt(e._path)?Zn(t.infoSyncTree_,e,n):Zn(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ai(t._repo,t,c)}}function Ki(t,e,n,r){return Hi(t,"value",e,n,r)}function zi(t,e,n,r){return Hi(t,"child_added",e,n,r)}function Wi(t,e,n,r){return Hi(t,"child_changed",e,n,r)}function Gi(t,e,n,r){return Hi(t,"child_moved",e,n,r)}function $i(t,e,n,r){return Hi(t,"child_removed",e,n,r)}function Qi(t,e,n){var r=null,i=n?new Si(n):null;"value"===e?r=new qi(i):e&&(r=new Bi(e,i)),ai(t._repo,t,r)}var Yi=function(){return function(){}}(),Xi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Rr("endAt",this._value,t._path,!0);var e=Te(t._queryParams,this._value,this._key);if(Ai(e),ki(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Oi(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function Ji(t,e){return Ur("endAt","key",e,!0),new Xi(t,e)}var Zi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Rr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=de(n)),i=Te(e,n,r)):i=Te(e,n,null==r?k:de(r)),i.endBeforeSet_=!0,i);if(Ai(o),ki(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Oi(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function to(t,e){return Ur("endBefore","key",e,!0),new Zi(t,e)}var eo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Rr("startAt",this._value,t._path,!0);var e=Ee(t._queryParams,this._value,this._key);if(Ai(e),ki(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Oi(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function no(t,e){return void 0===t&&(t=null),Ur("startAt","key",e,!0),new eo(t,e)}var ro=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Rr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=fe(n)),i=Ee(e,n,r)):i=Ee(e,n,null==r?A:fe(r)),i.startAfterSet_=!0,i);if(Ai(o),ki(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Oi(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function io(t,e){return Ur("startAfter","key",e,!0),new ro(t,e)}var oo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Oi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Yi);function so(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oo(t)}var ao=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Oi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Yi);function uo(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ao(t)}var co=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Ci(t,"orderByChild");var e=new ht(this._path);if(_t(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ue(e),r=Se(t._queryParams,n);return ki(r),new Oi(t._repo,t._path,r,!0)},e}(Yi);function lo(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vr("orderByChild","path",t,!1),new co(t)}var ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Ci(t,"orderByKey");var e=Se(t._queryParams,Mt);return ki(e),new Oi(t._repo,t._path,e,!0)},e}(Yi);function fo(){return new ho}var po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Ci(t,"orderByPriority");var e=Se(t._queryParams,Xt);return ki(e),new Oi(t._repo,t._path,e,!0)},e}(Yi);function go(){return new po}var mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Ci(t,"orderByValue");var e=Se(t._queryParams,ce);return ki(e),new Oi(t._repo,t._path,e,!0)},e}(Yi);function yo(){return new mo}var vo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){if(Rr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Xi(this._value,this._key)._apply(new eo(this._value,this._key)._apply(t))},e}(Yi);function bo(t,e){return Ur("equalTo","key",e,!0),new vo(t,e)}function _o(t){for(var e,n,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];var a=Object(i.getModularInstance)(t);try{for(var u=Object(o.__values)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){Object(i.assert)(!xn,"__referenceConstructor has already been defined"),xn=t}(xi),function(t){Object(i.assert)(!Ln,"__referenceConstructor has already been defined"),Ln=t}(xi);var wo={},Eo=!1;function To(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||I("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),E("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=_i(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=_i(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new H(H.OWNER):new B(t.name,t.options,e);Br("Invalid Firebase Database URL",a),_t(a.path)||I("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=wo[e.name];i||(wo[e.name]=i={});var o=i[t.toURLString()];return o&&I("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Xr(t,Eo,n,r),i[t.toURLString()]=o,o}(u,t,l,new q(t.name,n));return new So(h,t)}var So=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=J(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ce(t.repoInfo_,function(e,n,r,i){ti(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ei(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(i.stringify)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new jt(t.repoInfo_,e,function(e,n,r,i){ti(t,e,n,r,i)},function(e){ei(t,e)},function(e){!function(t,e){D(e,function(e,n){ni(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,o;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new Re(t.stats_,t.server_)},o=t.repoInfo_.toString(),X[o]||(X[o]=r()),X[o]),t.infoData_=new ke,t.infoSyncTree_=new $n({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Xn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ni(t,"connected",!1),t.serverSyncTree_=new $n({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Gr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new xi(this._repo,ft())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=wo[e=this.app.name])&&n[t.key]===t||I("Database "+e+"("+t.repoInfo_+") has already been deleted."),ui(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&I("Cannot call "+t+" on a deleted database.")},t}();function Io(t){(t=Object(i.getModularInstance)(t))._checkNotDeleted("goOffline"),ui(t._repo)}function Oo(t){var e;(t=Object(i.getModularInstance)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Yr)}var Co={".sv":"timestamp"},ko=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Ao(t,e,n){var r;if(t=Object(i.getModularInstance)(t),qr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new i.Deferred,a=Ki(t,function(){});return function(e,n,r,o,a,u){ci(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Ni(r,new xi(t._repo,t._path),Xt),s.resolve(new ko(n,i)))},status:null,order:m(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=hi(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Dr("transaction failed: Data returned ",h,c.path),c.status=0;var f=_r(e.transactionQueueTree_,n),d=wr(f)||[];d.push(c),Er(f,d);var p=void 0;"object"==typeof h&&null!==h&&Object(i.contains)(h,".priority")?(p=Object(i.safeGet)(h,".priority"),Object(i.assert)(Pr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(tr(e.serverSyncTree_,n)||re.EMPTY_NODE).getPriority().val();var g=Zr(e),y=oe(h,p),v=yr(y,l,g);c.currentOutputSnapshotRaw=y,c.currentOutputSnapshotResolved=v,c.currentWriteId=ri(e);var b=Qn(e.serverSyncTree_,n,v,c.currentWriteId,c.applyLocally);Gr(e.eventQueue_,n,b),fi(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,o),s.promise}var xo=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(i.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),Object(i.validateCallback)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){Object(i.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),Object(i.validateCallback)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){Object(i.validateArgCount)("OnDisconnect.set",1,2,arguments.length),Object(i.validateCallback)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){Object(i.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(i.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if(Object(i.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(i.validateCallback)("OnDisconnect.update","onComplete",e,!0);var o=this._delegate.update(t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},t}(),No=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(i.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),jo=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(i.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(i.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(i.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(i.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(i.validateArgCount)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(i.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),Vr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(i.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(i.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),Object(i.validateCallback)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return Object(i.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(i.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(i.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new Ro(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Po=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,o){var s,a=this;Object(i.validateArgCount)("Query.on",2,4,arguments.length),Object(i.validateCallback)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,o),c=function(t,e){n.call(u.context,new jo(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return Ki(this._delegate,c,l),n;case"child_added":return zi(this._delegate,c,l),n;case"child_removed":return $i(this._delegate,c,l),n;case"child_changed":return Wi(this._delegate,c,l),n;case"child_moved":return Gi(this._delegate,c,l),n;default:throw new Error(Object(i.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(i.validateArgCount)("Query.off",0,3,arguments.length),Fr("Query.off",t,!0),Object(i.validateCallback)("Query.off","callback",e,!0),Object(i.validateContextObject)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Qi(this._delegate,t,r)}else Qi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=wt(t,n);r=r||Bn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Bn(i,ft()):(i=new Fn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Be(r,!0,!1):null;return $e(Vn(i,e,cn(t.pendingWriteTree_,e._path),o?s.getNode():re.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=oe(n),i=Xn(t.serverSyncTree_,e._path,r);return Wr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return ci(t,"get for query "+Object(i.stringify)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=Object(i.getModularInstance)(t))._repo,t).then(function(e){return new Ni(e,new xi(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new jo(t.database,e)})},t.prototype.once=function(e,n,r,o){var s=this;Object(i.validateArgCount)("Query.once",1,4,arguments.length),Object(i.validateCallback)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,o),u=new i.Deferred,c=function(t,e){var r=new jo(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":Ki(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":$i(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Wi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Gi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(i.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(i.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new t(this.database,_o(this._delegate,so(e)))},t.prototype.limitToLast=function(e){return Object(i.validateArgCount)("Query.limitToLast",1,1,arguments.length),new t(this.database,_o(this._delegate,uo(e)))},t.prototype.orderByChild=function(e){return Object(i.validateArgCount)("Query.orderByChild",1,1,arguments.length),new t(this.database,_o(this._delegate,lo(e)))},t.prototype.orderByKey=function(){return Object(i.validateArgCount)("Query.orderByKey",0,0,arguments.length),new t(this.database,_o(this._delegate,fo()))},t.prototype.orderByPriority=function(){return Object(i.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new t(this.database,_o(this._delegate,go()))},t.prototype.orderByValue=function(){return Object(i.validateArgCount)("Query.orderByValue",0,0,arguments.length),new t(this.database,_o(this._delegate,yo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.startAt",0,2,arguments.length),new t(this.database,_o(this._delegate,no(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.startAfter",0,2,arguments.length),new t(this.database,_o(this._delegate,io(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.endAt",0,2,arguments.length),new t(this.database,_o(this._delegate,Ji(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.endBefore",0,2,arguments.length),new t(this.database,_o(this._delegate,to(e,n)))},t.prototype.equalTo=function(e,n){return Object(i.validateArgCount)("Query.equalTo",1,2,arguments.length),new t(this.database,_o(this._delegate,bo(e,n)))},t.prototype.toString=function(){return Object(i.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(i.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(i.validateArgCount)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(i.validateCallback)(t,"cancel",r.cancel,!0),r.context=n,Object(i.validateContextObject)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(i.errorPrefix)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Ro(this.database,new xi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Ro=function(t){function e(e,n){var r=t.call(this,e,new Oi(n._repo,n._path,new we,!1))||this;return r.database=e,r._delegate=n,r}return Object(o.__extends)(e,t),e.prototype.getKey=function(){return Object(i.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(i.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Ri(this._delegate,t))},e.prototype.getParent=function(){Object(i.validateArgCount)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(i.validateArgCount)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(i.validateArgCount)("Reference.set",1,2,arguments.length),Object(i.validateCallback)("Reference.set","onComplete",e,!0);var n=Li(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if(Object(i.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qr("Reference.update",this._delegate._path),Object(i.validateCallback)("Reference.update","onComplete",e,!0);var o=Vi(this._delegate,t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},e.prototype.setWithPriority=function(t,e,n){Object(i.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),Object(i.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=Ui(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){Object(i.validateArgCount)("Reference.remove",0,1,arguments.length),Object(i.validateCallback)("Reference.remove","onComplete",t,!0);var e=Mi(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;Object(i.validateArgCount)("Reference.transaction",1,3,arguments.length),Object(i.validateCallback)("Reference.transaction","transactionUpdate",t,!1),Object(i.validateCallback)("Reference.transaction","onComplete",e,!0),Hr("Reference.transaction","applyLocally",n,!0);var o=Ao(this._delegate,t,{applyLocally:n}).then(function(t){return new No(t.committed,new jo(r.database,t.snapshot))});return e&&o.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),o},e.prototype.setPriority=function(t,e){Object(i.validateArgCount)("Reference.setPriority",1,2,arguments.length),Object(i.validateCallback)("Reference.setPriority","onComplete",e,!0);var n=Fi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;Object(i.validateArgCount)("Reference.push",0,2,arguments.length),Object(i.validateCallback)("Reference.push","onComplete",n,!0);var o=Di(this._delegate,t),s=o.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,o);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return qr("Reference.onDisconnect",this._delegate._path),new xo(new Ii(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Po),Do=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=Object(i.getModularInstance)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&I("Cannot call useEmulator() after instance has already been initialized.");var o=t._repoInternal,s=void 0;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&I('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new H(H.OWNER);else if(r.mockUserToken){var a=Object(i.createMockUserToken)(r.mockUserToken,t.app.options.projectId);s=new H(a)}!function(t,e,n,r){t.repoInfo_=new G(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(o,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(i.validateArgCount)("database.ref",0,1,arguments.length),t instanceof Ro){var e=Pi(this._delegate,t.toString());return new Ro(this,e)}return e=ji(this._delegate,t),new Ro(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(i.validateArgCount)(e,1,1,arguments.length);var n=Pi(this._delegate,t);return new Ro(this,n)},t.prototype.goOffline=function(){return Object(i.validateArgCount)("database.goOffline",0,0,arguments.length),Io(this._delegate)},t.prototype.goOnline=function(){return Object(i.validateArgCount)("database.goOnline",0,0,arguments.length),Oo(this._delegate)},t.ServerValue={TIMESTAMP:Co,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Mo=Object.freeze({__proto__:null,forceLongPolling:function(){ot.forceDisallow(),nt.forceAllow()},forceWebSockets:function(){nt.forceDisallow()},isWebSocketsAvailable:function(){return ot.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Pe(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);D(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;u(t.version);var c=new r.Provider("auth-internal",new r.ComponentContainer("database-standalone"));return c.setComponent(new r.Component("auth-internal",function(){return i},"PRIVATE")),{instance:new Do(To(e,c,void 0,n,a),e),namespace:o}}}),Lo=jt;jt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},jt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Fo=Object.freeze({__proto__:null,DataConnection:Lo,RealTimeConnection:at,hijackHash:function(t){var e=jt.prototype.put;return jt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){jt.prototype.put=e}},ConnectionTarget:G,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Eo=t}(t)}}),Uo=Do.ServerValue;!function(e){u(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new r.Component("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Do(To(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:Ro,Query:Po,Database:Do,DataSnapshot:jo,enableLogging:w,INTERNAL:Mo,ServerValue:Uo,TEST_ACCESS:Fo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.1"),Object(i.isNodeSdk)()&&(t.exports=n)}(e.default)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.default}),r.default.registerVersion("firebase","8.6.1","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},"X8/r":function(t,e,n){"use strict";var r=n("zIRd"),i=n("/6Yf"),o=n("mrSG"),s=n("qOnz"),a=n("q/0M");function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c,l=u(r),h=((c={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),f=new s.ErrorFactory("appCheck","AppCheck",h),d=new Map,p={activated:!1,tokenListeners:[]},g={enabled:!1};function m(t){return d.get(t)||p}function y(t,e){d.set(t,e)}function v(){return g}function b(){return self.grecaptcha}function _(t){if(!m(t).activated)throw f.create("use-before-activation",{appName:t.name})}function w(t){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(n){switch(n.label){case 0:return _(t),[4,m(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise(function(n,r){var i=m(t).reCAPTCHAState;e.ready(function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))})})]}})})}function E(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),s=m(t);y(t,o.__assign(o.__assign({},s),{reCAPTCHAState:o.__assign(o.__assign({},s.reCAPTCHAState),{widgetId:i})}))}var T="https://content-firebaseappcheck.googleapis.com/v1beta",S=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new s.Deferred,[4,(r=this.getNextRun(t),new Promise(function(t){setTimeout(t,r)}))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new s.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}var r})})},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function I(t,e){var n=t.url,r=t.body;return o.__awaiter(this,void 0,void 0,function(){var t,i,s,a,u,c,l,h,d,p;return o.__generator(this,function(o){switch(o.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),s={method:"POST",body:JSON.stringify(r),headers:t},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,s)];case 2:return a=o.sent(),[3,4];case 3:throw u=o.sent(),f.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==a.status)throw f.create("fetch-status-error",{httpStatus:a.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,a.json()];case 6:return c=o.sent(),[3,8];case 7:throw l=o.sent(),f.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(!(h=c.ttl.match(/^([\d.]+)(s)$/))||!h[2]||isNaN(Number(h[1])))throw f.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return d=1e3*Number(h[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+d,issuedAtTimeMillis:p}]}})})}function O(t,e){var n=t.options;return{url:T+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeRecaptchaToken?key="+n.apiKey,body:{recaptcha_token:e}}}function C(t,e){var n=t.options;return{url:T+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeDebugToken?key="+n.apiKey,body:{debug_token:e}}}var k="firebase-app-check-store",A="debug-token",x=null;function N(){return x||(x=new Promise(function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(f.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(k,{keyPath:"compositeKey"})}}}catch(r){e(f.create("storage-open",{originalErrorMessage:r.message}))}}))}function j(t){return R(D(t))}function P(t,e){return o.__awaiter(this,void 0,void 0,function(){var n,r,i,s;return o.__generator(this,function(o){switch(o.label){case 0:return[4,N()];case 1:return n=o.sent(),r=n.transaction(k,"readwrite"),i=r.objectStore(k),s=i.put({compositeKey:t,value:e}),[2,new Promise(function(t,e){s.onsuccess=function(e){t()},r.onerror=function(t){var n;e(f.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})]}})})}function R(t){return o.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return o.__generator(this,function(o){switch(o.label){case 0:return[4,N()];case 1:return e=o.sent(),n=e.transaction(k,"readonly"),r=n.objectStore(k),i=r.get(t),[2,new Promise(function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(f.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})]}})})}function D(t){return t.options.appId+"-"+t.name}var M=new a.Logger("@firebase/app-check");function L(t){return o.__awaiter(this,void 0,void 0,function(){var e,n;return o.__generator(this,function(r){switch(r.label){case 0:if(!s.isIndexedDBAvailable())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,j(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),M.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}})})}function F(t,e){return s.isIndexedDBAvailable()?function(t,e){return P(D(t),e)}(t,e).catch(function(t){M.warn("Failed to write token to indexeddb. Error: "+t)}):Promise.resolve()}function U(){return v().enabled}function V(){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(e){if((t=v()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")})})}var q={error:"UNKNOWN_ERROR"};function B(t,e,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,function(){var r,i,a,u,c,l,h,d,p,g,v,b,E;return o.__generator(this,function(T){switch(T.label){case 0:return _(t),U()?(r=I,i=C,a=[t],[4,V()]):[3,3];case 1:return[4,r.apply(void 0,[i.apply(void 0,a.concat([T.sent()])),e])];case 2:return[2,{token:T.sent().token}];case 3:return u=m(t),l=void 0,(c=u.token)?[3,5]:[4,L(t)];case 4:(h=T.sent())&&K(h)&&(c=h,y(t,o.__assign(o.__assign({},u),{token:c})),H(t,{token:c.token})),T.label=5;case 5:if(!n&&c&&K(c))return[2,{token:c.token}];T.label=6;case 6:return T.trys.push([6,12,,13]),u.customProvider?[4,u.customProvider.getToken()]:[3,8];case 7:return d=T.sent(),p=s.issuedAtTime(d.token),g=null!==p&&p<Date.now()&&p>0?1e3*p:Date.now(),c=o.__assign(o.__assign({},d),{issuedAtTimeMillis:g}),[3,11];case 8:return[4,w(t).catch(function(t){throw f.create("recaptcha-error")})];case 9:return v=T.sent(),[4,I(O(t,v),e)];case 10:c=T.sent(),T.label=11;case 11:return[3,13];case 12:return b=T.sent(),M.error(b),l=b,[3,13];case 13:return c?[3,14]:(E=function(t){return{token:(e=q,s.base64.encodeString(JSON.stringify(e),!1)),error:t};var e}(l),[3,16]);case 14:return E={token:c.token},y(t,o.__assign(o.__assign({},u),{token:c})),[4,F(t,c)];case 15:T.sent(),T.label=16;case 16:return H(t,E),[2,E]}})})}function H(t,e){for(var n=0,r=m(t).tokenListeners;n<r.length;n++){var i=r[n];try{i(e)}catch(o){}}}function K(t){return t.expireTimeMillis-Date.now()>0}var z="app-check-internal";!function(t){t.INTERNAL.registerComponent(new i.Component("appCheck",function(t){return e=t.getProvider("app").getImmediate(),{activate:function(t,n){return function(t,e,n){var r=m(t);if(r.activated)throw f.create("already-activated",{appName:t.name});var i=o.__assign(o.__assign({},r),{activated:!0});"string"==typeof e?i.siteKey=e:i.customProvider=e,i.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,y(t,i),i.siteKey&&function(t,e){var n=m(t),r=new s.Deferred;y(t,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,a=document.createElement("div");a.id=i,a.style.display="none",document.body.appendChild(a);var u,c,l=b();return l?l.ready(function(){E(t,e,l,i),r.resolve(l)}):(u=function(){var n=b();if(!n)throw new Error("no recaptcha");n.ready(function(){E(t,e,n,i),r.resolve(n)})},(c=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",c.onload=u,document.head.appendChild(c)),r.promise}(t,i.siteKey).catch(function(){})}(e,t,n)},setTokenAutoRefreshEnabled:function(t){return function(t,e){var n=m(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),y(t,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:e}))}(e,t)}};var e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(t,e,n){t.getProvider(z).initialize()})),t.INTERNAL.registerComponent(new i.Component(z,function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger"),{getToken:function(t){return B(e,n,t)},addTokenListener:function(t){return function(t,e,n){var r=m(t),i=o.__assign(o.__assign({},r),{tokenListeners:o.__spreadArray(o.__spreadArray([],r.tokenListeners),[n])});if(U()){var s=v();s.enabled&&s.token&&s.token.promise.then(function(t){return n({token:t})}).catch(function(){})}else{if(!i.tokenRefresher){var a=function(t,e){var n=this;return new S(function(){return o.__awaiter(n,void 0,void 0,function(){var n;return o.__generator(this,function(r){switch(r.label){case 0:return m(t).token?[3,2]:[4,B(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,B(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}})})},function(){return!0},function(){var e=m(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,e.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},3e4,96e4)}(t,e);i.tokenRefresher=a}if(i.tokenRefresher.isRunning()||!0!==r.isTokenAutoRefreshEnabled||i.tokenRefresher.start(),r.token&&K(r.token)){var u=r.token;Promise.resolve().then(function(){return n({token:u.token})}).catch(function(){})}}y(t,i)}(e,n,t)},removeTokenListener:function(t){return function(t,e){var n=m(t),r=n.tokenListeners.filter(function(t){return t!==e});0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),y(t,o.__assign(o.__assign({},n),{tokenListeners:r}))}(e,t)}};var e,n},"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.1.1")}(l.default),function(){var t=s.getGlobal();if("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=v();e.enabled=!0;var n=new s.Deferred;e.token=n,n.resolve("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?t.FIREBASE_APPCHECK_DEBUG_TOKEN:function(){return o.__awaiter(this,void 0,void 0,function(){var t,e;return o.__generator(this,function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,R(A)];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:((r=e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}),P(A,r)).catch(function(t){return M.warn("Failed to persist debug token to indexeddb. Error: "+t)}),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r})})}())}}()},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return an}),n.d(e,"b",function(){return Eu}),n.d(e,"c",function(){return yu}),n.d(e,"d",function(){return gu}),n.d(e,"e",function(){return mu}),n.d(e,"f",function(){return gc}),n.d(e,"g",function(){return oc}),n.d(e,"h",function(){return ya}),n.d(e,"i",function(){return Pu}),n.d(e,"j",function(){return qs}),n.d(e,"k",function(){return Iu}),n.d(e,"l",function(){return zs}),n.d(e,"m",function(){return wr}),n.d(e,"n",function(){return $a}),n.d(e,"o",function(){return uo}),n.d(e,"p",function(){return kn}),n.d(e,"q",function(){return N}),n.d(e,"r",function(){return sn}),n.d(e,"s",function(){return Io}),n.d(e,"t",function(){return la}),n.d(e,"u",function(){return fa}),n.d(e,"v",function(){return Su}),n.d(e,"w",function(){return ka}),n.d(e,"x",function(){return ac}),n.d(e,"y",function(){return Ca}),n.d(e,"z",function(){return tc}),n.d(e,"A",function(){return Mu}),n.d(e,"B",function(){return An}),n.d(e,"C",function(){return wu}),n.d(e,"D",function(){return _u}),n.d(e,"E",function(){return Ya}),n.d(e,"F",function(){return $s}),n.d(e,"G",function(){return Gs}),n.d(e,"H",function(){return Ir}),n.d(e,"I",function(){return Ys}),n.d(e,"J",function(){return mr}),n.d(e,"K",function(){return xn}),n.d(e,"L",function(){return lc}),n.d(e,"M",function(){return Ta}),n.d(e,"N",function(){return Hu}),n.d(e,"O",function(){return un}),n.d(e,"P",function(){return Js}),n.d(e,"Q",function(){return Xs}),n.d(e,"R",function(){return xa}),n.d(e,"S",function(){return L}),n.d(e,"T",function(){return ec}),n.d(e,"U",function(){return Ju}),n.d(e,"V",function(){return In}),n.d(e,"W",function(){return Xu}),n.d(e,"X",function(){return dc}),n.d(e,"Y",function(){return Wu}),n.d(e,"Z",function(){return Tu}),n.d(e,"ab",function(){return lo}),n.d(e,"bb",function(){return Cs}),n.d(e,"cb",function(){return v}),n.d(e,"db",function(){return pr}),n.d(e,"eb",function(){return Xn}),n.d(e,"fb",function(){return Vn}),n.d(e,"gb",function(){return Bn}),n.d(e,"hb",function(){return Wn}),n.d(e,"ib",function(){return Kn}),n.d(e,"jb",function(){return Hn}),n.d(e,"kb",function(){return zn}),n.d(e,"lb",function(){return Ts}),n.d(e,"mb",function(){return fc}),n.d(e,"nb",function(){return Ss}),n.d(e,"ob",function(){return Is}),n.d(e,"pb",function(){return qn}),n.d(e,"qb",function(){return B}),n.d(e,"rb",function(){return Do}),n.d(e,"sb",function(){return Xo}),n.d(e,"tb",function(){return Qo}),n.d(e,"ub",function(){return Yo}),n.d(e,"vb",function(){return Es}),n.d(e,"wb",function(){return kt}),n.d(e,"xb",function(){return f}),n.d(e,"yb",function(){return Un}),n.d(e,"zb",function(){return Co}),n.d(e,"Ab",function(){return wt}),n.d(e,"Bb",function(){return Fs}),n.d(e,"Cb",function(){return fi}),n.d(e,"Db",function(){return Fo}),n.d(e,"Eb",function(){return us}),n.d(e,"Fb",function(){return uu}),n.d(e,"Gb",function(){return tt}),n.d(e,"Hb",function(){return at}),n.d(e,"Ib",function(){return E}),n.d(e,"Jb",function(){return T}),n.d(e,"Kb",function(){return it}),n.d(e,"Lb",function(){return ut}),n.d(e,"Mb",function(){return Vo}),n.d(e,"Nb",function(){return zo}),n.d(e,"Ob",function(){return Go}),n.d(e,"Pb",function(){return Wo}),n.d(e,"Qb",function(){return Ko}),n.d(e,"Rb",function(){return Ho}),n.d(e,"Sb",function(){return $o}),n.d(e,"Tb",function(){return tn}),n.d(e,"Ub",function(){return vs}),n.d(e,"Vb",function(){return Sn}),n.d(e,"Wb",function(){return nn}),n.d(e,"Xb",function(){return pu}),n.d(e,"Yb",function(){return Jo}),n.d(e,"Zb",function(){return cu}),n.d(e,"ac",function(){return ve}),n.d(e,"bc",function(){return es}),n.d(e,"cc",function(){return za}),n.d(e,"dc",function(){return Wa}),n.d(e,"ec",function(){return is}),n.d(e,"fc",function(){return rs}),n.d(e,"gc",function(){return qo}),n.d(e,"hc",function(){return su}),n.d(e,"ic",function(){return Wt}),n.d(e,"jc",function(){return yr}),n.d(e,"kc",function(){return ot}),n.d(e,"lc",function(){return as}),n.d(e,"mc",function(){return Uo}),n.d(e,"nc",function(){return du}),n.d(e,"oc",function(){return ps}),n.d(e,"pc",function(){return gs}),n.d(e,"qc",function(){return ms}),n.d(e,"rc",function(){return ys}),n.d(e,"sc",function(){return au});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("EQ5u"),u=n("x+ZX");function c(){return new r.a}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function f(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(f).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function d(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const p=l({__forward_ref__:l});function g(t){return t.__forward_ref__=g,t.toString=function(){return f(this())},t}function m(t){return y(t)?t():t}function y(t){return"function"==typeof t&&t.hasOwnProperty(p)&&t.__forward_ref__===g}class v extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function b(t){return"string"==typeof t?t:null==t?"":String(t)}function _(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():b(t)}function w(t,e){const n=e?` in ${e}`:"";throw new v("201",`No provider for ${_(t)} found${n}`)}function E(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function T(t){return{providers:t.providers||[],imports:t.imports||[]}}function S(t){return I(t,C)||I(t,A)}function I(t,e){return t.hasOwnProperty(e)?t[e]:null}function O(t){return t&&(t.hasOwnProperty(k)||t.hasOwnProperty(x))?t[k]:null}const C=l({"\u0275prov":l}),k=l({"\u0275inj":l}),A=l({ngInjectableDef:l}),x=l({ngInjectorDef:l});var N=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let j;function P(t){const e=j;return j=t,e}function R(t,e,n){const r=S(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&N.Optional?null:void 0!==e?e:void w(f(t),"Injector")}function D(t){return{toString:t}.toString()}var M=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const F="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,V="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,B=F||q||U||V,H={},K=[],z=[],W=l({"\u0275cmp":l}),G=l({"\u0275dir":l}),$=l({"\u0275pipe":l}),Q=l({"\u0275mod":l}),Y=l({"\u0275loc":l}),X=l({"\u0275fac":l}),J=l({__NG_ELEMENT_ID__:l});let Z=0;function tt(t){return D(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===M.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||z,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||z,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Z++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(et):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(nt):null,n})}function et(t){return ct(t)||function(t){return t[G]||null}(t)}function nt(t){return function(t){return t[$]||null}(t)}const rt={};function it(t){const e={type:t.type,bootstrap:t.bootstrap||z,declarations:t.declarations||z,imports:t.imports||z,exports:t.exports||z,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&D(()=>{rt[t.id]=t.type}),e}function ot(t,e){return D(()=>{const n=lt(t,!0);n.declarations=e.declarations||z,n.imports=e.imports||z,n.exports=e.exports||z})}function st(t,e){if(null==t)return H;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const at=tt;function ut(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ct(t){return t[W]||null}function lt(t,e){const n=t[Q]||null;if(!n&&!0===e)throw new Error(`Type ${f(t)} does not have '\u0275mod' property.`);return n}const ht=20,ft=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function pt(t){return Array.isArray(t)&&!0===t[1]}function gt(t){return 0!=(8&t.flags)}function mt(t){return 2==(2&t.flags)}function yt(t){return 1==(1&t.flags)}function vt(t){return null!==t.template}function bt(t,e){return t.hasOwnProperty(X)?t[X]:null}class _t{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function wt(){return Et}function Et(t){return t.type.prototype.ngOnChanges&&(t.setInput=St),Tt}function Tt(){const t=It(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===H)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function St(t,e,n,r){const i=It(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:H,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new _t(u&&u.currentValue,e,s===H),t[r]=e}function It(t){return t.__ngSimpleChanges__||null}wt.ngInherit=!0;const Ot="http://www.w3.org/2000/svg";let Ct;function kt(t){Ct=t}function At(t){return!!t.listen}const xt={createRenderer:(t,e)=>void 0!==Ct?Ct:"undefined"!=typeof document?document:void 0};function Nt(t){for(;Array.isArray(t);)t=t[0];return t}function jt(t,e){return Nt(e[t])}function Pt(t,e){return Nt(e[t.index])}function Rt(t,e){return t.data[e]}function Dt(t,e){const n=e[t];return dt(n)?n:n[0]}function Mt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Lt(t){return 4==(4&t[2])}function Ft(t){return 128==(128&t[2])}function Ut(t,e){return null==e?null:t[e]}function Vt(t){t[18]=0}function qt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Bt={lFrame:he(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ht(){return Bt.bindingsEnabled}function Kt(){return Bt.lFrame.lView}function zt(){return Bt.lFrame.tView}function Wt(t){Bt.lFrame.contextLView=t}function Gt(){let t=$t();for(;null!==t&&64===t.type;)t=t.parent;return t}function $t(){return Bt.lFrame.currentTNode}function Qt(t,e){const n=Bt.lFrame;n.currentTNode=t,n.isParent=e}function Yt(){return Bt.lFrame.isParent}function Xt(){Bt.lFrame.isParent=!1}function Jt(){return Bt.isInCheckNoChangesMode}function Zt(t){Bt.isInCheckNoChangesMode=t}function te(){return Bt.lFrame.bindingIndex}function ee(){return Bt.lFrame.bindingIndex++}function ne(t){const e=Bt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function re(t,e){const n=Bt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ie(e)}function ie(t){Bt.lFrame.currentDirectiveIndex=t}function oe(){return Bt.lFrame.currentQueryIndex}function se(t){Bt.lFrame.currentQueryIndex=t}function ae(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ue(t,e,n){if(n&N.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&N.Host||(r=ae(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Bt.lFrame=le();return r.currentTNode=e,r.lView=t,!0}function ce(t){const e=le(),n=t[1];Bt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function le(){const t=Bt.lFrame,e=null===t?null:t.child;return null===e?he(t):e}function he(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function fe(){const t=Bt.lFrame;return Bt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const de=fe;function pe(){const t=fe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ge(){return Bt.lFrame.selectedIndex}function me(t){Bt.lFrame.selectedIndex=t}function ye(){const t=Bt.lFrame;return Rt(t.tView,t.selectedIndex)}function ve(){Bt.lFrame.currentNamespace=Ot}function be(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function _e(t,e,n){Te(t,e,3,n)}function we(t,e,n,r){(3&t[2])===n&&Te(t,e,n,r)}function Ee(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Te(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Se(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Se(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const Ie=-1;class Oe{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ce(t,e,n){const r=At(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ae(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function ke(t){return 3===t||4===t||6===t}function Ae(t){return 64===t.charCodeAt(0)}function xe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ne(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ne(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function je(t){return t!==Ie}function Pe(t){return 32767&t}function Re(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let De=!0;function Me(t){const e=De;return De=t,e}let Le=0;function Fe(t,e){const n=Ve(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ue(r.data,t),Ue(e,null),Ue(r.blueprint,null));const i=qe(t,e),o=t.injectorIndex;if(je(i)){const t=Pe(i),n=Re(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ue(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ve(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function qe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ie;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ie}function Be(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(J)&&(r=n[J]),null==r&&(r=n[J]=Le++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function He(t,e,n){if(n&N.Optional)return t;w(e,"NodeInjector")}function Ke(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const i=t[9],o=P(void 0);try{return i?i.get(e,r,n&N.Optional):R(e,r,n&N.Optional)}finally{P(o)}}return He(r,e,n)}function ze(t,e,n,r=N.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(J)?t[J]:void 0;return"number"==typeof e?e>=0?255&e:Ge:e}(n);if("function"==typeof o){if(!ue(e,t,r))return r&N.Host?He(i,n,r):Ke(e,n,r,i);try{const t=o();if(null!=t||r&N.Optional)return t;w(n)}finally{de()}}else if("number"==typeof o){let i=null,s=Ve(t,e),a=Ie,u=r&N.Host?e[16][6]:null;for((-1===s||r&N.SkipSelf)&&(a=-1===s?qe(t,e):e[s+8],a!==Ie&&Je(r,!1)?(i=e[1],s=Pe(a),e=Re(a,e)):s=-1);-1!==s;){const t=e[1];if(Xe(o,s,t.data)){const t=$e(s,e,n,i,r,u);if(t!==We)return t}a=e[s+8],a!==Ie&&Je(r,e[1].data[s+8]===u)&&Xe(o,s,e)?(i=t,s=Pe(a),e=Re(a,e)):s=-1}}}return Ke(e,n,r,i)}const We={};function Ge(){return new Ze(Gt(),Kt())}function $e(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Qe(a,s,n,null==r?mt(a)&&De:r!=s&&0!=(3&a.type),i&N.Host&&o===a);return null!==u?Ye(e,s,u,a):We}function Qe(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&vt(t)&&t.type===n)return u}return null}function Ye(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Oe){const s=i;s.resolving&&function(t,e){throw new v("200",`Circular dependency in DI detected for ${t}`)}(_(o[n]));const a=Me(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?P(s.injectImpl):null;ue(t,r,N.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Et(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&P(u),Me(a),s.resolving=!1,de()}}return i}function Xe(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Je(t,e){return!(t&N.Self||t&N.Host&&e)}class Ze{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return ze(this._tNode,this._lView,t,void 0,e)}}function tn(t){return D(()=>{const e=t.prototype.constructor,n=e[X]||en(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[X]||en(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function en(t){return y(t)?()=>{const e=en(m(t));return e&&e()}:bt(t)}function nn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(ke(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Gt(),t)}const rn="__parameters__";function on(t,e,n){return D(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(rn)?t[rn]:Object.defineProperty(t,rn,{value:[]})[rn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class sn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=E({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const an=new sn("AnalyzeForEntryComponents"),un=Function;function cn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),cn(r,e)):e!==t&&e.push(r)}return e}function ln(t,e){t.forEach(t=>Array.isArray(t)?ln(t,e):e(t))}function hn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function fn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function pn(t,e,n){let r=mn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function gn(t,e){const n=mn(t,e);if(n>=0)return t[1|n]}function mn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const yn={},vn=/\n/gm,bn="__source",_n=l({provide:String,useValue:l});let wn;function En(t){const e=wn;return wn=t,e}function Tn(t,e=N.Default){if(void 0===wn)throw new Error("inject() must be called from an injection context");return null===wn?R(t,void 0,e):wn.get(t,e&N.Optional?null:void 0,e)}function Sn(t,e=N.Default){return(j||Tn)(m(t),e)}const In=Sn;function On(t){const e=[];for(let n=0;n<t.length;n++){const r=m(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=N.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(Sn(t,n))}else e.push(Sn(r))}return e}function Cn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const kn=Cn(on("Inject",t=>({token:t})),-1),An=Cn(on("Optional"),8),xn=Cn(on("SkipSelf"),4);let Nn;function jn(t){var e;return(null===(e=function(){if(void 0===Nn&&(Nn=null,B.trustedTypes))try{Nn=B.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Nn}())||void 0===e?void 0:e.createHTML(t))||t}class Pn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Rn extends Pn{getTypeName(){return"HTML"}}class Dn extends Pn{getTypeName(){return"Style"}}class Mn extends Pn{getTypeName(){return"Script"}}class Ln extends Pn{getTypeName(){return"URL"}}class Fn extends Pn{getTypeName(){return"ResourceURL"}}function Un(t){return t instanceof Pn?t.changingThisBreaksApplicationSecurity:t}function Vn(t,e){const n=qn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function qn(t){return t instanceof Pn&&t.getTypeName()||null}function Bn(t){return new Rn(t)}function Hn(t){return new Dn(t)}function Kn(t){return new Mn(t)}function zn(t){return new Ln(t)}function Wn(t){return new Fn(t)}class Gn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(jn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class $n{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=jn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=jn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Qn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Yn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Xn(t){return(t=String(t)).match(Qn)||t.match(Yn)?t:"unsafe:"+t}function Jn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Zn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const tr=Jn("area,br,col,hr,img,wbr"),er=Jn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),nr=Jn("rp,rt"),rr=Zn(nr,er),ir=Zn(tr,Zn(er,Jn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Zn(nr,Jn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rr),or=Jn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sr=Jn("srcset"),ar=Zn(or,sr,Jn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Jn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ur=Jn("script,style,template");class cr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ir.hasOwnProperty(e))return this.sanitizedSomething=!0,!ur.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!ar.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;or[o]&&(s=Xn(s)),sr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Xn(t.trim())).join(", ")),this.buf.push(" ",e,'="',fr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ir.hasOwnProperty(e)&&!tr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(fr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const lr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hr=/([^\#-~ |!])/g;function fr(t){return t.replace(/&/g,"&amp;").replace(lr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(hr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let dr;function pr(t,e){let n=null;try{dr=dr||function(t){const e=new $n(t);return function(){try{return!!(new window.DOMParser).parseFromString(jn(""),"text/html")}catch(t){return!1}}()?new Gn(e):e}(t);let r=e?String(e):"";n=dr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=dr.getInertBodyElement(r)}while(r!==o);return jn((new cr).sanitizeChildren(gr(n)||n))}finally{if(n){const t=gr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function gr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var mr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function yr(t){const e=function(){const t=Kt();return t&&t[12]}();return e?e.sanitize(mr.URL,t)||"":Vn(t,"URL")?Un(t):Xn(b(t))}function vr(t){return t.ngDebugContext}function br(t){return t.ngOriginalError}function _r(t,...e){t.error(...e)}class wr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||_r}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?vr(t)?vr(t):this._findContext(br(t)):null}_findOriginalError(t){let e=br(t);for(;e&&br(e);)e=br(e);return e}}function Er(t,e){t.__ngContext__=e}const Tr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(B))();function Sr(t){return t instanceof Function?t():t}var Ir=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Or(t,e){return(void 0)(t,e)}function Cr(t){const e=t[3];return pt(e)?e[3]:e}function kr(t){return xr(t[13])}function Ar(t){return xr(t[4])}function xr(t){for(;null!==t&&!pt(t);)t=t[4];return t}function Nr(t,e,n,r,i){if(null!=r){let o,s=!1;pt(r)?o=r:dt(r)&&(s=!0,r=r[0]);const a=Nt(r);0===t&&null!==n?null==i?Ur(e,n,a):Fr(e,n,a,i||null,!0):1===t&&null!==n?Fr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=qr(t,e);r&&function(t,e,n,r){At(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Nt(n)&&Nr(e,t,r,o,i);for(let s=ft;s<n.length;s++){const i=n[s];Qr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function jr(t,e,n){return At(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Pr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,qt(i,-1)),n.splice(r,1)}function Rr(t,e){if(t.length<=ft)return;const n=ft+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Pr(o,r),e>0&&(t[n-1][4]=r[4]);const s=fn(t,ft+e);Qr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Dr(t,e){if(!(256&e[2])){const n=e[11];At(n)&&n.destroyNode&&Qr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Mr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&Mr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&Mr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Mr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Oe)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Nt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&At(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&pt(e[3])){n!==e[3]&&Pr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Lr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return Pt(r,n)}(t,e.parent,n)}function Fr(t,e,n,r,i){At(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Ur(t,e,n){At(t)?t.appendChild(e,n):e.appendChild(n)}function Vr(t,e,n,r,i){null!==r?Fr(t,e,n,r,i):Ur(t,e,n)}function qr(t,e){return At(t)?t.parentNode(e):e.parentNode}function Br(t,e,n){return Hr(t,e,n)}let Hr=function(t,e,n){return 40&t.type?Pt(t,n):null};function Kr(t,e,n,r){const i=Lr(t,r,e),o=e[11],s=Br(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Vr(o,i,n[a],s,!1);else Vr(o,i,n,s,!1)}function zr(t,e){if(null!==e){const n=e.type;if(3&n)return Pt(e,t);if(4&n)return Gr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return zr(t,n);{const n=t[e.index];return pt(n)?Gr(-1,n):Nt(n)}}if(32&n)return Or(e,t)()||Nt(t[e.index]);{const n=Wr(t,e);return null!==n?Array.isArray(n)?n[0]:zr(Cr(t[16]),n):zr(t,e.next)}}return null}function Wr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Gr(t,e){const n=ft+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return zr(t,r)}return e[7]}function $r(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Er(Nt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)$r(t,e,n.child,r,i,o,!1),Nr(e,t,i,a,o);else if(32&u){const s=Or(n,r);let u;for(;u=s();)Nr(e,t,i,u,o);Nr(e,t,i,a,o)}else 16&u?Yr(t,e,r,n,i,o):Nr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Qr(t,e,n,r,i,o){$r(n,r,t.firstChild,e,i,o,!1)}function Yr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Nr(e,t,i,a[u],o);else $r(t,e,a,s[3],i,o,!0)}function Xr(t,e,n){At(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Jr(t,e,n){At(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Zr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const ti="ng-template";function ei(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Zr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ni(t){return 4===t.type&&t.value!==ti}function ri(t,e,n){return e===(4!==t.type||n?t.value:ti)}function ii(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(ke(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!ri(t,u,n)||""===u&&1===e.length){if(oi(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!ei(t.attrs,c,n)){if(oi(r))return!1;s=!0}continue}const l=si(8&r?"class":u,i,ni(t),n);if(-1===l){if(oi(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Zr(e,c,0)||2&r&&c!==t){if(oi(r))return!1;s=!0}}}}else{if(!s&&!oi(r)&&!oi(u))return!1;if(s&&oi(u))continue;s=!1,r=u|1&r}}return oi(r)||s}function oi(t){return 0==(1&t)}function si(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ai(t,e,n=!1){for(let r=0;r<e.length;r++)if(ii(t,e[r],n))return!0;return!1}function ui(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function ci(t,e){return t?":not("+e.trim()+")":e}function li(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||oi(s)||(e+=ci(o,i),i=""),r=s,o=o||!oi(r);n++}return""!==i&&(e+=ci(o,i)),e}const hi={};function fi(t){di(zt(),Kt(),ge()+t,Jt())}function di(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&_e(e,r,n)}else{const r=t.preOrderHooks;null!==r&&we(e,r,0,n)}me(n)}function pi(t,e){return t<<17|e<<2}function gi(t){return t>>17&32767}function mi(t){return 2|t}function yi(t){return(131068&t)>>2}function vi(t,e){return-131069&t|e<<2}function bi(t){return 1|t}function _i(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];se(i),n.contentQueries(2,e[o],o)}}}function wi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Vt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Ei(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=$t(),s=Yt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Bt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Bt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Qt(o,!0),o}function Ti(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Si(t,e,n){ce(e);try{const r=t.viewQuery;null!==r&&to(1,r,n);const i=t.template;null!==i&&Ci(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&_i(t,e),t.staticViewQueries&&to(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Qi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,pe()}}function Ii(t,e,n,r){const i=e[2];if(256==(256&i))return;ce(e);const o=Jt();try{Vt(e),Bt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ci(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&_e(e,n,null)}else{const n=t.preOrderHooks;null!==n&&we(e,n,0,null),Ee(e,0)}if(function(t){for(let e=kr(t);null!==e;e=Ar(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&qt(r,1),n[2]|=1024}}}(e),function(t){for(let e=kr(t);null!==e;e=Ar(e))for(let t=ft;t<e.length;t++){const n=e[t],r=n[1];Ft(n)&&Ii(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&_i(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&_e(e,n)}else{const n=t.contentHooks;null!==n&&we(e,n,1),Ee(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)me(~r);else{const i=r,o=n[++t],s=n[++t];re(o,i),s(2,e[i])}}}finally{me(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Gi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&to(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&_e(e,n)}else{const n=t.viewHooks;null!==n&&we(e,n,2),Ee(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,qt(e[3],-1))}finally{pe()}}function Oi(t,e,n,r){const i=e[10],o=!Jt(),s=Lt(e);try{o&&!s&&i.begin&&i.begin(),s&&Si(t,e,r),Ii(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Ci(t,e,n,r,i){const o=ge(),s=2&r;try{me(-1),s&&e.length>ht&&di(t,e,ht,Jt()),n(r,i)}finally{me(o)}}function ki(t,e,n){if(gt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Ai(t,e,n){Ht()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Fe(n,e),Er(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=vt(r);o&&Hi(e,n,r);const u=Ye(e,t,a,n);Er(u,e),null!==s&&Ki(0,a-i,u,r,0,s),o&&(Dt(n.index,e)[8]=u)}}(t,e,n,Pt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Bt.lFrame.currentDirectiveIndex;try{me(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ie(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Fi(r,i)}}finally{me(-1),ie(s)}}(t,e,n))}function xi(t,e,n=Pt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Ni(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ji(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ji(t,e,n,r,i,o,s,a,u,c){const l=ht+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:hi);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Pi(t,e,n,r){const i=no(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&ro(t).push(r,i.length-1))}function Ri(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Di(t,e,n,r,i,o,s,a){const u=Pt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(oo(t,n,c,r,i),mt(e)&&function(t,e){const n=Dt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,At(o)?o.setProperty(u,r,i):Ae(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Mi(t,e,n,r){let i=!1;if(Ht()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];ai(n,s.selectors,!1)&&(i||(i=[]),Be(Fe(n,e),t,s.type),vt(s)?(Ui(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,qi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Ti(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=xe(n.mergedAttrs,c.hostAttrs),Bi(t,n,e,u,c),Vi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||ni(e)?null:zi(n,i);o.push(c),s=Ri(n,u,s),a=Ri(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new v("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=xe(n.mergedAttrs,n.attrs),i}function Li(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Fi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ui(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Vi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vt(e)&&(n[""]=t)}}function qi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Bi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=bt(i.type)),s=new Oe(o,vt(i),null);t.blueprint[r]=s,n[r]=s,Li(t,e,0,r,Ti(t,n,i.hostVars,hi),i)}function Hi(t,e,n){const r=Pt(e,t),i=Ni(n),o=t[10],s=Yi(t,wi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Ki(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function zi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Wi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Gi(t,e){const n=Dt(e,t);if(Ft(n)){const t=n[1];80&n[2]?Ii(t,n,t.template,n[8]):n[5]>0&&$i(n)}}function $i(t){for(let n=kr(t);null!==n;n=Ar(n))for(let t=ft;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Ii(t,e,t.template,e[8])}else e[5]>0&&$i(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Dt(e[n],t);Ft(r)&&r[5]>0&&$i(r)}}function Qi(t,e){const n=Dt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Si(r,n,n[8])}function Yi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Xi(t){for(;t;){t[2]|=64;const e=Cr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Ji(t,e,n){const r=e[10];r.begin&&r.begin();try{Ii(t,e,t.template,n)}catch(i){throw io(e,i),i}finally{r.end&&r.end()}}function Zi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Mt(n),i=r[1];Oi(i,r,i.template,n)}}(t[8])}function to(t,e,n){se(0),e(t,n)}const eo=(()=>Promise.resolve(null))();function no(t){return t[7]||(t[7]=[])}function ro(t){return t.cleanup||(t.cleanup=[])}function io(t,e){const n=t[9],r=n?n.get(wr,null):null;r&&r.handleError(e)}function oo(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function so(t,e,n){const r=jt(e,t);!function(t,e,n){At(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function ao(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=d(i,t):2==o&&(r=d(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const uo=new sn("INJECTOR",-1);class co{get(t,e=yn){if(e===yn){const e=new Error(`NullInjectorError: No provider for ${f(t)}!`);throw e.name="NullInjectorError",e}return e}}const lo=new sn("Set Injector scope."),ho={},fo={},po=[];let go;function mo(){return void 0===go&&(go=new co),go}function yo(t,e=null,n=null,r){return new vo(t,n,e||mo(),r)}class vo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&ln(e,n=>this.processProvider(n,t,e)),ln([t],t=>this.processInjectorType(t,[],i)),this.records.set(uo,wo(void 0,this));const o=this.records.get(lo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:f(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=yn,n=N.Default){this.assertNotDestroyed();const r=En(this);try{if(!(n&N.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof sn)&&S(t);e=n&&this.injectableDefInScope(n)?wo(bo(t),ho):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&N.Self?mo():this.parent).get(t,e=n&N.Optional&&e===yn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(f(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[bn]&&i.unshift(e[bn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=f(e);if(Array.isArray(e))i=e.map(f).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):f(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(vn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{En(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(f(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=m(t)))return!1;let r=O(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=O(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{ln(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ln(r,t=>this.processProvider(t,n,r||po))}}this.injectorDefTypes.add(o);const a=bt(o)||(()=>new o);this.records.set(o,wo(a,ho));const u=r.providers;if(null!=u&&!s){const e=t;ln(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=To(t=m(t))?t:m(t&&t.provide);const i=function(t,e,n){return Eo(t)?wo(void 0,t.useValue):wo(_o(t),ho)}(t);if(To(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=wo(void 0,ho,!0),e.factory=()=>On(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ho&&(e.value=fo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function bo(t){const e=S(t),n=null!==e?e.factory:bt(t);if(null!==n)return n;if(t instanceof sn)throw new Error(`Token ${f(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=dn(e,"?");throw new Error(`Can't resolve all parameters for ${f(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[C]||t[A]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function _o(t,e,n){let r;if(To(t)){const e=m(t);return bt(e)||bo(e)}if(Eo(t))r=()=>m(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...On(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Sn(m(t.useExisting));else{const e=m(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return bt(e)||bo(e);r=()=>new e(...On(t.deps))}var i;return r}function wo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Eo(t){return null!==t&&"object"==typeof t&&_n in t}function To(t){return"function"==typeof t}const So=function(t,e,n){return function(t,e=null,n=null,r){const i=yo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Io=(()=>{class t{static create(t,e){return Array.isArray(t)?So(t,e,""):So(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=yn,t.NULL=new co,t.\u0275prov=E({token:t,providedIn:"any",factory:()=>Sn(uo)}),t.__NG_ELEMENT_ID__=-1,t})();function Oo(t,e){be(Mt(t)[1],Gt())}function Co(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(vt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ko(t.inputs),e.declaredInputs=ko(t.declaredInputs),e.outputs=ko(t.outputs);const n=i.hostBindings;n&&No(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Ao(t,o),s&&xo(t,s),h(t.inputs,i.inputs),h(t.declaredInputs,i.declaredInputs),h(t.outputs,i.outputs),vt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Co&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xe(i.hostAttrs,n=xe(n,i.hostAttrs))}}(r)}function ko(t){return t===H?{}:t===z?[]:t}function Ao(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function xo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function No(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let jo=null;function Po(){if(!jo){const t=B.Symbol;if(t&&t.iterator)jo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(jo=n)}}}return jo}class Ro{constructor(t){this.wrapped=t}static wrap(t){return new Ro(t)}static unwrap(t){return Ro.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Ro}}function Do(t){return!!Mo(t)&&(Array.isArray(t)||!(t instanceof Map)&&Po()in t)}function Mo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Lo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Fo(t,e,n,r){const i=Kt();return Lo(i,ee(),e)&&(zt(),function(t,e,n,r,i,o){const s=Pt(t,e);!function(t,e,n,r,i,o,s){if(null==o)At(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?b(o):s(o,r||"",i);At(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(ye(),i,t,e,n,r)),Fo}function Uo(t,e,n,r,i,o,s,a){const u=Kt(),c=zt(),l=t+ht,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Ei(e,t,4,s||null,Ut(c,a));Mi(e,n,l,Ut(c,u)),be(e,l);const h=l.tViews=ji(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Qt(h,!1);const f=u[11].createComment("");Kr(c,u,f,h),Er(f,u),Yi(u,u[l]=Wi(f,u,f,h)),yt(h)&&Ai(c,u,h),null!=s&&xi(u,h,a)}function Vo(t,e=N.Default){const n=Kt();return null===n?Sn(t,e):ze(Gt(),n,m(t),e)}function qo(t,e,n){const r=Kt();return Lo(r,ee(),e)&&Di(zt(),ye(),r,t,e,r[11],n,!1),qo}function Bo(t,e,n,r,i){const o=i?"class":"style";oo(t,n,e.inputs[o],o,r)}function Ho(t,e,n,r){const i=Kt(),o=zt(),s=ht+t,a=i[11],u=i[s]=jr(a,e,Bt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Ei(e,t,2,i,Ut(a,o));return Mi(e,n,u,Ut(a,s)),null!==u.attrs&&ao(u,u.attrs,!1),null!==u.mergedAttrs&&ao(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Qt(c,!0);const l=c.mergedAttrs;null!==l&&Ce(a,u,l);const h=c.classes;null!==h&&Jr(a,u,h);const f=c.styles;null!==f&&Xr(a,u,f),64!=(64&c.flags)&&Kr(o,i,u,c),0===Bt.lFrame.elementDepthCount&&Er(u,i),Bt.lFrame.elementDepthCount++,yt(c)&&(Ai(o,i,c),ki(o,c,i)),null!==r&&xi(i,c)}function Ko(){let t=Gt();Yt()?Xt():(t=t.parent,Qt(t,!1));const e=t;Bt.lFrame.elementDepthCount--;const n=zt();n.firstCreatePass&&(be(n,t),gt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Bo(n,e,Kt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Bo(n,e,Kt(),e.stylesWithoutHost,!1)}function zo(t,e,n,r){Ho(t,e,n,r),Ko()}function Wo(t,e,n){const r=Kt(),i=zt(),o=t+ht,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Ut(o,r),a=Ei(e,t,8,"ng-container",s);return null!==s&&ao(a,s,!0),Mi(e,n,a,Ut(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Qt(s,!0);const a=r[o]=r[11].createComment("");Kr(i,r,a,s),Er(a,r),yt(s)&&(Ai(i,r,s),ki(i,s,r)),null!=n&&xi(r,s)}function Go(){let t=Gt();const e=zt();Yt()?Xt():(t=t.parent,Qt(t,!1)),e.firstCreatePass&&(be(e,t),gt(t)&&e.queries.elementEnd(t))}function $o(){return Kt()}function Qo(t){return!!t&&"function"==typeof t.then}function Yo(t){return!!t&&"function"==typeof t.subscribe}const Xo=Yo;function Jo(t,e,n=!1,r){const i=Kt(),o=zt(),s=Gt();return function(t,e,n,r,i,o,s=!1,a){const u=yt(r),c=t.firstCreatePass&&ro(t),l=no(e);let h=!0;if(3&r.type){const f=Pt(r,e),d=a?a(f):H,p=d.target||f,g=l.length,m=a?t=>a(Nt(t[r.index])).target:r.index;if(At(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=ts(r,e,0,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=ts(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}else o=ts(r,e,0,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Jo}function Zo(t,e,n,r){try{return!1!==n(r)}catch(i){return io(t,i),!1}}function ts(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Dt(t.index,e):e;0==(32&e[2])&&Xi(s);let a=Zo(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Zo(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function es(t=1){return function(t){return(Bt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Bt.lFrame.contextLView))[8]}(t)}function ns(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?ai(t,o,!0):ui(r,o))return i}else n=i}return n}function rs(t){const e=Kt()[16][6];if(!e.projection){const n=e.projection=dn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?ns(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function is(t,e=0,n){const r=Kt(),i=zt(),o=Ei(i,ht+t,16,null,n||null);null===o.projection&&(o.projection=e),Xt(),64!=(64&o.flags)&&function(t,e,n){Yr(e[11],0,e,n,Lr(t,n,e),Br(n.parent||e[6],n,e))}(i,r,o)}function os(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?gi(o):yi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];ss(t[a],e)&&(u=!0,t[a+1]=r?bi(n):mi(n)),a=r?gi(n):yi(n)}u&&(t[n+1]=r?mi(o):bi(o))}function ss(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&mn(t,e)>=0}function as(t,e,n){return cs(t,e,n,!1),as}function us(t,e){return cs(t,e,null,!0),us}function cs(t,e,n,r){const i=Kt(),o=zt(),s=ne(2);o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ge()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(t.flags&(e?16:32))})(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Bt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=hs(n=ls(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=ls(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==yi(r))return t[gi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=ls(null,t,e,n[1],r),n=hs(n,e.attrs,r),function(t,e,n,r){t[gi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=hs(r,t[o].hostAttrs,n);return hs(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=gi(s),u=yi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||mn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=gi(t[a+1]);t[r+1]=pi(e,a),0!==e&&(t[e+1]=vi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=pi(a,0),0!==a&&(t[a+1]=vi(t[a+1],r)),a=r;else t[r+1]=pi(u,0),0===a?a=r:t[u+1]=vi(t[u+1],r),u=r;l&&(t[r+1]=mi(t[r+1])),os(t,c,r,!0),os(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&mn(o,e)>=0&&(n[r+1]=bi(n[r+1]))}(e,c,t,r,o),s=pi(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==hi&&Lo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];ds(1==(1&c)?fs(u,e,n,i,yi(c),s):void 0)||(ds(o)||function(t){return 2==(2&t)}(c)&&(o=fs(u,null,n,i,a,s)),function(t,e,n,r,i){const o=At(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Ir.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Ir.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,jt(ge(),n),i,o))}(o,o.data[ge()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=f(Un(t)))),t}(e,n),r,s)}function ls(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=hs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function hs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),pn(t,s,!!n||e[++o]))}return void 0===t?null:t}function fs(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===hi&&(l=c?K:void 0);let h=c?gn(l,r):u===r?l:void 0;if(o&&!ds(h)&&(h=gn(e,r)),ds(h)&&(a=h,s))return a;const f=t[i+1];i=s?gi(f):yi(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=gn(t,r))}return a}function ds(t){return void 0!==t}function ps(t,e=""){const n=Kt(),r=zt(),i=t+ht,o=r.firstCreatePass?Ei(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return At(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Kr(r,n,s,o),Qt(o,!1)}function gs(t){return ms("",t,""),gs}function ms(t,e,n){const r=Kt(),i=function(t,e,n,r){return Lo(t,ee(),n)?e+b(n)+r:hi}(r,t,e,n);return i!==hi&&so(r,ge(),i),ms}function ys(t,e,n,r,i){const o=Kt(),s=function(t,e,n,r,i,o){const s=function(t,e,n,r){const i=Lo(t,e,n);return Lo(t,e+1,r)||i}(t,te(),n,i);return ne(2),s?e+b(n)+r+b(i)+o:hi}(o,t,e,n,r,i);return s!==hi&&so(o,ge(),s),ys}function vs(t,e,n){const r=Kt();return Lo(r,ee(),e)&&Di(zt(),ye(),r,t,e,r[11],n,!0),vs}const bs=void 0;var _s=["en",[["a","p"],["AM","PM"],bs],[["AM","PM"],bs,bs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bs,"{1} 'at' {0}",bs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ws={};function Es(t,e,n){"string"!=typeof e&&(n=e,e=t[Cs.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ws[e]=t,n&&(ws[e][Cs.ExtraData]=n)}function Ts(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Os(e);if(n)return n;const r=e.split("-")[0];if(n=Os(r),n)return n;if("en"===r)return _s;throw new Error(`Missing locale data for the locale "${t}".`)}function Ss(t){return Ts(t)[Cs.CurrencyCode]||null}function Is(t){return Ts(t)[Cs.PluralCase]}function Os(t){return t in ws||(ws[t]=B.ng&&B.ng.common&&B.ng.common.locales&&B.ng.common.locales[t]),ws[t]}var Cs=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ks="en-US";let As=ks;function xs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(As=t.toLowerCase().replace(/_/g,"-"))}function Ns(t,e,n,r,i){if(t=m(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ns(t[o],e,n,r,i);else{const o=zt(),s=Kt();let a=To(t)?t:m(t.provide),u=_o(t);const c=Gt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(To(t)||!t.multi){const r=new Oe(u,i,Vo),d=Rs(a,e,i?l:l+f,h);-1===d?(Be(Fe(c,s),o,a),js(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=Rs(a,e,l+f,h),p=Rs(a,e,l,l+f),g=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!g){Be(Fe(c,s),o,a);const l=function(t,e,n,r,i){const o=new Oe(t,n,Vo);return o.multi=[],o.index=e,o.componentProviders=0,Ps(o,i,r&&!n),o}(i?Ms:Ds,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),js(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else js(o,t,d>-1?d:p,Ps(n[i?p:d],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function js(t,e,n,r){const i=To(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Ps(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Rs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Ds(t,e,n,r){return Ls(this.multi,[])}function Ms(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ye(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Ls(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Ls(i,o);return o}function Ls(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Fs(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=zt();if(r.firstCreatePass){const i=vt(t);Ns(n,r.data,r.blueprint,i,!0),Ns(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Us{}class Vs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${f(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let qs=(()=>{class t{}return t.NULL=new Vs,t})();function Bs(...t){}function Hs(t,e){return new zs(Pt(t,e))}const Ks=function(){return Hs(Gt(),Kt())};let zs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Ks,t})();function Ws(t){return t instanceof zs?t.nativeElement:t}class Gs{}let $s=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Qs(),t})();const Qs=function(){const t=Kt(),e=Dt(Gt().index,t);return function(t){return t[11]}(dt(e)?e:t)};let Ys=(()=>{class t{}return t.\u0275prov=E({token:t,providedIn:"root",factory:()=>null}),t})();class Xs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Js=new Xs("11.2.14");class Zs{constructor(){}supports(t){return Do(t)}create(t){return new ea(t)}}const ta=(t,e)=>e;class ea{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ta}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<oa(n,r,i)?e:n,s=oa(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Do(t))throw new Error(`Error trying to diff '${f(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Po()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new na(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ia),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ia),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class na{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ra{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ia{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new ra,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function oa(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class sa{constructor(){}supports(t){return t instanceof Map||Mo(t)}create(){return new aa}}class aa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Mo(t)))throw new Error(`Error trying to diff '${f(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ua(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class ua{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ca(){return new la([new Zs])}let la=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ca()),deps:[[t,new xn,new An]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=E({token:t,providedIn:"root",factory:ca}),t})();function ha(){return new fa([new sa])}let fa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ha()),deps:[[t,new xn,new An]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=E({token:t,providedIn:"root",factory:ha}),t})();function da(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Nt(o)),pt(o))for(let t=ft;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&da(e[1],e,n,r)}const s=n.type;if(8&s)da(t,e,n.child,r);else if(32&s){const t=Or(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Wr(e,n);if(Array.isArray(t))r.push(...t);else{const n=Cr(e[16]);da(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class pa{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return da(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(pt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Rr(t,n),fn(e,n))}this._attachedToViewContainer=!1}Dr(this._lView[1],this._lView)}onDestroy(t){Pi(this._lView[1],this._lView,null,t)}markForCheck(){Xi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ji(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Zt(!0);try{Ji(t,e,n)}finally{Zt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Qr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ga extends pa{constructor(t){super(t),this._view=t}detectChanges(){Zi(this._view)}checkNoChanges(){!function(t){Zt(!0);try{Zi(t)}finally{Zt(!1)}}(this._view)}get context(){return null}}const ma=va;let ya=(()=>{class t{}return t.__NG_ELEMENT_ID__=ma,t.__ChangeDetectorRef__=!0,t})();function va(t=!1){return function(t,e,n){if(!n&&mt(t)){const n=Dt(t.index,e);return new pa(n,n)}return 47&t.type?new pa(e[16],e):null}(Gt(),Kt(),t)}const ba=[new sa],_a=new la([new Zs]),wa=new fa(ba),Ea=function(){return Oa(Gt(),Kt())};let Ta=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ea,t})();const Sa=Ta,Ia=class extends Sa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=wi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Si(e,n,t),new pa(n)}};function Oa(t,e){return 4&t.type?new Ia(e,t,Hs(t,e)):null}class Ca{}class ka{}const Aa=function(){return Da(Gt(),Kt())};let xa=(()=>{class t{}return t.__NG_ELEMENT_ID__=Aa,t})();const Na=xa,ja=class extends Na{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Hs(this._hostTNode,this._hostLView)}get injector(){return new Ze(this._hostTNode,this._hostLView)}get parentInjector(){const t=qe(this._hostTNode,this._hostLView);if(je(t)){const e=Re(t,this._hostLView),n=Pe(t);return new Ze(e[1].data[n+8],e)}return new Ze(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Pa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ft}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Ca,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(pt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ja(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ft+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ft?(e[4]=n[i],hn(n,ft+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Gr(i,o),a=n[11],u=qr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Qr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),hn(Ra(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Pa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Rr(this._lContainer,e);n&&(fn(Ra(this._lContainer),e),Dr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Rr(this._lContainer,e);return n&&null!=fn(Ra(this._lContainer),e)?new pa(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Pa(t){return t[8]}function Ra(t){return t[8]||(t[8]=[])}function Da(t,e){let n;const r=e[t.index];if(pt(r))n=r;else{let i;if(8&t.type)i=Nt(r);else{const n=e[11];i=n.createComment("");const r=Pt(t,e);Fr(n,qr(n,r),i,function(t,e){return At(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Wi(r,e,i,t),Yi(e,n)}return new ja(n,t,e)}const Ma={};class La extends qs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ct(t);return new Va(e,this.ngModule)}}function Fa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ua=new sn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Tr});class Va extends Us{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(li).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Fa(this.componentDef.inputs)}get outputs(){return Fa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ma,i);return o!==Ma||r===Ma?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Gs,xt),s=i.get(Ys,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(At(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):jr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?Ot:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Tr,clean:eo,playerHandler:null,flags:0},f=ji(0,null,null,1,0,null,null,null,null,null),d=wi(null,f,h,l,null,null,o,a,s,i);let p,g;ce(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Ei(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(ao(a,u,!0),null!==t&&(Ce(i,t,u),null!==a.classes&&Jr(i,t,a.classes),null!==a.styles&&Xr(i,t,a.styles)));const c=r.createRenderer(t,e),l=wi(n,Ni(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Be(Fe(a,n),s,e.type),Ui(s,a),qi(a,n.length,1)),Yi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Ce(a,c,["ng-version",Js.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!oi(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ce(a,c,t),e&&e.length>0&&Jr(a,c,e.join(" "))}if(g=Rt(f,ht),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Gt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Bi(t,r,e,Ti(t,e,1,null),n));const i=Ye(e,t,r.directiveStart,r);Er(i,e);const o=Pt(r,e);return o&&Er(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Gt();e.contentQueries(1,s,t.directiveStart)}const a=Gt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(me(a.index),Li(n[1],a,0,a.directiveStart,a.directiveEnd,e),Fi(e,s)),s}(t,this.componentDef,d,h,[Oo]),Si(f,d,null)}finally{pe()}return new qa(this.componentType,p,Hs(g,d),d,g)}}class qa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new ga(r),this.componentType=t}get injector(){return new Ze(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ba=new Map;class Ha extends Ca{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new La(this);const n=lt(t),r=t[Y]||null;r&&xs(r),this._bootstrapComponents=Sr(n.bootstrap),this._r3Injector=yo(t,e,[{provide:Ca,useValue:this},{provide:qs,useValue:this.componentFactoryResolver}],f(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Io.THROW_IF_NOT_FOUND,n=N.Default){return t===Io||t===Ca||t===uo?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ka extends ka{constructor(t){super(),this.moduleType=t,null!==lt(t)&&function(t){const e=new Set;!function t(n){const r=lt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${f(e)} vs ${f(e.name)}`)}(i,Ba.get(i),n),Ba.set(i,n));const o=Sr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Ha(this.moduleType,t)}}function za(t,e){const n=zt();let r;const i=t+ht;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new v("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=bt(r.type)),s=P(Vo);try{const t=Me(!1),e=o();return Me(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Kt(),i,e),e}finally{P(s)}}function Wa(t,e,n){const r=t+ht,i=Kt(),o=function(t,e){return t[e]}(i,r);return function(t,e){return Ro.isWrapped(e)&&(e=Ro.unwrap(e),t[te()]=hi),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?function(t,e,n,r,i,o){const s=e+n;return Lo(t,s,i)?function(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===hi?void 0:n}(t,s+1)}(i,function(){const t=Bt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,o):o.transform(n))}function Ga(t){return e=>{setTimeout(t,void 0,e)}}const $a=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=Ga(u),a&&(a=Ga(a)),c&&(c=Ga(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.a&&t.add(l),l}};function Qa(){return this._results[Po()]()}class Ya{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Po(),n=Ya.prototype;n[e]||(n[e]=Qa)}get changes(){return this._changes||(this._changes=new $a)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=cn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Xa{constructor(t){this.queryList=t,this.matches=null}clone(){return new Xa(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ja{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ja(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==fu(t,e).matches&&this.queries[e].setDirty()}}class Za{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class tu{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new tu(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class eu{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new eu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,nu(e,i)),this.matchTNodeWithReadOption(t,e,Qe(e,t,i,!1,!1))}else n===Ta?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Qe(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===zs||r===xa||r===Ta&&4&e.type)this.addMatch(e.index,-2);else{const n=Qe(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function nu(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function ru(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Hs(t,e):4&t.type?Oa(t,e):null}(e,t):-2===n?function(t,e,n){return n===zs?Hs(e,t):n===Ta?Oa(e,t):n===xa?Da(e,t):void 0}(t,e,r):Ye(t,t[1],n,e)}function iu(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:ru(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function ou(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=iu(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ft;t<s.length;t++){const e=s[t];e[17]===e[3]&&ou(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];ou(n[1],n,i,r)}}}}}return r}function su(t){const e=Kt(),n=zt(),r=oe();se(r+1);const i=fu(n,r);if(t.dirty&&Lt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?ou(n,e,r,[]):iu(n,e,i,r);t.reset(o,Ws),t.notifyOnChanges()}return!0}return!1}function au(t,e,n){const r=zt();r.firstCreatePass&&(hu(r,new Za(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),lu(r,Kt(),e)}function uu(t,e,n,r){const i=zt();if(i.firstCreatePass){const o=Gt();hu(i,new Za(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}lu(i,Kt(),n)}function cu(){return t=Kt(),e=oe(),t[19].queries[e].queryList;var t,e}function lu(t,e,n){const r=new Ya(4==(4&n));Pi(t,e,r,r.destroy),null===e[19]&&(e[19]=new Ja),e[19].queries.push(new Xa(r))}function hu(t,e,n){null===t.queries&&(t.queries=new tu),t.queries.track(new eu(e,n))}function fu(t,e){return t.queries.getByIndex(e)}function du(t,e){return Oa(t,e)}function pu(t=N.Default){const e=va(!0);if(null!=e||t&N.Optional)return e;w("ChangeDetectorRef")}const gu=new sn("Application Initializer");let mu=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Bs,this.reject=Bs,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Qo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Sn(gu,8))},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();const yu=new sn("AppId"),vu={provide:yu,useFactory:function(){return`${bu()}${bu()}${bu()}`},deps:[]};function bu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _u=new sn("Platform Initializer"),wu=new sn("Platform ID"),Eu=new sn("appBootstrapListener");let Tu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();const Su=new sn("LocaleId"),Iu=new sn("DefaultCurrencyCode");class Ou{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Cu=function(t){return new Ka(t)},ku=Cu,Au=function(t){return Promise.resolve(Cu(t))},xu=function(t){const e=Cu(t),n=Sr(lt(t).declarations).reduce((t,e)=>{const n=ct(e);return n&&t.push(new Va(n)),t},[]);return new Ou(e,n)},Nu=xu,ju=function(t){return Promise.resolve(xu(t))};let Pu=(()=>{class t{constructor(){this.compileModuleSync=ku,this.compileModuleAsync=Au,this.compileModuleAndAllComponentsSync=Nu,this.compileModuleAndAllComponentsAsync=ju}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();const Ru=(()=>Promise.resolve(0))();function Du(t){"undefined"==typeof Zone?Ru.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Mu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $a(!1),this.onMicrotaskEmpty=new $a(!1),this.onStable=new $a(!1),this.onError=new $a(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=B.requestAnimationFrame,e=B.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(B,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Uu(t),Fu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Uu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Vu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),qu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Vu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),qu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Uu(t),Fu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Mu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Lu,Bs,Bs);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Lu={};function Fu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Uu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Vu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function qu(t){t._nesting--,Fu(t)}class Bu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $a,this.onMicrotaskEmpty=new $a,this.onStable=new $a,this.onError=new $a}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Hu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mu.assertNotInAngularZone(),Du(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Du(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Sn(Mu))},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})(),Ku=(()=>{class t{constructor(){this._applications=new Map,$u.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return $u.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();class zu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Wu(t){$u=t}let Gu,$u=new zu,Qu=!0,Yu=!1;function Xu(){return Yu=!0,Qu}function Ju(){if(Yu)throw new Error("Cannot enable prod mode after platform setup.");Qu=!1}const Zu=new sn("AllowMultipleToken");class tc{constructor(t,e){this.name=t,this.token=e}}function ec(t,e,n=[]){const r=`Platform: ${e}`,i=new sn(r);return(e=[])=>{let o=nc();if(!o||o.injector.get(Zu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:lo,useValue:"platform"});!function(t){if(Gu&&!Gu.destroyed&&!Gu.injector.get(Zu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Gu=t.get(rc);const e=t.get(_u,null);e&&e.forEach(t=>t())}(Io.create({providers:t,name:r}))}return function(t){const e=nc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function nc(){return Gu&&!Gu.destroyed?Gu:null}let rc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Bu:("zone.js"===t?void 0:t)||new Mu({enableLongStackTrace:Xu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Mu,useValue:n}];return n.run(()=>{const e=Io.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(wr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{sc(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Qo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(mu);return t.runInitializers(),t.donePromise.then(()=>(xs(i.injector.get(Su,ks)||ks),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=ic({},e);return function(t,e,n){const r=new Ka(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(oc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${f(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Sn(Io))},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();function ic(t,e){return Array.isArray(e)?e.reduce(ic,t):Object.assign(Object.assign({},t),e)}let oc=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Mu.assertNotInAngularZone(),Du(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Mu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(l,h.pipe(t=>{return Object(u.a)()((e=c,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.b);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Us?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ca),i=n.create(Io.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Hu,null),a=s&&i.injector.get(Ku);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),sc(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;sc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Eu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Sn(Mu),Sn(Io),Sn(wr),Sn(qs),Sn(mu))},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();function sc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class ac{}class uc{}const cc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let lc=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||cc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>hc(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>hc(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Sn(Pu),Sn(uc,8))},t.\u0275prov=E({token:t,factory:t.\u0275fac}),t})();function hc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const fc=function(t){return null},dc=ec(null,"core",[{provide:wu,useValue:"unknown"},{provide:rc,deps:[Io]},{provide:Ku,deps:[]},{provide:Tu,deps:[]}]),pc=[{provide:oc,useClass:oc,deps:[Mu,Io,wr,qs,mu]},{provide:Ua,deps:[Mu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:mu,useClass:mu,deps:[[new An,gu]]},{provide:Pu,useClass:Pu,deps:[]},vu,{provide:la,useFactory:function(){return _a},deps:[]},{provide:fa,useFactory:function(){return wa},deps:[]},{provide:Su,useFactory:function(t){return xs(t=t||"undefined"!=typeof $localize&&$localize.locale||ks),t},deps:[[new kn(Su),new An,new xn]]},{provide:Iu,useValue:"USD"}];let gc=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Sn(oc))},t.\u0275mod=it({type:t}),t.\u0275inj=T({providers:pc}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return l}),n.d(e,"__generator",function(){return h}),n.d(e,"__createBinding",function(){return f}),n.d(e,"__exportStar",function(){return d}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return g}),n.d(e,"__spread",function(){return m}),n.d(e,"__spreadArrays",function(){return y}),n.d(e,"__spreadArray",function(){return v}),n.d(e,"__await",function(){return b}),n.d(e,"__asyncGenerator",function(){return _}),n.d(e,"__asyncDelegator",function(){return w}),n.d(e,"__asyncValues",function(){return E}),n.d(e,"__makeTemplateObject",function(){return T}),n.d(e,"__importStar",function(){return I}),n.d(e,"__importDefault",function(){return O}),n.d(e,"__classPrivateFieldGet",function(){return C}),n.d(e,"__classPrivateFieldSet",function(){return k});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var f=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function d(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||f(e,t,n)}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function v(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function _(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{(n=i[t](e)).value instanceof b?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:b(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function E(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function T(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var S=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function I(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&f(e,t,n);return S(e,t),e}function O(t){return t&&t.__esModule?t:{default:t}}function C(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function k(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},nbvr:function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function r(t,e,r){var i,o=new Promise(function(o,s){n(i=t[e].apply(t,r)).then(o,s)});return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then(function(t){if(t)return new l(t,i.request)})}function o(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function s(t,e,n,i){i.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})})}function a(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function u(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})})}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function d(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function p(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then(function(t){if(t)return new l(t,e._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[h,c].forEach(function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[c,h].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)})})})}),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new d(o.result,t.oldVersion,o.transaction))}),i.then(function(t){return new p(t)})},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.r(e),n.d(e,"LogLevel",function(){return s}),n.d(e,"Logger",function(){return h}),n.d(e,"setLogLevel",function(){return f}),n.d(e,"setUserLogHandler",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.r(e),n.d(e,"CONSTANTS",function(){return i}),n.d(e,"Deferred",function(){return d}),n.d(e,"ErrorFactory",function(){return N}),n.d(e,"FirebaseError",function(){return x}),n.d(e,"MAX_VALUE_MILLIS",function(){return st}),n.d(e,"RANDOM_FACTOR",function(){return at}),n.d(e,"Sha1",function(){return $}),n.d(e,"areCookiesEnabled",function(){return k}),n.d(e,"assert",function(){return o}),n.d(e,"assertionError",function(){return s}),n.d(e,"async",function(){return X}),n.d(e,"base64",function(){return u}),n.d(e,"base64Decode",function(){return l}),n.d(e,"base64Encode",function(){return c}),n.d(e,"calculateBackoffMillis",function(){return ut}),n.d(e,"contains",function(){return q}),n.d(e,"createMockUserToken",function(){return p}),n.d(e,"createSubscribe",function(){return Q}),n.d(e,"decode",function(){return M}),n.d(e,"deepCopy",function(){return h}),n.d(e,"deepExtend",function(){return f}),n.d(e,"errorPrefix",function(){return tt}),n.d(e,"extractQuerystring",function(){return G}),n.d(e,"getGlobal",function(){return A}),n.d(e,"getModularInstance",function(){return lt}),n.d(e,"getUA",function(){return g}),n.d(e,"isAdmin",function(){return V}),n.d(e,"isBrowser",function(){return v}),n.d(e,"isBrowserExtension",function(){return b}),n.d(e,"isElectron",function(){return w}),n.d(e,"isEmpty",function(){return H}),n.d(e,"isIE",function(){return E}),n.d(e,"isIndexedDBAvailable",function(){return O}),n.d(e,"isMobileCordova",function(){return m}),n.d(e,"isNode",function(){return y}),n.d(e,"isNodeSdk",function(){return S}),n.d(e,"isReactNative",function(){return _}),n.d(e,"isSafari",function(){return I}),n.d(e,"isUWP",function(){return T}),n.d(e,"isValidFormat",function(){return U}),n.d(e,"isValidTimestamp",function(){return L}),n.d(e,"issuedAtTime",function(){return F}),n.d(e,"jsonEval",function(){return R}),n.d(e,"map",function(){return K}),n.d(e,"ordinal",function(){return ct}),n.d(e,"querystring",function(){return z}),n.d(e,"querystringDecode",function(){return W}),n.d(e,"safeGet",function(){return B}),n.d(e,"stringLength",function(){return ot}),n.d(e,"stringToByteArray",function(){return it}),n.d(e,"stringify",function(){return D}),n.d(e,"validateArgCount",function(){return Z}),n.d(e,"validateCallback",function(){return nt}),n.d(e,"validateContextObject",function(){return rt}),n.d(e,"validateIndexedDBOpenable",function(){return C}),n.d(e,"validateNamespace",function(){return et});var r=n("mrSG"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){var e=a(t);return u.encodeByteArray(e,!0)},l=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(t){return f(void 0,t)}function f(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=f(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function p(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Object(r.__assign)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[u.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),u.encodeString(JSON.stringify(s),!1),""].join(".")}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function y(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function v(){return"object"==typeof self&&self.self===self}function b(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return g().indexOf("Electron/")>=0}function E(){var t=g();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function T(){return g().indexOf("MSAppHost/")>=0}function S(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function I(){return!y()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function O(){return"indexedDB"in self&&null!=indexedDB}function C(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function k(){return!(!navigator||!navigator.cookieEnabled)}function A(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}var x=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,N.prototype.create),o}return Object(r.__extends)(e,t),e}(Error),N=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?j(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new x(i,a,r);return u},t}();function j(t,e){return t.replace(P,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var P=/\{\$([^}]+)}/g;function R(t){return JSON.parse(t)}function D(t){return JSON.stringify(t)}var M=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=R(l(o[0])||""),n=R(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},L=function(t){var e=M(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},F=function(t){var e=M(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},U=function(t){var e=M(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},V=function(t){var e=M(t).claims;return"object"==typeof e&&!0===e.admin};function q(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function B(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function H(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function K(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function z(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}function W(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("="),r=n[1];e[decodeURIComponent(n[0])]=decodeURIComponent(r)}}),e}function G(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var $=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function Q(t,e){var n=new Y(t,e);return n.subscribe.bind(n)}var Y=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=J),void 0===r.error&&(r.error=J),void 0===r.complete&&(r.complete=J);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function X(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}function J(){}var Z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function tt(t,e){return t+" failed: "+e+" argument "}function et(t,e,n){if((!n||e)&&"string"!=typeof e)throw new Error(tt(t,"namespace")+"must be a valid firebase namespace.")}function nt(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(tt(t,e)+"must be a valid function.")}function rt(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(tt(t,e)+"must be a valid context object.")}var it=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},ot=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},st=144e5,at=.5;function ut(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(at*r*(Math.random()-.5)*2);return Math.min(st,r+i)}function ct(t){return Number.isFinite(t)?t+function(t){var e=(t=Math.abs(t))%100;if(e>=10&&e<=20)return"th";var n=t%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}(t):""+t}function lt(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return O}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return S}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return E});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),_=new u.Q("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&T("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{T("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},T=(t,...e)=>{Object(u.W)()&&"undefined"!=typeof console&&console[t](...e)};function S(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&T("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const I={provide:class{},useFactory:w,deps:[v,u.A,[new u.B,b]]};let O=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.P.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Vb(u.C))},t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({providers:[I]}),t})()}).call(this,n("3UD+")(t))},t6oF:function(t,e,n){"use strict";var r=n("zIRd");(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function i(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Qa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=o(t),s=r.next();!s.done;s=r.next())i(s.value).Qa(e,n)})},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e(function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Qa(o(s.length-1),e),r=n.next()}while(!r.done)})},e});var s=s||{},a=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function h(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==f(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++v)}var y="closure_uid_"+(1e9*Math.random()>>>0),v=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function _(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:_).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function S(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function O(t,e,n){this.code=A+t,this.message=e||x[t]||"",this.a=n||null}function C(t){var e=t&&t.code;return e?new O(e.substring(A.length),t.message,t.serverResponse):null}S(O,Error),O.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},O.prototype.toJSON=function(){return this.w()};var k,A="auth/",x={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function j(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function P(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function R(t){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function M(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function L(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function F(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function U(){this.b=this.a=null}k=j("__EID__")?"__EID__":void 0,S(R,Error),R.prototype.name="CustomError",S(D,R),D.prototype.name="AssertionError",L.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new L(function(){return new B},function(t){t.reset()});function q(){var t=ve,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}U.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var H=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},K=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function $(t,e){return 0<=H(t,e)}function Q(t,e){var n;return(n=0<=(e=H(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function X(t){return Array.prototype.concat.apply([],arguments)}function J(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,ot=/'/g,st=/\x00/g,at=/[\x00&<>"']/;function ut(t,e){return-1!=t.indexOf(e)}function ct(t,e){return t<e?-1:t>e?1:0}t:{var lt=a.navigator;if(lt){var ht=lt.userAgent;if(ht){Z=ht;break t}}Z=""}function ft(t){return ut(Z,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function pt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function bt(t,e){this.a=t===Tt&&e||"",this.b=Et}function _t(t){return t instanceof bt&&t.constructor===bt&&t.b===Et?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}bt.prototype.sa=!0,bt.prototype.ra=function(){return this.a},bt.prototype.toString=function(){return"Const{"+this.a+"}"};var wt,Et={},Tt={};function St(){if(void 0===wt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(n){a.console&&a.console.error(n.message)}wt=t}else wt=t}return wt}function It(t,e){this.a=e===xt?t:""}function Ot(t){return t instanceof It&&t.constructor===It?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function Ct(t,e){var n=_t(t);if(!At.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=St();return new It(t=e?e.createScriptURL(t):t,xt)}(t=n.replace(kt,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof bt?_t(t):encodeURIComponent(String(t))}))}It.prototype.sa=!0,It.prototype.ra=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var kt=/%{(\w+)}/g,At=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,xt={};function Nt(t,e){this.a=e===Ft?t:""}function jt(t){return t instanceof Nt&&t.constructor===Nt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Nt.prototype.sa=!0,Nt.prototype.ra=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Pt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Rt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Dt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Mt(t){if(t instanceof Nt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t))t=new Nt(t,Ft);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Rt);t=e&&Pt.test(e[1])?new Nt(t,Ft):null}return t}function Lt(t){return t instanceof Nt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t)||(t="about:invalid#zClosurez"),new Nt(t,Ft))}var Ft={},Ut=new Nt("about:invalid#zClosurez",Ft);function Vt(t,e,n){this.a=n===qt?t:""}Vt.prototype.sa=!0,Vt.prototype.ra=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var qt={};function Bt(t,e,n,r){return t=t instanceof Nt?t:Lt(t),e=e||a,n=n instanceof bt?_t(n):n||"",e.open(jt(t),n,r,void 0)}function Ht(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Kt(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ot,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=h;var Wt,Gt,$t=ft("Opera"),Qt=ft("Trident")||ft("MSIE"),Yt=ft("Edge"),Xt=Yt||Qt,Jt=ft("Gecko")&&!(ut(Z.toLowerCase(),"webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),Zt=ut(Z.toLowerCase(),"webkit")&&!ft("Edge");function te(){var t=a.document;return t?t.documentMode:void 0}t:{var ee="",ne=(Gt=Z,Jt?/rv:([^\);]+)(\)|;)/.exec(Gt):Yt?/Edge\/([\d\.]+)/.exec(Gt):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gt):Zt?/WebKit\/(\S+)/.exec(Gt):$t?/(?:Version)[ \/]?(\S+)/.exec(Gt):void 0);if(ne&&(ee=ne?ne[1]:""),Qt){var re=te();if(null!=re&&re>parseFloat(ee)){Wt=String(re);break t}}Wt=ee}var ie={};function oe(t){return function(t,e){var n=ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=tt(String(Wt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ct(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ct(0==s[2].length,0==a[2].length)||ct(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var se=a.document&&Qt&&(te()||parseInt(Wt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Gt){}var ae=!Qt||9<=Number(se);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){dt(e,function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:fe.hasOwnProperty(n)?t.setAttribute(fe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var le,he,fe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function de(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}K(s?J(o):o,r)}}}function pe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){a.setTimeout(function(){throw t},0)}function me(t,e){he||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);he=function(){t.then(be)}}else he=function(){var t=be;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!ft("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(le||(le=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ft("Presto")&&(t=function(){var t=pe(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=w(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ft("Trident")&&!ft("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),le(t)):a.setImmediate(t)}}(),ye||(he(),ye=!0),ve.add(t,e)}var ye=!1,ve=new U;function be(){for(var t;t=q();){try{t.a.call(t.b)}catch(e){ge(e)}F(V,t)}ye=!1}function _e(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,function(t){Re(n,Ee,t)},function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Re(n,Te,t)})}catch(r){Re(this,Te,r)}}var we=0,Ee=2,Te=3;function Se(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Se.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ie=new L(function(){return new Se},function(t){t.reset()});function Oe(t,e,n){var r=Ie.get();return r.g=t,r.b=e,r.f=n,r}function Ce(t){if(t instanceof _e)return t;var e=new _e(h);return Re(e,Ee,t),e}function ke(t){return new _e(function(e,n){n(t)})}function Ae(t,e,n){De(t,e,n,null)||me(E(e,t))}function xe(t){return new _e(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ae(t[o],E(i,o,!0),E(i,o,!1));else e(r)})}function Ne(t,e){if(t.a==we)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==we&&1==r?Ne(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Le(n),Fe(n,i,Te,e)))}t.c=null}else Re(t,Te,e)}function je(t,e){t.b||t.a!=Ee&&t.a!=Te||Me(t),t.f?t.f.next=e:t.b=e,t.f=e}function Pe(t,e,n,r){var i=Oe(null,null,null);return i.a=new _e(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(s){o(s)}}:o}),i.a.c=t,je(t,i),i.a}function Re(t,e,n){t.a==we&&(t===n&&(e=Te,n=new TypeError("Promise cannot resolve to itself")),t.a=1,De(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Me(t),e!=Te||n instanceof qe||function(t,e){t.g=!0,me(function(){t.g&&Ve.call(null,e)})}(t,n)))}function De(t,e,n,r){if(t instanceof _e)return je(t,Oe(e||h,n||null,r)),!0;if(P(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Me(t){t.h||(t.h=!0,me(t.gc,t))}function Le(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Te&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,r);else try{e.c?e.g.call(e.f):Ue(e,n,r)}catch(i){Ve.call(null,i)}F(Ie,e)}function Ue(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}_e.prototype.then=function(t,e,n){return Pe(this,p(t)?t:null,p(e)?e:null,n)},_e.prototype.$goog_Thenable=!0,(t=_e.prototype).oa=function(t,e){return(t=Oe(t,t,e)).c=!0,je(this,t),this},t.o=function(t,e){return Pe(this,null,t,e)},t.cancel=function(t){if(this.a==we){var e=new qe(t);me(function(){Ne(this,e)},this)}},t.$c=function(t){this.a=we,Re(this,Ee,t)},t.ad=function(t){this.a=we,Re(this,Te,t)},t.gc=function(){for(var t;t=Le(this);)Fe(this,t,this.a,this.i);this.h=!1};var Ve=ge;function qe(t){R.call(this,t)}function Be(){0!=He&&(Ke[m(this)]=this),this.xa=this.xa,this.pa=this.pa}S(qe,R),qe.prototype.name="cancel";var He=0,Ke={};function ze(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=He)){var e=m(t);if(0!=He&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ke[e]}}Be.prototype.xa=!1,Be.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var We=Object.freeze||function(t){return t},Ge=!Qt||9<=Number(se),$e=Qt&&!oe("9"),Qe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(n){}return t}();function Ye(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if(Ye.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Jt){t:{try{zt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Je[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ye.prototype.preventDefault=function(){this.defaultPrevented=!0},S(Xe,Ye);var Je=We({2:"touch",3:"pen",4:"mouse"});Xe.prototype.preventDefault=function(){Xe.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,$e)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Xe.prototype.g=function(){return this.a};var Ze="closure_listenable_"+(1e6*Math.random()|0),tn=0;function en(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++tn,this.va=this.Pa=!1}function nn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function rn(t){this.src=t,this.a={},this.b=0}function on(t,e){var n=e.type;n in t.a&&Q(t.a[n],e)&&(nn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function sn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}rn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=sn(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new en(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),un={};function cn(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=_n(n),t&&t[Ze]?En(t,e,n,g(r)?!!r.capture:!!r,i):ln(t,e,n,!1,r,i)}function ln(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=g(i)?!!i.capture:!!i,a=vn(t);if(a||(t[an]=a=new rn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=yn,e=Ge?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=_n(n),t&&t[Ze]?Tn(t,e,n,g(r)?!!r.capture:!!r,i):ln(t,e,n,!0,r,i)}function fn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=_n(n),t&&t[Ze]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=sn(o=t.a[e],n,r,i))&&(nn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=vn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=sn(e,n,r,i)),(n=-1<t?e[t]:null)&&dn(n))}function dn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Ze])on(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=vn(e))?(on(n,t),0==n.b&&(n.src=null,e[an]=null)):nn(t)}}}function pn(t){return t in un?un[t]:un[t]="on"+t}function gn(t,e,n,r){var i=!0;if((t=vn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=mn(o,r),i=i&&!1!==o)}return i}function mn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&dn(t),n.call(r,e)}function yn(t,e){if(t.va)return!0;if(!Ge){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Xe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=gn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=gn(r[i],t,!1,e),n=n&&o}return n}return mn(t,new Xe(e,this))}function vn(t){return(t=t[an])instanceof rn?t:null}var bn="__closure_events_fn_"+(1e9*Math.random()>>>0);function _n(t){return p(t)?t:(t[bn]||(t[bn]=function(e){return t.handleEvent(e)}),t[bn])}function wn(){Be.call(this),this.v=new rn(this),this.ac=this,this.gb=null}function En(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Tn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Sn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Va||s.src;s.Pa&&on(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function In(t,e,n){if(p(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function On(t){var e=null;return new _e(function(n,r){-1==(e=In(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw a.clearTimeout(e),t})}function Cn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function kn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function An(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof An)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Nn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Nn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Nn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}S(wn,Be),wn.prototype[Ze]=!0,wn.prototype.addEventListener=function(t,e,n,r){cn(this,t,e,n,r)},wn.prototype.removeEventListener=function(t,e,n,r){fn(this,t,e,n,r)},wn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new Ye(t,n);else if(t instanceof Ye)t.target=t.target||n;else{var i=t;yt(t=new Ye(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=Sn(s,r,!0,t)&&i}if(i=Sn(s=t.b=n,r,!0,t)&&i,i=Sn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Sn(s=t.b=e[o],r,!1,t)&&i;return i},wn.prototype.Da=function(){if(wn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)nn(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=An.prototype).W=function(){xn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return xn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Nn(this.b,t)?this.b[t]:e},t.set=function(t,e){Nn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var jn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Pn?(this.i=void 0!==e?e:t.i,Rn(this,t.c),this.l=t.l,this.a=t.a,Dn(this,t.g),this.f=t.f,Mn(this,er(t.b)),this.h=t.h):t&&(n=String(t).match(jn))?(this.i=!!e,Rn(this,n[1]||"",!0),this.l=qn(n[2]||""),this.a=qn(n[3]||"",!0),Dn(this,n[4]),this.f=qn(n[5]||"",!0),Mn(this,n[6]||"",!0),this.h=qn(n[7]||"")):(this.i=!!e,this.b=new Qn(null,this.i))}function Rn(t,e,n){t.c=n?qn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Dn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Mn(t,e,n){e instanceof Qn?(t.b=e,function(t,e){e&&!t.f&&(Yn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Jn(this,e),tr(this,n,t))},t)),t.f=e}(t.b,t.i)):(n||(e=Bn(e,Gn)),t.b=new Qn(e,t.i))}function Ln(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function Un(t){return t instanceof Pn?new Pn(t):new Pn(t,void 0)}function Vn(t,e,n,r){var i=new Pn(null,void 0);return t&&Rn(i,t),e&&(i.a=e),n&&Dn(i,n),r&&(i.f=r),i}function qn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Bn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Bn(e,Kn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Bn(e,Kn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Bn(n,"/"==n.charAt(0)?Wn:zn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Bn(n,$n)),t.join("")},Pn.prototype.resolve=function(t){var e=new Pn(this),n=!!t.c;n?Rn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Dn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ut(i,"./")||ut(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Mn(e,er(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Kn=/[#\/\?@]/g,zn=/[#\?:]/g,Wn=/[#\?]/g,Gn=/[#\?@]/g,$n=/#/g;function Qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Yn(t){t.a||(t.a=new An,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Xn(t){var e=kn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Qn(null,void 0);t=Cn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?tr(n,i,o):n.add(i,o)}return n}function Jn(t,e){Yn(t),e=nr(t,e),Nn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Nn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&xn(t)))}function Zn(t,e){return Yn(t),e=nr(t,e),Nn(t.a.b,e)}function tr(t,e,n){Jn(t,e),0<n.length&&(t.c=null,t.a.set(nr(t,e),J(n)),t.b+=n.length)}function er(t){var e=new Qn;return e.c=t.c,t.a&&(e.a=new An(t.a),e.b=t.b),e}function nr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function rr(t){var e=[];return or(new ir,t,e),e.join("")}function ir(){}function or(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),or(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),ur(r,n),n.push(":"),or(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":ur(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Qn.prototype).add=function(t,e){Yn(this),this.c=null,t=nr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Yn(this),this.a.forEach(function(n,r){K(n,function(n){t.call(e,n,r,this)},this)},this)},t.Y=function(){Yn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Yn(this);var e=[];if("string"==typeof t)Zn(this,t)&&(e=X(e,this.a.get(nr(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=X(e,t[n])}return e},t.set=function(t,e){return Yn(this),this.c=null,Zn(this,t=nr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var sr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ar=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ur(t,e){e.push('"',t.replace(ar,function(t){var e=sr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),sr[t]=e),e}),'"')}function cr(){var t=Ar();return Qt&&!!se&&11==se||/Edge\/\d+/.test(t)}function lr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||a.window;var n="about:blank";t&&(n=jt(Mt(t)||Ut)),e.location.href=n}function fr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<fr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function dr(t){return!!((t=(t||Ar()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||a.window;try{t.close()}catch(e){}}function gr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Ar().toLowerCase(),r&&(e.target=r,ut(n,"crios/")&&(e.target="_blank")),Or(Ar())==Sr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Nt?n:Mt(void 0!==n.href?n.href:String(n))||Ut,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ft("iPhone")&&!ft("iPod")&&!ft("iPad")||ft("iPad")||ft("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(s=pe(document,"A"),"HTMLAnchorElement"),e=e instanceof Nt?e:Lt(e),s.href=jt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Bt("",r,n,s),t=jt(e),s&&(Xt&&ut(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Kt(t)+'">',t=new Vt(t=(r=St())?r.createHTML(t):t,null,qt),r=s.document)&&(r.write(function(t){return t instanceof Vt&&t.constructor===Vt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Bt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var mr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yr=/^[^@]+@[^@]+$/;function vr(){var t=null;return new _e(function(e){"complete"==a.document.readyState?e():(t=function(){e()},hn(window,"load",t))}).o(function(e){throw fn(window,"load",t),e})}function br(t){return t=t||Ar(),!("file:"!==Rr()&&"ionic:"!==Rr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function _r(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function wr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function Er(){return r.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.default.INTERNAL.hasOwnProperty("node")?"Node":wr()?"Worker":"Browser"}function Tr(){var t=Er();return"ReactNative"===t||"Node"===t}var Sr="Firefox",Ir="Chrome";function Or(t){var e=t.toLowerCase();return ut(e,"opera/")||ut(e,"opr/")||ut(e,"opios/")?"Opera":ut(e,"iemobile")?"IEMobile":ut(e,"msie")||ut(e,"trident/")?"IE":ut(e,"edge/")?"Edge":ut(e,"firefox/")?Sr:ut(e,"silk/")?"Silk":ut(e,"blackberry")?"Blackberry":ut(e,"webos")?"Webos":!ut(e,"safari/")||ut(e,"chrome/")||ut(e,"crios/")||ut(e,"android")?!ut(e,"chrome/")&&!ut(e,"crios/")||ut(e,"edge/")?ut(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Ir:"Safari"}var Cr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function kr(t,e){e=e||[];var n,r=[],i={};for(n in Cr)i[Cr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Er())?r=Or(i=Ar()):"Worker"===r&&(r=Or(i=Ar())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Ar(){return a.navigator&&a.navigator.userAgent||""}function xr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Nr(){try{var t=a.localStorage,e=Ur();if(t)return t.setItem(e,"1"),t.removeItem(e),!cr()||!!a.indexedDB}catch(n){return wr()&&!!a.indexedDB}return!1}function jr(){return(Pr()||"chrome-extension:"===Rr()||br())&&!Tr()&&Nr()&&!wr()}function Pr(){return"http:"===Rr()||"https:"===Rr()}function Rr(){return a.location&&a.location.protocol||null}function Dr(t){return!dr(t=t||Ar())&&Or(t)!=Sr}function Mr(t){return void 0===t?null:rr(t)}function Lr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function Ur(t){return t||Math.floor(1e9*Math.random()).toString()}function Vr(t){return"Safari"!=Or(t=t||Ar())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function qr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Br(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Ar(),e=Er(),this.b=dr(t)||"ReactNative"===e}function Hr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Kr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function zr(){return!(!xr("fireauth.oauthhelper",a)&&!xr("fireauth.iframe",a))}Br.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Pr()&&"chrome-extension:"!==Rr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Gr={};function $r(t){Gr[t]||(Gr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Qr={};Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==Qr.abcd}catch(Gt){Wr=!1}function Yr(t,e,n){Wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Xr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Yr(t,n,e[n])}function Jr(t){var e={};return Xr(e,t),e}function Zr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Yr(e,n,Zr(t[n]));return e}function ti(t){var e=t&&(t[oi]?"phone":null);if(!(e&&t&&t[ii]))throw new O("internal-error","Internal assert: invalid MultiFactorInfo object");Yr(this,"uid",t[ii]),Yr(this,"displayName",t[ni]||null);var n=null;t[ri]&&(n=new Date(t[ri]).toUTCString()),Yr(this,"enrollmentTime",n),Yr(this,"factorId",e)}function ei(t){try{var e=new si(t)}catch(n){e=null}return e}ti.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ni="displayName",ri="enrolledAt",ii="mfaEnrollmentId",oi="phoneInfo";function si(t){ti.call(this,t),Yr(this,"phoneNumber",t[oi])}function ai(t){var e={},n=t[hi],r=t[di],i=t[pi];if(t=ei(t[fi]),!i||i!=ci&&i!=li&&!n||i==li&&!r||i==ui&&!t)throw Error("Invalid checkActionCode response!");i==li?(e[mi]=n||null,e[vi]=n||null,e[gi]=r):(e[mi]=r||null,e[vi]=r||null,e[gi]=n||null),e[yi]=t||null,Yr(this,_i,i),Yr(this,bi,Zr(e))}S(si,ti),si.prototype.w=function(){var t=si.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ui="REVERT_SECOND_FACTOR_ADDITION",ci="EMAIL_SIGNIN",li="VERIFY_AND_CHANGE_EMAIL",hi="email",fi="mfaInfo",di="newEmail",pi="requestType",gi="email",mi="fromEmail",yi="multiFactorInfo",vi="previousEmail",bi="data",_i="operation";function wi(t){var e=Fn(t=Un(t),Ei)||null,n=Fn(t,Ti)||null,r=Fn(t,Oi)||null;if(r=r&&ki[r]||null,!e||!n||!r)throw new O("argument-error",Ei+", "+Ti+"and "+Oi+" are required in a valid action code URL.");Xr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Si)||null,languageCode:Fn(t,Ii)||null,tenantId:Fn(t,Ci)||null})}var Ei="apiKey",Ti="oobCode",Si="continueUrl",Ii="languageCode",Oi="mode",Ci="tenantId",ki={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ui,signIn:ci,verifyAndChangeEmail:li,verifyEmail:"VERIFY_EMAIL"};function Ai(t){try{return new wi(t)}catch(e){return null}}function xi(t){var e=t[Di];if(void 0===e)throw new O("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new O("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ni];if(n&&"object"==typeof n){e=n[Fi];var r=n[Mi];if(n=n[Li],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new O("argument-error",Mi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new O("argument-error",Li+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new O("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new O("missing-android-pkg-name")}}else if(void 0!==n)throw new O("argument-error",Ni+" property must be a non null object when specified.");if(this.f=null,(e=t[Ri])&&"object"==typeof e){if("string"==typeof(e=e[Ui])&&e.length)this.f=e;else if(void 0!==e)throw new O("argument-error",Ui+" property must be a non empty string when specified.")}else if(void 0!==e)throw new O("argument-error",Ri+" property must be a non null object when specified.");if(void 0!==(e=t[Pi])&&"boolean"!=typeof e)throw new O("argument-error",Pi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[ji])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new O("argument-error",ji+" property must be a non empty string when specified.");this.i=t||null}var Ni="android",ji="dynamicLinkDomain",Pi="handleCodeInApp",Ri="iOS",Di="url",Mi="installApp",Li="minimumVersion",Fi="packageName",Ui="bundleId";function Vi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var qi=null;function Bi(t){var e=Ki(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Hi(t){try{return new Bi(t)}catch(e){return null}}function Ki(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=qi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!qi){qi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===qi[o]&&(qi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e.push(t)}),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(u){}return null}Bi.prototype.T=function(){return this.f},Bi.prototype.l=function(){return this.c},Bi.prototype.toString=function(){return this.h};var zi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Wi=["client_id","response_type","scope","redirect_uri","state"],Gi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Wi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Wi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Wi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:zi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function $i(t){for(var e in Gi)if(Gi[e].fa==t)return Gi[e];return null}function Qi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Xi];try{if(n)return e[n]?new e[n](t):new Zi(t);if(void 0!==t[Yi])return new Ji(t)}catch(r){}return null}var Yi="idToken",Xi="providerId";function Ji(t){var e=t[Xi];if(!e&&t[Yi]){var n=Hi(t[Yi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Yr(this,"providerId",e),Yr(this,"isNewUser",n)}function Zi(t){Ji.call(this,t),Yr(this,"profile",Zr((t=Fr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",t.screenName||null)}function io(t){var e=Un(t),n=Fn(e,"link"),r=Fn(Un(n),"link");return e=Fn(e,"deep_link_id"),Fn(Un(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new O("internal-error","Internal assert: no raw session string available");if(t&&e)throw new O("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?so:ao}S(Zi,Ji),S(to,Zi),S(eo,Zi),S(no,Zi),S(ro,Zi);var so="enroll",ao="signin";function uo(){}function co(t,e){return t.then(function(t){if(t[Ys]){var n=Hi(t[Ys]);if(!n||e!=n.i)throw new O("user-mismatch");return t}throw new O("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==A+"user-not-found"?new O("user-mismatch"):t})}function lo(t,e){if(!e)throw new O("internal-error","failed to construct a credential");this.a=e,Yr(this,"providerId",t),Yr(this,"signInMethod",t)}function ho(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new lo(t.providerId,t.pendingToken)}catch(e){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Yr(this,"idToken",e.idToken),e.accessToken&&Yr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Yr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new O("internal-error","failed to construct a credential");Yr(this,"accessToken",e.oauthToken),Yr(this,"secret",e.oauthTokenSecret)}Yr(this,"providerId",t),Yr(this,"signInMethod",n)}function go(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function mo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(n){}}return null}function yo(t,e){this.Qc=e||[],Xr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=($i(t)||{}).Ja||null,this.ob=null}function vo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new O("argument-error",'SAML provider IDs must be prefixed with "saml."');yo.call(this,t,[])}function bo(t){yo.call(this,t,Wi),this.a=[]}function _o(){bo.call(this,"facebook.com")}function wo(t){if(!t)throw new O("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function Eo(){bo.call(this,"github.com")}function To(t){if(!t)throw new O("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function So(){bo.call(this,"google.com"),this.Ca("profile")}function Io(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new So).credential({idToken:n,accessToken:e})}function Oo(){yo.call(this,"twitter.com",zi)}function Co(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new O("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function ko(t,e,n){this.a=t,this.f=e,Yr(this,"providerId","password"),Yr(this,"signInMethod",n===xo.EMAIL_LINK_SIGN_IN_METHOD?xo.EMAIL_LINK_SIGN_IN_METHOD:xo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ao(t){return t&&t.email&&t.password?new ko(t.email,t.password,t.signInMethod):null}function xo(){Xr(this,{providerId:"password",isOAuthProvider:!1})}function No(t,e){if(!(e=jo(e)))throw new O("argument-error","Invalid email link!");return new ko(t,e.code,xo.EMAIL_LINK_SIGN_IN_METHOD)}function jo(t){return(t=Ai(t=io(t)))&&t.operation===ci?t:null}function Po(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new O("internal-error");this.a=t,Yr(this,"providerId","phone"),this.fa="phone",Yr(this,"signInMethod","phone")}function Ro(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return K(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new Po(e)}return null}function Do(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Mo(t){try{this.a=t||r.default.auth()}catch(e){throw new O("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Xr(this,{providerId:"phone",isOAuthProvider:!1})}function Lo(t,e){if(!t)throw new O("missing-verification-id");if(!e)throw new O("missing-verification-code");return new Po({eb:t,cb:e})}function Fo(t){if(t.temporaryProof&&t.phoneNumber)return new Po({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Io(o,n);case"facebook.com":return wo(n);case"github.com":return To(n);case"twitter.com":return Co(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new lo(e,s):new po(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Uo(t){if(!t.isOAuthProvider)throw new O("invalid-oauth-provider")}function Vo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new O("invalid-auth-event");if(this.g&&this.a)throw new O("invalid-auth-event");if(this.g&&!this.f)throw new O("invalid-auth-event")}function qo(t){return(t=t||{}).type?new Vo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&C(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return Ce(this.a?this.a:this.b)},oo.prototype.w=function(){return this.type==so?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ka=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},lo.prototype.ka=function(t){return ya(t,ho(this))},lo.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,va(t,n)},lo.prototype.c=function(t,e){return co(ba(t,ho(this)),e)},lo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ka=function(t){return ya(t,go(this))},po.prototype.b=function(t,e){var n=go(this);return n.idToken=e,va(t,n)},po.prototype.c=function(t,e){return co(ba(t,go(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},yo.prototype.Ka=function(t){return this.Ib=gt(t),this},S(vo,yo),S(bo,yo),bo.prototype.Ca=function(t){return $(this.a,t)||this.a.push(t),this},bo.prototype.Qb=function(){return J(this.a)},bo.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new O("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},S(_o,bo),Yr(_o,"PROVIDER_ID","facebook.com"),Yr(_o,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(Eo,bo),Yr(Eo,"PROVIDER_ID","github.com"),Yr(Eo,"GITHUB_SIGN_IN_METHOD","github.com"),S(So,bo),Yr(So,"PROVIDER_ID","google.com"),Yr(So,"GOOGLE_SIGN_IN_METHOD","google.com"),S(Oo,yo),Yr(Oo,"PROVIDER_ID","twitter.com"),Yr(Oo,"TWITTER_SIGN_IN_METHOD","twitter.com"),ko.prototype.ka=function(t){return this.signInMethod==xo.EMAIL_LINK_SIGN_IN_METHOD?tu(t,Ca,{email:this.a,oobCode:this.f}):tu(t,Qa,{email:this.a,password:this.f})},ko.prototype.b=function(t,e){return this.signInMethod==xo.EMAIL_LINK_SIGN_IN_METHOD?tu(t,ka,{idToken:e,email:this.a,oobCode:this.f}):tu(t,qa,{idToken:e,email:this.a,password:this.f})},ko.prototype.c=function(t,e){return co(this.ka(t),e)},ko.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Xr(xo,{PROVIDER_ID:"password"}),Xr(xo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Xr(xo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Po.prototype.ka=function(t){return t.fb(Do(this))},Po.prototype.b=function(t,e){var n=Do(this);return n.idToken=e,tu(t,Xa,n)},Po.prototype.c=function(t,e){var n=Do(this);return n.operation="REAUTH",co(t=tu(t,Ja,n),e)},Po.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.fb=function(t,e){var n=this.a.a;return Ce(e.verify()).then(function(r){if("string"!=typeof r)throw new O("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=g(t)?t.session:null,o=g(t)?t.phoneNumber:t;return(i&&i.type==so?i.Ha().then(function(t){return function(t,e){return tu(t,Ha,e).then(function(t){return t.phoneSessionInfo.sessionInfo})}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})}):i&&i.type==ao?i.Ha().then(function(e){return function(t,e){return tu(t,Ka,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})}):function(t,e){return tu(t,Ua,e)}(n,{phoneNumber:o,recaptchaToken:r})).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new O("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Xr(Mo,{PROVIDER_ID:"phone"}),Xr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),Vo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Vo.prototype.T=function(){return this.h},Vo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ho,Ko=null;function zo(t){var e="unauthorized-domain",n=void 0,r=Un(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ht("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ht("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",O.call(this,e,n)}function Wo(t,e,n){O.call(this,t,n),(t=e||{}).Jb&&Yr(this,"email",t.Jb),t.ea&&Yr(this,"phoneNumber",t.ea),t.credential&&Yr(this,"credential",t.credential),t.Zb&&Yr(this,"tenantId",t.Zb)}function Go(t){if(t.code){var e=t.code||"";0==e.indexOf(A)&&(e=e.substring(A.length));var n={credential:Fo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new O(e,t.message||void 0);return new Wo(e,n,t.message)}return null}function $o(){}function Qo(){}function Yo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Xo(){}function Jo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.qc,this),this.a.onerror=w(this.Sb,this),this.a.onprogress=w(this.rc,this),this.a.ontimeout=w(this.vc,this)}function Zo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ts(t,e,n){this.reset(t,e,n,void 0,void 0)}function es(t){this.f=t,this.b=this.c=this.a=null}function ns(t,e){this.name=t,this.value=e}S(zo,O),S(Wo,O),Wo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&yt(t,e),t},Wo.prototype.toJSON=function(){return this.w()},$o.prototype.c=null,S(Qo,$o),Qo.prototype.a=function(){var t=Yo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Qo.prototype.b=function(){var t={};return Yo(this)&&(t[0]=!0,t[1]=!0),t},Ho=new Qo,S(Xo,$o),Xo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Jo;throw Error("Unsupported browser")},Xo.prototype.b=function(){return{}},(t=Jo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Zo(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Zo(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Zo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ts.prototype.a=null,ts.prototype.reset=function(t,e,n,r,i){r||T(),delete this.a},ns.prototype.toString=function(){return this.name};var rs=new ns("SEVERE",1e3),is=new ns("WARNING",900),os=new ns("CONFIG",700),ss=new ns("FINE",500);function as(t){return t.c?t.c:t.a?as(t.a):(M("Root logger has no level set."),null)}es.prototype.log=function(t,e,n){if(t.value>=as(this).value)for(p(e)&&(e=e()),t=new ts(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var us={},cs=null;function ls(t){var e;if(cs||(cs=new es(""),us[""]=cs,cs.c=os),!(e=us[t])){e=new es(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ls(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,us[t]=e}return e}function hs(t,e){t&&t.log(ss,e,void 0)}function fs(t){this.f=t}function ds(t){wn.call(this),this.u=t,this.h=void 0,this.readyState=ps,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ls("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}S(fs,$o),fs.prototype.a=function(){return new ds(this.f)},fs.prototype.b=function(t){return function(){return t}}({}),S(ds,wn);var ps=0;function gs(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ms(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ys(t)}function ys(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function vs(t){wn.call(this),this.headers=new An,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=bs,this.u=this.S=!1}(t=ds.prototype).open=function(t,e){if(this.readyState!=ps)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ys(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ms(this)),this.readyState=ps},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ys(this)),this.a&&(this.readyState=3,ys(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,gs(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ms(this):ys(this),3==this.readyState&&gs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ms(this))},t.sc=function(t){this.a&&(this.response=t,ms(this))},t.Ua=function(t){var e=this.i;e&&e.log(is,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ms(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(is,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(is,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),S(vs,wn);var bs="";vs.prototype.b=ls("goog.net.XhrIo");var _s=/^https?$/i,ws=["POST","PUT"];function Es(t){return"content-type"==t.toLowerCase()}function Ts(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ss(t),Os(t)}function Ss(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Is(t){if(t.c&&void 0!==s)if(t.C[1]&&4==ks(t)&&2==As(t))hs(t.b,xs(t,"Local request error detected and ignored"));else if(t.i&&4==ks(t))In(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==ks(t)){hs(t.b,xs(t,"Request complete")),t.c=!1;try{var e,n=As(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(jn)[1]||null;if(!o&&a.self&&a.self.location){var u=a.self.location.protocol;o=u.substr(0,u.length-1)}i=!_s.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<ks(t)?t.a.statusText:""}catch(l){hs(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+As(t)+"]",Ss(t)}}finally{Os(t)}}}function Os(t,e){if(t.a){Cs(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(rs,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function Cs(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function ks(t){return t.a?t.a.readyState:0}function As(t){try{return 2<ks(t)?t.a.status:-1}catch(e){return-1}}function xs(t,e){return e+" ["+t.R+" "+t.l+" "+As(t)+"]"}function Ns(t){var e=Bs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function js(t,e,n){t.a=!0,t.c=n,t.f=!e,Ms(t)}function Ps(t){if(t.a){if(!t.v)throw new Ls(t);t.v=!1}}function Rs(t,e,n,r){t.g.push([e,n,r]),t.a&&Ms(t)}function Ds(t){return G(t.g,function(t){return p(t[1])})}function Ms(t){if(t.h&&t.a&&Ds(t)){var e=t.h,n=Vs[e];n&&(a.clearTimeout(n.a),delete Vs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(P(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ds(t)||(n=!0)}}t.c=e,r&&(u=w(t.m,t,!0),r=w(t.m,t,!1),e instanceof Ns?(Rs(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Us(e),Vs[e.a]=e,t.h=e.a)}function Ls(){R.call(this)}function Fs(){R.call(this)}function Us(t){this.a=a.setTimeout(w(this.c,this),0),this.b=t}(t=vs.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",hs(this.b,xs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(hs(this.b,xs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Os(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Os(this,!0)),vs.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Is(this):this.Jc())},t.Jc=function(){Is(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case bs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(rs,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return hs(this.b,"Can not get response: "+e.message),null}},Ns.prototype.cancel=function(t){if(this.a)this.c instanceof Ns&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Fs(this),Ps(this),js(this,!1,t))}},Ns.prototype.m=function(t,e){this.i=!1,js(this,t,e)},Ns.prototype.then=function(t,e,n){var r,i,o=new _e(function(t,e){r=t,i=e});return Rs(this,r,function(t){t instanceof Fs?o.cancel():i(t)}),o.then(t,e,n)},Ns.prototype.$goog_Thenable=!0,S(Ls,R),Ls.prototype.message="Deferred has already fired",Ls.prototype.name="AlreadyCalledError",S(Fs,R),Fs.prototype.message="Deferred was canceled",Fs.prototype.name="CanceledError",Us.prototype.c=function(){throw delete Vs[this.a],this.b};var Vs={};function qs(t){var e={},n=e.document||document,r=Ot(t).toString(),i=pe(document,"SCRIPT"),o={Wb:i,Ma:void 0},s=new Ns(o),u=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(u=window.setTimeout(function(){Hs(i,!0);var t=new Ws(zs,"Timeout reached for loading script "+r);Ps(s),js(s,!1,t)},h),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Hs(i,e.xd||!1,u),Ps(s),js(s,!0,null))},i.onerror=function(){Hs(i,!0,u);var t=new Ws(Ks,"Error while loading script "+r);Ps(s),js(s,!1,t)},yt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=Ot(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=l(e.document):(null===c&&(c=l(a.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Bs(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Hs(t,!0,this.Ma)}}function Hs(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Ks=0,zs=1;function Ws(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function Gs(t){this.f=t}function $s(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Xs,this.g=gt(t.secureTokenHeaders||Js),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Zs,this.a=gt(t.firebaseHeaders||ta),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Er(),!(n=a.XMLHttpRequest||n&&r.default.INTERNAL.node&&r.default.INTERNAL.node.XMLHttpRequest)&&!wr())throw new O("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=wr()?new fs(self):Tr()?new Gs(n):new Xo,this.b=null}S(Ws,R),S(Gs,$o),Gs.prototype.a=function(){return new this.f},Gs.prototype.b=function(){return{}};var Qs,Ys="idToken",Xs=new Br(3e4,6e4),Js={"Content-Type":"application/x-www-form-urlencoded"},Zs=new Br(3e4,6e4),ta={"Content-Type":"application/json"};function ea(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function na(t,e){e&&(t.l=ra("https://securetoken.googleapis.com/v1/token",e),t.h=ra("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ra("https://identitytoolkit.googleapis.com/v2/",e))}function ra(t,e){return t=Un(t),e=Un(e.url),t.f=t.a+t.f,Rn(t,e.c),t.a=e.a,Dn(t,e.g),t.toString()}function ia(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function oa(t,e,n,r,i,o,s){(function(){var t=Ar();return!((t=Or(t)!=Ir?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Qt&&se&&!(9<se))})()||wr()?t=w(t.u,t):(Qs||(Qs=new _e(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[aa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Rs(t,null,e,void 0)}(qs(Ct(sa,{onload:aa})),function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)})),t=w(t.s,t)),t(e,n,r,i,o,s)}$s.prototype.T=function(){return this.b},$s.prototype.u=function(t,e,n,r,i,o){if(wr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new O("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new vs(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout(function(){s.dispatchEvent("timeout")},o)}En(s,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return hs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),Tn(s,"ready",function(){u&&clearTimeout(u),ze(this)}),Tn(s,"timeout",function(){u&&clearTimeout(u),ze(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ho.a(),t.C=function(t){return t.c||(t.c=t.b())}(t.D?t.D:Ho),t.a.onreadystatechange=w(t.Vb,t);try{hs(t.b,xs(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(s){return hs(t.b,xs(t,"Error opening Xhr: "+s.message)),void Ts(t,s)}e=r||"";var o=new An(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)K(t,e,void 0);else for(var n=kn(t),r=Cn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=Es,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!$(ws,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Cs(t),0<t.g&&(t.u=function(t){return Qt&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),hs(t.b,xs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=w(t.Ma,t)):t.s=In(t.Ma,t.g,t)),hs(t.b,xs(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){hs(t.b,xs(t,"Send error: "+s.message)),Ts(t,s)}}(s,t,n,r,i)};var sa=new bt(Tt,"https://apis.google.com/js/client.js?onload=%{onload}"),aa="__fcb"+Math.floor(1e6*Math.random()).toString();function ua(t){if("string"!=typeof(t=t.email)||!yr.test(t))throw new O("invalid-email")}function ca(t){"email"in t&&ua(t)}function la(t){if(!t[Ys]){if(t.mfaPendingCredential)throw new O("multi-factor-auth-required",null,gt(t));throw new O("internal-error")}}function ha(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new O("internal-error")}else{if(!t.sessionInfo)throw new O("missing-verification-id");if(!t.code)throw new O("missing-verification-code")}}$s.prototype.s=function(t,e,n,r,i){var o=this;Qs.then(function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},$s.prototype.zb=function(){return tu(this,Ba,{})},$s.prototype.Bb=function(t,e){return tu(this,Va,{idToken:t,email:e})},$s.prototype.Cb=function(t,e){return tu(this,qa,{idToken:t,password:e})};var fa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function da(t){if(!t.phoneVerificationInfo)throw new O("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new O("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new O("missing-verification-code")}function pa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new O("internal-error")}function ga(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Zn(t=new Qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ma(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Go(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Go(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Go(t)):t.errorMessage&&(e=eu(t.errorMessage)),e)throw e;la(t)}function ya(t,e){return e.returnIdpCredential=!0,tu(t,za,e)}function va(t,e){return e.returnIdpCredential=!0,tu(t,Ga,e)}function ba(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,tu(t,Wa,e)}function _a(t){if(!t.oobCode)throw new O("invalid-action-code")}(t=$s.prototype).Db=function(t,e){var n={idToken:t},r=[];return dt(fa,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),tu(this,Va,n)},t.vb=function(t,e){return yt(t={requestType:"PASSWORD_RESET",email:t},e),tu(this,Da,t)},t.wb=function(t,e){return yt(t={requestType:"EMAIL_SIGNIN",email:t},e),tu(this,ja,t)},t.ub=function(t,e){return yt(t={requestType:"VERIFY_EMAIL",idToken:t},e),tu(this,Pa,t)},t.Eb=function(t,e,n){return yt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),tu(this,Ra,t)},t.fb=function(t){return tu(this,Ya,t)},t.nb=function(t,e){return tu(this,Fa,{oobCode:t,newPassword:e})},t.Ra=function(t){return tu(this,Ea,{oobCode:t})},t.jb=function(t){return tu(this,wa,{oobCode:t})};var wa={endpoint:"setAccountInfo",A:_a,Z:"email",B:!0},Ea={endpoint:"resetPassword",A:_a,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new O("internal-error")},B:!0},Ta={endpoint:"signupNewUser",A:function(t){if(ua(t),!t.password)throw new O("weak-password")},G:la,V:!0,B:!0},Sa={endpoint:"createAuthUri",B:!0},Ia={endpoint:"deleteAccount",N:["idToken"]},Oa={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new O("internal-error")}},Ca={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ua,G:la,V:!0,B:!0},ka={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ua,G:la,V:!0},Aa={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:da,G:la,B:!0,Na:!0},xa={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:da,G:la,B:!0,Na:!0},Na={endpoint:"getAccountInfo"},ja={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new O("internal-error");ua(t)},Z:"email",B:!0},Pa={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new O("internal-error")},Z:"email",B:!0},Ra={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new O("internal-error")},Z:"email",B:!0},Da={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new O("internal-error");ua(t)},Z:"email",B:!0},Ma={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},La={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new O("internal-error")}},Fa={endpoint:"resetPassword",A:_a,Z:"email",B:!0},Ua={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Va={endpoint:"setAccountInfo",N:["idToken"],A:ca,V:!0},qa={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(ca(t),!t.password)throw new O("weak-password")},G:la,V:!0},Ba={endpoint:"signupNewUser",G:la,V:!0,B:!0},Ha={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new O("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new O("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new O("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new O("internal-error")},B:!0,Na:!0},Ka={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new O("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new O("internal-error")},B:!0,Na:!0},za={endpoint:"verifyAssertion",A:pa,Ya:ga,G:ma,V:!0,B:!0},Wa={endpoint:"verifyAssertion",A:pa,Ya:ga,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new O("user-not-found");if(t.errorMessage)throw eu(t.errorMessage);la(t)},V:!0,B:!0},Ga={endpoint:"verifyAssertion",A:function(t){if(pa(t),!t.idToken)throw new O("internal-error")},Ya:ga,G:ma,V:!0},$a={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new O("invalid-custom-token")},G:la,V:!0,B:!0},Qa={endpoint:"verifyPassword",A:function(t){if(ua(t),!t.password)throw new O("wrong-password")},G:la,V:!0,B:!0},Ya={endpoint:"verifyPhoneNumber",A:ha,G:la,B:!0},Xa={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new O("internal-error");ha(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Go(t);la(t)}},Ja={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ha,G:la,B:!0},Za={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ys]^!!t.refreshToken)throw new O("internal-error")},B:!0,Na:!0};function tu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return ke(new O("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return Ce(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Un(e+n);Ln(a,"key",t.c),s&&Ln(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Ln(a,c,i[c]);return new _e(function(e,n){oa(t,a.toString(),function(t){t?t.error?n(nu(t,o||{})):e(t):n(new O("network-request-failed"))},r,u?void 0:rr(Lr(i)),t.a,t.v.get())})}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)}).then(function(t){return r=t,e.Ya?e.Ya(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new O("internal-error");return r[e.Z]})}function eu(t){return nu({error:{errors:[{message:t}],code:400,message:t}})}function nu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new O(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",yt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new O(r[i],e);return!e&&t&&(e=Mr(t)),new O("internal-error",e)}function ru(t){this.b=t,this.a=null,this.rb=function(t){return(au||(au=new _e(function(t,e){function n(){qr(),xr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){qr(),e(Error("Network Error"))},timeout:ou.get()})}if(xr("gapi.iframes.Iframe"))t();else if(xr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){xr("gapi.load")?n():e(Error("Network Error"))},Ce(qs(r=Ct(iu,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw au=null,t}))).then(function(){return new _e(function(e,n){xr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},su.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var iu=new bt(Tt,"https://apis.google.com/js/api.js?onload=%{onload}"),ou=new Br(3e4,6e4),su=new Br(5e3,15e3),au=null;function uu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Vn((t=Un(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Vn("https",this.l,null,"/__/auth/iframe"),this.a=t,Ln(this.a,"apiKey",this.h),Ln(this.a,"appName",this.i),this.b=null,this.c=[]}function cu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function lu(t){try{return r.default.app(t).auth().Ga()}catch(e){return[]}}function hu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function fu(t){var e=lr();return function(t){return tu(t,Ma,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Un(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Un(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:mr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new zo(lr())})}function du(t){return t.m||(t.m=vr().then(function(){if(!t.u){var e=t.c,n=t.i,r=lu(t.b),i=new uu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=J(r||[]),t.u=i.toString()}t.v=new ru(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then(function(){t.a.register("authEvent",e,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.v,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=qo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ce(n)}return n.status="ERROR",Ce(n)})}(t)})),t.m}function pu(t){return t.l||(t.C=t.c?kr(t.c,lu(t.b)):null,t.l=new $s(t.g,j(t.i),t.C),t.f&&na(t.l,t.f)),t.l}function gu(t,e,n,r,i,o,s,a,u,c,l,h){return(t=new cu(t,e,n,r,i,h)).l=o,t.g=s,t.i=a,t.b=gt(u||null),t.f=c,t.yb(l).toString()}function mu(t){if(this.a=t||r.default.INTERNAL.reactNative&&r.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new O("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function yu(t){this.b=t,this.a={},this.f=w(this.c,this)}uu.prototype.toString=function(){return this.f?Ln(this.a,"v",this.f):Jn(this.a.b,"v"),this.b?Ln(this.a,"eid",this.b):Jn(this.a.b,"eid"),this.c.length?Ln(this.a,"fw",this.c.join(",")):Jn(this.a.b,"fw"),this.a.toString()},cu.prototype.yb=function(t){return this.h=t,this},cu.prototype.toString=function(){if(this.v){var t=Un(this.v.url);t=Vn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Vn("https",this.u,null,"/__/auth/handler");if(Ln(t,"apiKey",this.s),Ln(t,"appName",this.c),Ln(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=r.default.app(this.c).auth().la()}catch(u){n=null}for(var i in e.ob=n,Ln(t,"providerId",this.a.providerId),e=Lr((n=this.a).Ib))e[i]=e[i].toString();i=n.Qc,e=gt(e);for(var o=0;o<i.length;o++){var s=i[o];s in e&&delete e[s]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),pt(e)||Ln(t,"customParameters",Mr(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&Ln(t,"scopes",n.join(",")),this.l?Ln(t,"redirectUrl",this.l):Jn(t.b,"redirectUrl"),this.g?Ln(t,"eventId",this.g):Jn(t.b,"eventId"),this.i?Ln(t,"v",this.i):Jn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Fn(t,a)&&Ln(t,a,this.b[a]);return this.h?Ln(t,"tid",this.h):Jn(t.b,"tid"),this.f?Ln(t,"eid",this.f):Jn(t.b,"eid"),(a=lu(this.c)).length&&Ln(t,"fw",a.join(",")),t.toString()},(t=hu.prototype).Ob=function(t,e,n){var r=new O("popup-closed-by-user"),i=new O("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){(function(t){var e={type:"webStorageSupport"};return du(t).then(function(){return function(t,e){return t.rb.then(function(){return new _e(function(n){t.a.send(e.type,e,n,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.v,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&pr(t),e(i),s=!0)})}).o(function(){}).then(function(){if(!s)return function(t){return new _e(function(e){return function n(){On(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return On(n).then(function(){e(r)})})},t.Xb=function(){var t=Ar();return!Dr(t)&&!Vr(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,s,a){if(!t)return ke(new O("popup-blocked"));if(s&&!Dr())return this.ma().o(function(e){pr(t),i(e)}),r(),Ce();this.a||(this.a=fu(pu(this)));var u=this;return this.a.then(function(){var e=u.ma().o(function(e){throw pr(t),i(e),e});return r(),e}).then(function(){Uo(n),s||hr(gu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Nb=function(t,e,n,r){this.a||(this.a=fu(pu(this)));var i=this;return this.a.then(function(){Uo(e),hr(gu(i.s,i.g,i.b,t,e,lr(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return du(this).then(function(){return t.v.rb}).o(function(){throw t.a=null,new O("network-request-failed")})},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){Y(this.h,function(e){return e==t})},(t=mu.prototype).get=function(t){return Ce(this.a.getItem(t)).then(function(t){return t&&Fr(t)})},t.set=function(t,e){return Ce(this.a.setItem(t,Mr(e)))},t.U=function(t){return Ce(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var vu,bu=[];function _u(t,e,n){pt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function wu(t){this.a=t}function Eu(t){this.c=t,this.b=!1,this.a=[]}function Tu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return ke(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new _e(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return Su(t,c),e}).o(function(e){throw Su(t,c),e})}function Su(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),Y(t.a,function(t){return t==e})}}function Iu(){if(!Au())throw new O("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;wr()&&self?(this.v=function(){var t=wr()?self:null;if(K(bu,function(n){n.b==t&&(e=n)}),!e){var e=new yu(t);bu.push(e)}return e}(),_u(this.v,"keyChanged",function(e,n){return Ru(t).then(function(e){return 0<e.length&&K(t.a,function(t){t(e)}),{keyProcessed:$(e,n.key)}})}),_u(this.v,"ping",function(){return Ce(["keyChanged"])})):function(){var t=a.navigator;return t&&t.serviceWorker?Ce().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):Ce(null)}().then(function(e){(t.h=e)&&(t.g=new Eu(new wu(e)),Tu(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&$(e[0].value,"keyChanged")&&(t.s=!0)}).o(function(){}))})}function Ou(t){return new _e(function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new _e(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return Ou(t)}).then(function(t){e(t)}).o(function(t){n(t)})}})}function Cu(t){return t.i||(t.i=Ou(t)),t.i}function ku(t,e){var n=0;return new _e(function r(i,o){Cu(t).then(e).then(i).o(function(e){if(!(3<++n))return Cu(t).then(function(e){return e.close(),t.i=void 0,r(i,o)}).o(function(t){o(t)});o(e)})})}function Au(){try{return!!a.indexedDB}catch(Gt){return!1}}function xu(t){return t.objectStore("firebaseLocalStorage")}function Nu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function ju(t){return new _e(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Pu(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Tu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):Ce()}function Ru(t){return Cu(t).then(function(t){var e=xu(Nu(t,!1));return e.getAll?ju(e.getAll()):new _e(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=fr(t.c,n),t.c=n}return r})}function Du(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Mu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ce().then(function(){if(Au()){var t=Ur(),r="__sak"+t;return vu||(vu=new Iu),(n=vu).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)}).then(function(){return n}).o(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){K(e.a,function(e){e(t)})}),t})}function Lu(){this.a={},this.type="inMemory"}function Fu(){if(!function(){var t="Node"==Er();if(!(t=Uu()||t&&r.default.INTERNAL.node&&r.default.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Er())throw new O("internal-error","The LocalStorage compatibility library was not found.");throw new O("web-storage-unsupported")}this.a=Uu()||r.default.INTERNAL.node.localStorage,this.type="localStorage"}function Uu(){try{var t=a.localStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Vu(){this.type="nullStorage"}function qu(){if(!function(){var t="Node"==Er();if(!(t=Bu()||t&&r.default.INTERNAL.node&&r.default.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Er())throw new O("internal-error","The SessionStorage compatibility library was not found.");throw new O("web-storage-unsupported")}this.a=Bu()||r.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Bu(){try{var t=a.sessionStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Hu(){var t={};t.Browser=Wu,t.Node=Gu,t.ReactNative=$u,t.Worker=Qu,this.a=t[Er()]}yu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];K(r,function(e){i.push(Ce().then(function(){return e(t.origin,t.data.data)}))}),xe(i).then(function(r){var i=[];K(r,function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})}),K(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},wu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Eu.prototype.close=function(){for(;0<this.a.length;)Su(this,this.a[0]);this.b=!0},(t=Iu.prototype).set=function(t,e){var n=this,r=!1;return ku(this,function(e){return ju((e=xu(Nu(e,!0))).get(t))}).then(function(i){return ku(n,function(o){if(o=xu(Nu(o,!0)),i)return i.value=e,ju(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,ju(o.add(s))})}).then(function(){return n.c[t]=e,Pu(n,t)}).oa(function(){r&&n.b--})},t.get=function(t){return ku(this,function(e){return ju(xu(Nu(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.U=function(t){var e=this,n=!1;return ku(this,function(r){return n=!0,e.b++,ju(xu(Nu(r,!0)).delete(t))}).then(function(){return delete e.c[t],Pu(e,t)}).oa(function(){n&&e.b--})},t.ca=function(t){0==this.a.length&&function(t){Du(t),function e(){t.f=setTimeout(function(){t.l=Ru(t).then(function(e){0<e.length&&K(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ia=function(t){Y(this.a,function(e){return e==t}),0==this.a.length&&Du(this)},(t=Mu.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.U=function(t){return this.b.then(function(e){return e.U(t)})},t.ca=function(t){this.a.push(t)},t.ia=function(t){Y(this.a,function(e){return e==t})},(t=Lu.prototype).get=function(t){return Ce(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ce()},t.U=function(t){return delete this.a[t],Ce()},t.ca=function(){},t.ia=function(){},(t=Fu.prototype).get=function(t){var e=this;return Ce().then(function(){return Fr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Ce().then(function(){var r=Mr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return Ce().then(function(){e.a.removeItem(t)})},t.ca=function(t){a.window&&cn(a.window,"storage",t)},t.ia=function(t){a.window&&fn(a.window,"storage",t)},(t=Vu.prototype).get=function(){return Ce(null)},t.set=function(){return Ce()},t.U=function(){return Ce()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return Ce().then(function(){return Fr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Ce().then(function(){var r=Mr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return Ce().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Ku,zu,Wu={F:Fu,bb:qu},Gu={F:Fu,bb:qu},$u={F:mu,bb:Vu},Qu={F:Fu,bb:Vu},Yu={rd:"local",NONE:"none",td:"session"};function Xu(){var t=!(Vr(Ar())||!_r()),e=Dr(),n=Nr();this.m=t,this.h=e,this.l=n,this.a={},Ku||(Ku=new Hu),t=Ku;try{this.g=!cr()&&zr()||!a.indexedDB?new t.a.F:new Mu(wr()?new Lu:new t.a.F)}catch(r){this.g=new Lu,this.h=!0}try{this.i=new t.a.bb}catch(r){this.i=new Lu}this.v=new Lu,this.f=w(this.Yb,this),this.b={}}function Ju(){return zu||(zu=new Xu),zu}function Zu(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function tc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ec(t,e,n){return n=tc(e,n),"local"==e.F&&(t.b[n]=null),Zu(t,e.F).U(n)}function nc(t){t.c&&(clearInterval(t.c),t.c=null)}function rc(t){this.a=t,this.b=Ju()}(t=Xu.prototype).get=function(t,e){return Zu(this,t.F).get(tc(t,e))},t.set=function(t,e,n){var r=tc(t,n),i=this,o=Zu(this,t.F);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.F&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=tc(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),pt(this.a)&&(Zu(this,"local").ca(this.f),this.h||(cr()||!zr())&&a.indexedDB||!this.l||function(t){nc(t),t.c=setInterval(function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Xe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=tc(t,e),this.a[t]&&(Y(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),pt(this.a)&&(Zu(this,"local").ia(this.f),nc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Zu(this,"local").ia(this.f):nc(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.mb(e))},Qt&&se&&10==se&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else K(t,w(this.mb,this))},t.mb=function(t){this.a[t]&&K(this.a[t],function(t){t()})};var ic,oc={name:"authEvent",F:"local"};function sc(){this.a=Ju()}function ac(t,e){this.b=uc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===ic&&(ic=a.Int32Array?new Int32Array(gc):gc),this.reset()}S(ac,function(){this.b=-1});for(var uc=64,cc=uc-1,lc=[],hc=0;hc<cc;hc++)lc[hc]=0;var fc=X(128,lc);function dc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|ic[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function pc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(dc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(dc(t),i=0)}}t.c=i,t.g+=n}ac.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):J(this.h)};var gc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function mc(){ac.call(this,8,yc)}S(mc,ac);var yc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function vc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new sc,this.g=new rc(this.h),this.f=null,this.b=[],this.a=this.c=null}function bc(t){return new O("invalid-cordova-configuration",t)}function _c(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function wc(t){return t.f||(t.f=t.ma().then(function(){return new _e(function(e){t.Ea(function n(r){return e(r),t.Sa(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),Ec(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=Un(i),"firebaseError")||null))?C(o):null)?new Vo(r.c,r.b,null,null,o,null,r.T()):new Vo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}_c(t,i)})}var n=new Vo("unknown",null,null,null,new O("no-auth-event")),r=!1,i=On(500).then(function(){return Ec(t).then(function(){r||_c(t,n)})}),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(xr("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Ko||(Ko=new Bo),function(t){var e=Ko;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=xr("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)})})),t.f}function Ec(t){var e=null;return function(t){return t.b.get(oc,t.a).then(function(t){return qo(t)})}(t.g).then(function(n){return e=n,ec((n=t.g).b,oc,n.a)}).then(function(){return e})}function Tc(t){this.a=t,this.b=Ju()}(t=vc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(br(void 0)?vr().then(function(){return new _e(function(t,e){var n=a.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):ke(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof xr("universalLinks.subscribe",a))throw bc("cordova-universal-links-plugin-fix is not installed");if(void 0===xr("BuildInfo.packageName",a))throw bc("cordova-plugin-buildinfo is not installed");if("function"!=typeof xr("cordova.plugins.browsertab.openUrl",a))throw bc("cordova-plugin-browsertab is not installed");if("function"!=typeof xr("cordova.InAppBrowser.open",a))throw bc("cordova-plugin-inappbrowser is not installed")},function(){throw new O("cordova-not-ready")})},t.Ob=function(t,e){return e(new O("operation-not-supported-in-this-environment")),Ce()},t.Mb=function(){return ke(new O("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return ke(new O("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=Ce().then(function(){return Uo(e),wc(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Vo(e,r,null,o,new O("no-auth-event"),null,i),u=xr("BuildInfo.packageName",a);if("string"!=typeof u)throw new O("invalid-cordova-configuration");var c=xr("BuildInfo.displayName",a),l={};if(Ar().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Ar().toLowerCase().match(/android/))return ke(new O("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new mc;pc(e,t),t=[];var n=8*e.g;pc(e,fc,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(dc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return W(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var h=gu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then(function(){var e=t.h;return t.C.a.set(oc,s.w(),e)}).then(function(){var e=xr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new O("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=xr("cordova.plugins.browsertab.openUrl",a)))throw new O("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=xr("cordova.InAppBrowser.open",a)))throw new O("invalid-cordova-configuration");e=Ar(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new _e(function(t,e){u=function(){var e=xr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){Hr()&&c()},o.addEventListener("resume",c=function(){s||(s=On(2e3).then(function(){e(new O("redirect-cancelled-by-user"))}))},!1),Ar().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).o(function(t){return Ec(i).then(function(){throw t})})}).oa(function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Sa(u),i.c=null})},t.Ea=function(t){this.b.push(t),wc(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Vo("unknown",null,null,null,new O("no-auth-event")),t(e))})},t.Sa=function(t){Y(this.b,function(e){return e==t})};var Sc={name:"pendingRedirect",F:"session"};function Ic(t){return ec(t.b,Sc,t.a)}function Oc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new qc,this.C=new Wc,this.g=new Tc(Uc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Cc(this.D,this.v,this.m,k,this.J)}function Cc(t,e,n,i,o){var s=r.default.SDK_VERSION||null;return br()?new vc(t,e,n,s,i,o):new hu(t,e,n,s,i,o)}function kc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o(function(n){throw t.a==e&&t.reset(),n})}function Ac(t){t.a.Xb()&&kc(t).o(function(e){var n=new Vo("unknown",null,null,null,new O("operation-not-supported-in-this-environment"));Dc(e)&&t.s(n)}),t.a.Tb()||Bc(t.b)}function xc(t,e){$(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Sc,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?Ic(t.g).then(function(){kc(t).o(function(e){var n=new Vo("unknown",null,null,null,new O("operation-not-supported-in-this-environment"));Dc(e)&&t.s(n)})}):Ac(t)}).o(function(){Ac(t)})}function Nc(t,e){Y(t.h,function(t){return t==e})}Oc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Cc(this.D,this.v,this.m,null,this.J),this.i={}},Oc.prototype.s=function(t){if(!t)throw new O("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Bc(this.b),e};var jc=new Br(2e3,1e4),Pc=new Br(3e4,6e4);function Rc(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Dc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Mc(t,e,n,r,i){var o;return function(t){return t.b.set(Sc,"pending",t.a)}(t.g).then(function(){return t.a.Nb(e,n,r,i).o(function(e){if(Dc(e))throw new O("operation-not-supported-in-this-environment");return o=e,Ic(t.g).then(function(){throw o})}).then(function(){return t.a.$b()?new _e(function(){}):Ic(t.g).then(function(){return t.qa()}).then(function(){}).o(function(){})})})}function Lc(t,e,n,r,i){return t.a.Ob(r,function(t){e.na(n,null,t,i)},jc.get())}Oc.prototype.qa=function(){return this.b.qa()};var Fc={};function Uc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Vc(t,e,n,r){var i=Uc(e,n,r);return Fc[i]||(Fc[i]=new Oc(t,e,n,r)),Fc[i]}function qc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Bc(t){t.g||(t.g=!0,zc(t,!1,null,null))}function Hc(t){t.g&&!t.i&&zc(t,!1,null,null)}function Kc(t,e){if(t.b=function(){return Ce(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function zc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ke(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Kc(t,n):Kc(t,{user:null}),t.f=[],t.c=[]}function Wc(){}function Gc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function $c(t,e){this.a=e,Yr(this,"verificationId",t)}function Qc(t,e,n,r){return new Mo(t).fb(e,n).then(function(t){return new $c(t,r)})}function Yc(t){var e=Ki(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new O("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Xr(this,{token:t,expirationTime:Kr(1e3*e.exp),authTime:Kr(1e3*e.auth_time),issuedAtTime:Kr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Xc(t,e,n){var r=e&&e[Zc];if(!r)throw new O("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;K(e[Jc]||[],function(t){(t=ei(t))&&i.b.push(t)}),Yr(this,"auth",this.a),Yr(this,"session",this.c),Yr(this,"hints",this.b)}qc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},qc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(zc(this,!0,null,t.a),Ce()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then(function(e){zc(t,a,e,null)}).o(function(e){zc(t,a,null,e)})}(this,t,e):ke(new O("invalid-auth-event")):(zc(this,!1,null,null),Ce())}else ke(new O("invalid-auth-event"))},qc.prototype.qa=function(){var t=this;return new _e(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new O("timeout");t.a&&t.a.cancel(),t.a=On(Pc.get()).then(function(){t.b||(t.g=!0,zc(t,!0,null,e))})}(t))})},Wc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ce()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then(function(t){e.na(r,t,null,n)}).o(function(t){e.na(r,null,t,n)})}(t,e):ke(new O("invalid-auth-event"))}else ke(new O("invalid-auth-event"))},$c.prototype.confirm=function(t){return t=Lo(this.verificationId,t),this.a(t)};var Jc="mfaInfo",Zc="mfaPendingCredential";function tl(t,e,n,r){O.call(this,"multi-factor-auth-required",r,e),this.b=new Xc(t,e,n),Yr(this,"resolver",this.b)}function el(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new tl(e,t.serverResponse,n,t.message)}catch(r){}return null}function nl(){}function rl(t){Yr(this,"factorId",t.fa),this.a=t}function il(t){if(rl.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new O("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ol(t,e){for(var n in Ye.call(this,t),e)this[n]=e[n]}function sl(t,e){this.a=t,this.b=[],this.c=w(this.yc,this),cn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&K(e.multiFactor.enrolledFactors,function(t){var e=null,r={};if(t){t.uid&&(r[ii]=t.uid),t.displayName&&(r[ni]=t.displayName),t.enrollmentTime&&(r[ri]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[oi]=t.phoneNumber);try{e=new si(r)}catch(i){}t=e}else t=null;t&&n.push(t)}),al(this,n)}function al(t,e){t.b=e,Yr(t,"enrolledFactors",e)}function ul(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function cl(t,e){t.stop(),t.b=On(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then(function(){return function(){var t=a.document,e=null;return Hr()||!t?Ce():new _e(function(n){e=function(){Hr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return t.h()}).then(function(){cl(t,!0)}).o(function(e){t.i(e)&&cl(t,!1)})}function ll(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function hl(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function fl(t,e){t.b=Hi(e[Ys]||""),t.a=e.refreshToken,hl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function dl(t,e){this.a=t||null,this.b=e||null,Xr(this,{lastSignInTime:Kr(e||null),creationTime:Kr(t||null)})}function pl(t,e,n,r,i,o){Xr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function gl(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=r.default.SDK_VERSION?kr(r.default.SDK_VERSION):null;this.a=new $s(this.l,j(k),i),t.emulatorConfig&&na(this.a,t.emulatorConfig),this.b=new ll(this.a),Tl(this,e[Ys]),fl(this.b,e),Yr(this,"refreshToken",this.b.a),Ol(this,n||{}),wn.call(this),this.R=!1,this.s&&jr()&&(this.i=Vc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new ul(function(){return t.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0})}(this),this.aa=w(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){na(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){vl(o,t.f)},this.ba=null,this.O=new sl(this,n),Yr(this,"multiFactor",this.O)}function ml(t,e){t.ja&&fn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&cn(e,"languageCodeChanged",t.Oa)}function yl(t,e){t.X&&fn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&cn(e,"emulatorConfigChanged",t.Aa)}function vl(t,e){t.$=e,ia(t.a,r.default.SDK_VERSION?kr(r.default.SDK_VERSION,t.$):null)}function bl(t,e){t.ba&&fn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&cn(e,"frameworkChanged",t.Ba)}function _l(t){try{return r.default.app(t.m).auth()}catch(e){throw new O("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function wl(t){t.D||t.u.b||(t.u.start(),fn(t,"tokenChanged",t.aa),cn(t,"tokenChanged",t.aa))}function El(t){fn(t,"tokenChanged",t.aa),t.u.stop()}function Tl(t,e){t.za=e,Yr(t,"_lat",e)}function Sl(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return xe(e).then(function(){return t})}function Il(t){t.i&&!t.R&&(t.R=!0,xc(t.i,t))}function Ol(t,e){Xr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new dl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Cl(){}function kl(t){return Ce().then(function(){if(t.D)throw new O("app-deleted")})}function Al(t){return W(t.providerData,function(t){return t.providerId})}function xl(t,e){e&&(Nl(t,e.providerId),t.providerData.push(e))}function Nl(t,e){Y(t.providerData,function(t){return t.providerId==e})}function jl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Yr(t,e,n)}function Pl(t,e){t!=e&&(Xr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Yr(t,"metadata",e.metadata?function(t){return new dl(t.a,t.b)}(e.metadata):new dl),K(e.providerData,function(e){xl(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Yr(t,"refreshToken",t.b.a),al(t.O,e.O.b))}function Rl(t){return t.I().then(function(e){var n=t.isAnonymous;return function(t,e){return tu(t.a,Na,{idToken:e}).then(w(t.Kc,t))}(t,e).then(function(){return n||jl(t,"isAnonymous",!1),e})})}function Dl(t,e){e[Ys]&&t.za!=e[Ys]&&(fl(t.b,e),t.dispatchEvent(new ol("tokenChanged")),Tl(t,e[Ys]),jl(t,"refreshToken",t.b.a))}function Ml(t,e){return Rl(t).then(function(){if($(Al(t),e))return Sl(t).then(function(){throw new O("provider-already-linked")})})}function Ll(t,e,n){return Jr({user:t,credential:Fo(e),additionalUserInfo:e=Qi(e),operationType:n})}function Fl(t,e){return Dl(t,e),t.reload().then(function(){return t})}function Ul(t,e,n,i,o){if(!jr())return ke(new O("operation-not-supported-in-this-environment"));if(t.h&&!o)return ke(t.h);var s=$i(n.providerId),a=Ur(t.uid+":::"),u=null;(!Dr()||_r())&&t.s&&n.isOAuthProvider&&(u=gu(t.s,t.l,t.m,e,n,null,a,r.default.SDK_VERSION||null,null,null,t.tenantId));var c=gr(u,s&&s.ua,s&&s.ta);return i=i().then(function(){if(ql(t),!o)return t.I().then(function(){})}).then(function(){return Rc(t.i,c,e,n,a,!!u,t.tenantId)}).then(function(){return new _e(function(n,r){t.na(e,null,new O("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Lc(t.i,t,e,c,a)})}).then(function(t){return c&&pr(c),t?Jr(t):null}).o(function(t){throw c&&pr(c),t}),Bl(t,i,o)}function Vl(t,e,n,r,i){if(!jr())return ke(new O("operation-not-supported-in-this-environment"));if(t.h&&!i)return ke(t.h);var o=null,s=Ur(t.uid+":::");return r=r().then(function(){if(ql(t),!i)return t.I().then(function(){})}).then(function(){return t.ga=s,Sl(t)}).then(function(e){return t.ha&&(e=(e=t.ha).b.set(zl,t.w(),e.a)),e}).then(function(){return Mc(t.i,e,n,s,t.tenantId)}).o(function(e){if(o=e,t.ha)return Wl(t.ha);throw o}).then(function(){if(o)throw o}),Bl(t,r,i)}function ql(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new O("internal-error");throw new O("auth-domain-config-required")}}function Bl(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),ke(t.h)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new ol("userInvalidated")),t.h=e),e})}(t,e,n);return t.J.push(r),r.oa(function(){Q(t.J,r)}),r.o(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=el(e.w(),_l(t),w(t.jc,t))),n||e})}function Hl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ys]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new gl(e,n,t);return t.providerData&&K(t.providerData,function(t){t&&xl(i,Jr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Kl(t){this.a=t,this.b=Ju()}Xc.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then(function(t){var n=gt(e.f);return delete n[Jc],delete n[Zc],yt(n,t),e.g(n)})},S(tl,O),nl.prototype.sb=function(t,e,n){return e.type==so?function(t,e,n,r){return n.Ha().then(function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),yt(n,{phoneVerificationInfo:Do(t.a)}),tu(e,Aa,n)})}(this,t,e,n):function(t,e,n){return n.Ha().then(function(n){return yt(n={mfaPendingCredential:n},{phoneVerificationInfo:Do(t.a)}),tu(e,xa,n)})}(this,t,e)},S(rl,nl),S(il,rl),S(ol,Ye),(t=sl.prototype).yc=function(t){al(this,function(t){var e=[];return K(t.mfaInfo||[],function(t){(t=ei(t))&&e.push(t)}),e}(t.hd))},t.Rb=function(){return this.a.I().then(function(t){return new oo(t,null)})},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then(function(n){return t.sb(r,n,e)}).then(function(t){return Dl(n.a,t),n.a.reload()})},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then(function(t){return tu(r,Za,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var r=z(e.b,function(t){return t.uid!=n});return al(e,r),Dl(e.a,t),e.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:W(this.b,function(t){return t.w()})}}},ul.prototype.start=function(){this.a=this.c,cl(this,!0)},ul.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ll.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ll.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ke(new O("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new _e(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?oa(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(nu(t)):t.access_token&&t.refresh_token?n(t):r(new O("internal-error")):r(new O("network-request-failed"))},"POST",Xn(e).toString(),t.g,t.m.get()):r(new O("internal-error"))})}(t.f,e).then(function(e){return t.b=Hi(e.access_token),t.a=e.refresh_token,hl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ce(null):Ce({accessToken:this.b.toString(),refreshToken:this.a})},dl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(gl,wn),gl.prototype.wa=function(t){this.ya=t,ea(this.a,t)},gl.prototype.la=function(){return this.ya},gl.prototype.Ga=function(){return J(this.$)},gl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Yr(gl.prototype,"providerId","firebase"),(t=gl.prototype).reload=function(){var t=this;return Bl(this,kl(this).then(function(){return Rl(t).then(function(){return Sl(t)}).then(Cl)}))},t.oc=function(t){return this.I(t).then(function(t){return new Yc(t)})},t.I=function(t){var e=this;return Bl(this,kl(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new O("internal-error");return t.accessToken!=e.za&&(Tl(e,t.accessToken),e.dispatchEvent(new ol("tokenChanged"))),jl(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new O("internal-error");Ol(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,function(t){return new pl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)xl(this,e[n]);jl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ol("userReloaded",{hd:t}))},t.Lc=function(t){return $r("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Bl(this,t.c(this.a,this.uid).then(function(t){return Dl(e,t),n=Ll(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return $r("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Bl(this,Ml(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Ll(e,t,"link"),Fl(e,t)}).then(function(){return n}))},t.Dc=function(t,e){var n=this;return Bl(this,Ml(this,"phone").then(function(){return Qc(_l(n),t,e,w(n.qb,n))}))},t.Mc=function(t,e){var n=this;return Bl(this,Ce().then(function(){return Qc(_l(n),t,e,w(n.tb,n))}),!0)},t.Bb=function(t){var e=this;return Bl(this,this.I().then(function(n){return e.a.Bb(n,t)}).then(function(t){return Dl(e,t),e.reload()}))},t.ed=function(t){var e=this;return Bl(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return Dl(e,t),e.reload()}))},t.Cb=function(t){var e=this;return Bl(this,this.I().then(function(n){return e.a.Cb(n,t)}).then(function(t){return Dl(e,t),e.reload()}))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return kl(this);var e=this;return Bl(this,this.I().then(function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Dl(e,t),jl(e,"displayName",t.displayName||null),jl(e,"photoURL",t.photoUrl||null),K(e.providerData,function(t){"password"===t.providerId&&(Yr(t,"displayName",e.displayName),Yr(t,"photoURL",e.photoURL))}),Sl(e)}).then(Cl))},t.cd=function(t){var e=this;return Bl(this,Rl(this).then(function(n){return $(Al(e),t)?function(t,e,n){return tu(t,Oa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return K(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),K(Al(e),function(t){n[t]||Nl(e,t)}),n[Mo.PROVIDER_ID]||Yr(e,"phoneNumber",null),Sl(e)}):Sl(e).then(function(){throw new O("no-such-provider")})}))},t.delete=function(){var t=this;return Bl(this,this.I().then(function(e){return tu(t.a,Ia,{idToken:e})}).then(function(){t.dispatchEvent(new ol("userDeleted"))})).then(function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");ml(t,null),yl(t,null),bl(t,null),t.J=[],t.D=!0,El(t),Yr(t,"refreshToken",null),t.i&&Nc(t.i,t)})},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?w(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?w(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?w(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?w(this.Lb,this):null},t.Ec=function(t){var e=this;return Ul(this,"linkViaPopup",t,function(){return Ml(e,t.providerId).then(function(){return Sl(e)})},!1)},t.Nc=function(t){return Ul(this,"reauthViaPopup",t,function(){return Ce()},!0)},t.Fc=function(t){var e=this;return Vl(this,"linkViaRedirect",t,function(){return Ml(e,t.providerId)},!1)},t.Oc=function(t){return Vl(this,"reauthViaRedirect",t,function(){return Ce()},!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Bl(this,this.I().then(function(n){return va(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=Ll(i,t,"link"),Fl(i,t)}).then(function(){return o}))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Bl(this,Ce().then(function(){return co(ba(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Ll(i,t,"reauthenticate"),Dl(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.ub=function(t){var e=this,n=null;return Bl(this,this.I().then(function(e){return n=e,void 0===t||pt(t)?{}:Vi(new xi(t))}).then(function(t){return e.a.ub(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.Eb=function(t,e){var n=this,r=null;return Bl(this,this.I().then(function(t){return r=t,void 0===e||pt(e)?{}:Vi(new xi(e))}).then(function(e){return n.a.Eb(r,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return Bl(this,t=co(Ce(t),n.uid).then(function(t){return e=Ll(n,t,"reauthenticate"),Dl(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&yt(t,this.metadata.w()),K(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),yt(t,this.O.w()),t};var zl={name:"redirectUser",F:"session"};function Wl(t){return ec(t.b,zl,t.a)}function Gl(t){this.a=t,this.b=Ju(),this.c=null,this.f=function(t){var e=Yl("local"),n=Yl("session"),r=Yl("none");return function(t,e,n){var r=tc(e,n),i=Zu(t,e.F);return t.get(e,n).then(function(o){var s=null;try{s=Fr(a.localStorage.getItem(r))}catch(u){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Ql,t.a).then(function(t){return t?Yl(t):e})})})}).then(function(e){return t.c=e,$l(t,e.F)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener(Yl("local"),this.a,w(this.g,this))}function $l(t,e){var n,r=[];for(n in Yu)Yu[n]!==e&&r.push(ec(t.b,Yl(Yu[n]),t.a));return r.push(ec(t.b,Ql,t.a)),function(t){return new _e(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Ae(t[a],E(o,a),s);else e(i)})}(r)}Gl.prototype.g=function(){var t=this,e=Yl("local");th(this,function(){return Ce().then(function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null}).then(function(n){if(n)return $l(t,"local").then(function(){t.c=e})})})};var Ql={name:"persistence",F:"session"};function Yl(t){return{name:"authUser",F:t}}function Xl(t,e){return th(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Jl(t){return th(t,function(){return ec(t.b,t.c,t.a)})}function Zl(t,e,n){return th(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Hl(t||{})})})}function th(t,e){return t.f=t.f.then(e,e),t.f}function eh(t){if(this.l=!1,Yr(this,"settings",new Gc),Yr(this,"app",t),!ch(this).options||!ch(this).options.apiKey)throw new O("invalid-api-key");t=r.default.SDK_VERSION?kr(r.default.SDK_VERSION):null,this.a=new $s(ch(this).options&&ch(this).options.apiKey,j(k),t),this.R=[],this.s=[],this.O=[],this.hb=r.default.INTERNAL.createSubscribe(w(this.zc,this)),this.X=void 0,this.bc=r.default.INTERNAL.createSubscribe(w(this.Ac,this)),ah(this,null),this.i=new Gl(ch(this).options.apiKey+":"+ch(this).name),this.D=new Kl(ch(this).options.apiKey+":"+ch(this).name),this.$=dh(this,function(t){var e=ch(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(zl,t.a).then(function(t){return t&&e&&(t.authDomain=e),Hl(t||{})})}(t.D,ch(t).options.authDomain).then(function(e){return(t.m=e)&&(e.ha=t.D),Wl(t.D)});return dh(t,e)}(t).then(function(){return Zl(t.i,e,t.P)}).then(function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Xl(t.i,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:Jl(t.i)})):null}).then(function(e){ah(t,e||null)});return dh(t,n)}(this)),this.h=dh(this,function(t){return t.$.then(function(){return sh(t)}).o(function(){}).then(function(){if(!t.l)return t.ja()}).o(function(){}).then(function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Yl("local"),e.a,t.ja)}})}(this)),this.ba=!1,this.ja=w(this.Zc,this),this.Ba=w(this.da,this),this.ya=w(this.mc,this),this.za=w(this.wc,this),this.Aa=w(this.xc,this),this.b=null,function(t){var e=ch(t).options.authDomain,n=ch(t).options.apiKey;e&&jr()&&(t.Oa=t.$.then(function(){if(!t.l){if(t.b=Vc(e,n,ch(t).name,t.P),xc(t.b,t),lh(t)&&Il(lh(t)),t.m){Il(t.m);var r=t.m;r.wa(t.la()),ml(r,t),vl(r=t.m,t.J),bl(r,t),na((r=t.m).a,t.P),yl(r,t),t.m=null}return t.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Gc,this),this.u=0,wn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Un(this.P.url);t=Jr({protocol:t.c,host:t.a,port:t.g,options:Jr({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function nh(t){Ye.call(this,"languageCodeChanged"),this.h=t}function rh(t){Ye.call(this,"emulatorConfigChanged"),this.c=t}function ih(t){Ye.call(this,"frameworkChanged"),this.f=t}function oh(t){return t.Oa||ke(new O("auth-domain-config-required"))}function sh(t){if(!jr())return ke(new O("operation-not-supported-in-this-environment"));var e=oh(t).then(function(){return t.b.qa()}).then(function(t){return t?Jr(t):null});return dh(t,e)}function ah(t,e){lh(t)&&(function(t,e){Y(t.S,function(t){return t==e})}(lh(t),t.Ba),fn(lh(t),"tokenChanged",t.ya),fn(lh(t),"userDeleted",t.za),fn(lh(t),"userInvalidated",t.Aa),El(lh(t))),e&&(e.S.push(t.Ba),cn(e,"tokenChanged",t.ya),cn(e,"userDeleted",t.za),cn(e,"userInvalidated",t.Aa),0<t.u&&wl(e)),Yr(t,"currentUser",e),e&&(e.wa(t.la()),ml(e,t),vl(e,t.J),bl(e,t),na(e.a,t.P),yl(e,t))}function uh(t,e){var n=null,r=null;return dh(t,e.then(function(e){return n=Fo(e),r=Qi(e),function(t,e){var n={};return n.apiKey=ch(t).options.apiKey,n.authDomain=ch(t).options.authDomain,n.appName=ch(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then(function(){return function(t,e,n,r){var i=new gl(t,e);return n&&(i.ha=n),r&&vl(i,r),i.reload().then(function(){return i})}(n,e,t.D,t.Ga())}).then(function(e){return lh(t)&&e.uid==lh(t).uid?(Pl(lh(t),e),t.da(e)):(ah(t,e),Il(e),t.da(e))}).then(function(){fh(t)})}(t,e)},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=el(e.w(),t,w(t.kc,t))),n||e}).then(function(){return Jr({user:lh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function ch(t){return t.app}function lh(t){return t.currentUser}function hh(t){return lh(t)&&lh(t)._lat||null}function fh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](hh(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](hh(t))}}function dh(t,e){return t.R.push(e),e.oa(function(){Q(t.R,e)}),e}function ph(){}function gh(){this.a={},this.b=1e12}Gl.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new O("invalid-persistence-type"),n=new O("unsupported-persistence-type");t:{for(r in Yu)if(Yu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Er()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Au()&&"none"!==t)throw n;break;default:if(!Nr()&&"none"!==t)throw n}}(t),th(this,function(){return t!=n.c.F?n.b.get(n.c,n.a).then(function(r){return e=r,$l(n,t)}).then(function(){if(n.c=Yl(t),e)return n.b.set(n.c,e,n.a)}):Ce()})},S(eh,wn),S(nh,Ye),S(rh,Ye),S(ih,Ye),(t=eh.prototype).xb=function(t){return dh(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,ea(this.a,this.aa),this.dispatchEvent(new nh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new O("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&vr().then(function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)})})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,na(this.a,this.P),this.dispatchEvent(new rh(this.P))}},t.Gc=function(t){this.J.push(t),ia(this.a,r.default.SDK_VERSION?kr(r.default.SDK_VERSION,this.J):null),this.dispatchEvent(new ih(this.J))},t.Ga=function(){return J(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:ch(this).options.apiKey,authDomain:ch(this).options.authDomain,appName:ch(this).name,currentUser:lh(this)&&lh(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?w(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return uh(i,ya(i.a,o))})},t.Xc=function(t){if(!jr())return ke(new O("operation-not-supported-in-this-environment"));var e=this,n=$i(t.providerId),i=Ur(),o=null;(!Dr()||_r())&&ch(this).options.authDomain&&t.isOAuthProvider&&(o=gu(ch(this).options.authDomain,ch(this).options.apiKey,ch(this).name,"signInViaPopup",t,null,i,r.default.SDK_VERSION||null,null,null,this.T(),this.P));var s=gr(o,n&&n.ua,n&&n.ta);return dh(this,n=oh(this).then(function(n){return Rc(n,s,"signInViaPopup",t,i,!!o,e.T())}).then(function(){return new _e(function(t,n){e.na("signInViaPopup",null,new O("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=i,e.c=Lc(e.b,e,"signInViaPopup",s,i)})}).then(function(t){return s&&pr(s),t?Jr(t):null}).o(function(t){throw s&&pr(s),t}))},t.Yc=function(t){if(!jr())return ke(new O("operation-not-supported-in-this-environment"));var e=this;return dh(this,oh(this).then(function(){return function(t){return th(t,function(){return t.b.set(Ql,t.c.F,t.a)})}(e.i)}).then(function(){return Mc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.qa=function(){var t=this;return sh(this).then(function(e){return t.b&&Hc(t.b.b),e}).o(function(e){throw t.b&&Hc(t.b.b),e})},t.dd=function(t){if(!t)return ke(new O("null-user"));if(this.S!=t.tenantId)return ke(new O("tenant-id-mismatch"));var e=this,n={};n.apiKey=ch(this).options.apiKey,n.authDomain=ch(this).options.authDomain,n.appName=ch(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Ys]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new gl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&vl(e,r),Pl(e,t),e}(t,n,e.D,e.Ga());return dh(this,this.h.then(function(){if(ch(e).options.apiKey!=t.l)return r.reload()}).then(function(){return lh(e)&&t.uid==lh(e).uid?(Pl(lh(e),t),e.da(t)):(ah(e,r),Il(r),e.da(r))}).then(function(){fh(e)}))},t.Ab=function(){var t=this;return dh(this,this.h.then(function(){return t.b&&Hc(t.b.b),lh(t)?(ah(t,null),Jl(t.i).then(function(){fh(t)})):Ce()}))},t.Zc=function(){var t=this;return Zl(this.i,ch(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=lh(t)&&e){n=lh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Pl(lh(t),e),lh(t).I();(lh(t)||e)&&(ah(t,e),e&&(Il(e),e.ha=t.D),t.b&&xc(t.b,t),fh(t))}})},t.da=function(t){return Xl(this.i,t)},t.mc=function(){fh(this),this.da(lh(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then(function(){return uh(e,Ce(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(lh(e))})},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),dh(t,t.h.then(function(){!t.l&&$(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(hh(t)))}))}(this,function(){t.next(lh(e))})},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(lh(r)):"function"==typeof t.next&&t.next(lh(r))}),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(lh(r)):"function"==typeof t.next&&t.next(lh(r))}),this.bc(t,e,n)},t.nc=function(t){var e=this;return dh(this,this.h.then(function(){return lh(e)?lh(e).I(t).then(function(t){return{accessToken:t}}):null}))},t.Tc=function(t){var e=this;return this.h.then(function(){return uh(e,tu(e.a,$a,{token:t}))}).then(function(t){var n=t.user;return jl(n,"isAnonymous",!1),e.da(n),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return uh(n,tu(n.a,Qa,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return uh(n,tu(n.a,Ta,{email:t,password:e}))})},t.$a=function(t){var e=this;return this.h.then(function(){return uh(e,t.ka(e.a))})},t.Sc=function(t){return $r("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then(function(){var e=lh(t);if(e&&e.isAnonymous){var n=Jr({providerId:null,isNewUser:!1});return Jr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return uh(t,t.a.zb()).then(function(e){var n=e.user;return jl(n,"isAnonymous",!0),t.da(n),e})})},t.getUid=function(){return lh(this)&&lh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&lh(this)&&wl(lh(this))},t.Pc=function(t){var e=this;K(this.s,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&lh(this)&&El(lh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),dh(this,this.h.then(function(){e.l||$(e.s,t)&&t(hh(e))}))},t.removeAuthTokenListener=function(t){Y(this.s,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Yl("local"),t.a,this.ja),this.b&&(Nc(this.b,this),Hc(this.b.b)),Promise.resolve()},t.hc=function(t){return dh(this,function(t,e){return tu(t,Sa,{identifier:e,continueUri:Pr()?lr():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.a,t))},t.Bc=function(t){return!!jo(t)},t.wb=function(t,e){var n=this;return dh(this,Ce().then(function(){var t=new xi(e);if(!t.c)throw new O("argument-error",Pi+" must be true when sending sign in link to email");return Vi(t)}).then(function(e){return n.a.wb(t,e)}).then(function(){}))},t.jd=function(t){return this.Ra(t).then(function(t){return t.data.email})},t.nb=function(t,e){return dh(this,this.a.nb(t,e).then(function(){}))},t.Ra=function(t){return dh(this,this.a.Ra(t).then(function(t){return new ai(t)}))},t.jb=function(t){return dh(this,this.a.jb(t).then(function(){}))},t.vb=function(t,e){var n=this;return dh(this,Ce().then(function(){return void 0===e||pt(e)?{}:Vi(new xi(e))}).then(function(e){return n.a.vb(t,e)}).then(function(){}))},t.Wc=function(t,e){return dh(this,Qc(this,t,e,w(this.$a,this)))},t.Vc=function(t,e){var n=this;return dh(this,Ce().then(function(){var r=e||lr(),i=No(t,r);if(!(r=jo(r)))throw new O("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new O("tenant-id-mismatch");return n.$a(i)}))},ph.prototype.render=function(){},ph.prototype.reset=function(){},ph.prototype.getResponse=function(){},ph.prototype.execute=function(){};var mh=null;function yh(t,e){return(e=vh(e))&&t.a[e]||null}function vh(t){return(t=void 0===t?1e12:t)?t.toString():null}function bh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():cn(this.f,"click",this.i)}function _h(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function wh(){}function Eh(){}gh.prototype.render=function(t,e){return this.a[this.b.toString()]=new bh(t,e),this.b++},gh.prototype.reset=function(t){var e=yh(this,t);t=vh(t),e&&t&&(e.delete(),delete this.a[t])},gh.prototype.getResponse=function(t){return(t=yh(this,t))?t.getResponse():null},gh.prototype.execute=function(t){(t=yh(this,t))&&t.execute()},bh.prototype.getResponse=function(){return _h(this),this.b},bh.prototype.execute=function(){_h(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},bh.prototype.delete=function(){_h(this),this.g=!0,clearTimeout(this.a),this.a=null,fn(this.f,"click",this.i)},Yr(wh,"FACTOR_ID","phone"),Eh.prototype.g=function(){return mh||(mh=new gh),Ce(mh)},Eh.prototype.c=function(){};var Th=null;function Sh(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ih=new bt(Tt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Oh=new Br(3e4,6e4);Sh.prototype.g=function(t){var e=this;return new _e(function(n,r){var i=setTimeout(function(){r(new O("network-request-failed"))},Oh.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new O("internal-error"));delete a[e.a]},Ce(qs(Ct(Ih,{onload:e.a,hl:t||""}))).o(function(){clearTimeout(i),r(new O("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(a.grecaptcha))})},Sh.prototype.c=function(){this.b--};var Ch=null;function kh(t,e,n,r,i,o,s){if(Yr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s?(Th||(Th=new Eh),s=Th):(Ch||(Ch=new Sh),s=Ch),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Nh])throw new O("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[jh],!a.document)throw new O("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new O("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new $s(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ah];this.a[Ah]=function(t){if(Ph(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=xr(c,a);"function"==typeof e&&e(t)}};var l=this.a[xh];this.a[xh]=function(){if(Ph(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=xr(l,a);"function"==typeof t&&t()}}}var Ah="callback",xh="expired-callback",Nh="sitekey",jh="size";function Ph(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Rh(t,e){return t.h.push(e),e.oa(function(){Q(t.h,e)}),e}function Dh(t){if(t.D)throw new O("internal-error","RecaptchaVerifier instance has been destroyed.")}function Mh(t,e,n){var i=!1;try{this.b=n||r.default.app()}catch(a){throw new O("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new O("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(a){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}s=r.default.SDK_VERSION?kr(r.default.SDK_VERSION,s):null,kh.call(this,n,t,e,function(){try{var t=o.b.auth().la()}catch(e){t=null}return t},s,j(k),i)}function Lh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new O("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Fh.length)throw new O("internal-error","Argument validator received an unsupported number of arguments.");n=Fh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new O("argument-error",t+" failed: "+r)}(t=kh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Rh(this,Ce().then(function(){if(Pr()&&!wr())return vr();throw new O("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.u())}).then(function(e){return t.g=e,tu(t.s,La,{})}).then(function(e){t.a[Nh]=e.recaptchaSiteKey}).o(function(e){throw t.f=null,e}))},t.render=function(){Dh(this);var t=this;return Rh(this,this.Ia().then(function(){if(null===t.c){var e=t.v;if(!t.i){var n=ue(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ae&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Kt(s.name),'"'),s.type){o.push(' type="',Kt(s.type),'"');var a={};yt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=pe(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ce(o,s)),2<r.length&&de(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Dh(this);var t=this;return Rh(this,this.render().then(function(e){return new _e(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Dh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Dh(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},S(Mh,kh);var Fh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Uh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Vh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function qh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function Bh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Hh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Kh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.ka||t&&e.providerId!==t)}}}function zh(t,e){return g(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Wh(t){return g(t)&&"string"==typeof t.uid}function Gh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function $h(t,e){for(var n in e){var r=e[n].name;t[r]=Xh(r,t[n],e[n].j)}}function Qh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E(function(t){return this[t]},n),set:E(function(t,e,n,r){Lh(t,[n],[r],!0),this[e]=r},r,n,e[n].kb),enumerable:!0})}}function Yh(t,e,n,r){t[e]=Xh(e,n,r)}function Xh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Lh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}$h(eh.prototype,{jb:{name:"applyActionCode",j:[Uh("code")]},Ra:{name:"checkActionCode",j:[Uh("code")]},nb:{name:"confirmPasswordReset",j:[Uh("code"),Uh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Uh("email"),Uh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Uh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Uh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Gh(qh(),Bh(),"nextOrObserver"),Bh("opt_error",!0),Bh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Gh(qh(),Bh(),"nextOrObserver"),Bh("opt_error",!0),Bh("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Uh("email"),Gh(qh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Uh("email"),qh("actionCodeSettings")]},xb:{name:"setPersistence",j:[Uh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Kh()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Kh()]},Tc:{name:"signInWithCustomToken",j:[Uh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Uh("email"),Uh("password")]},Vc:{name:"signInWithEmailLink",j:[Uh("email"),Uh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Gh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof gl)}},Hh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Uh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Uh("url"),qh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Uh("code")]}}),Qh(eh.prototype,{lc:{name:"languageCode",kb:Gh(Uh(),Hh(),"languageCode")},ti:{name:"tenantId",kb:Gh(Uh(),Hh(),"tenantId")}}),(eh.Persistence=Yu).LOCAL="local",eh.Persistence.SESSION="session",eh.Persistence.NONE="none",$h(gl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Vh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Vh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Kh()]},qb:{name:"linkWithCredential",j:[Kh()]},Dc:{name:"linkWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Kh()]},tb:{name:"reauthenticateWithCredential",j:[Kh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Gh(qh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Uh(null,!0)]},cd:{name:"unlink",j:[Uh("provider")]},Bb:{name:"updateEmail",j:[Uh("email")]},Cb:{name:"updatePassword",j:[Uh("password")]},ed:{name:"updatePhoneNumber",j:[Kh("phone")]},Db:{name:"updateProfile",j:[qh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Uh("email"),Gh(qh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]}}),$h(gh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$h(ph.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$h(_e.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Qh(Gc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Vh("appVerificationDisabledForTesting")}}),$h($c.prototype,{confirm:{name:"confirm",j:[Uh("verificationCode")]}}),Yh(uo,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[mo,Ao,Ro,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Gh(Uh(),qh(),"json")]),Yh(xo,"credential",function(t,e){return new ko(t,e)},[Uh("email"),Uh("password")]),$h(ko.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),$h(_o.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(_o,"credential",wo,[Gh(Uh(),qh(),"token")]),Yh(xo,"credentialWithLink",No,[Uh("email"),Uh("emailLink")]),$h(Eo.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(Eo,"credential",To,[Gh(Uh(),qh(),"token")]),$h(So.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(So,"credential",Io,[Gh(Uh(),Gh(qh(),Hh()),"idToken"),Gh(Uh(),Hh(),"accessToken",!0)]),$h(Oo.prototype,{Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(Oo,"credential",Co,[Gh(Uh(),qh(),"token"),Uh("secret",!0)]),$h(bo.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},credential:{name:"credential",j:[Gh(Uh(),Gh(qh(),Hh()),"optionsOrIdToken"),Gh(Uh(),Hh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),$h(po.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),$h(lo.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(Mo,"credential",Lo,[Uh("verificationId"),Uh("verificationCode")]),$h(Mo.prototype,{fb:{name:"verifyPhoneNumber",j:[Gh(Uh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?zh(t.session,so)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?zh(t.session,ao)&&Wh(t.multiFactorHint):t.session&&t.multiFactorUid?zh(t.session,ao)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),$h(Po.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),$h(O.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),$h(Wo.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),$h(zo.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),$h(tl.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),$h(Xc.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),$h(sl.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Uh("displayName",!0)]},bd:{name:"unenroll",j:[Gh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Wh},Uh(),"multiFactorInfoIdentifier")]}}),$h(Mh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Yh(wi,"parseLink",Ai,[Uh("link")]),Yh(wh,"assertion",function(t){return new il(t)},[Kh("phone")]),function(){if(void 0===r.default||!r.default.INTERNAL||!r.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ci,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ui,VERIFY_AND_CHANGE_EMAIL:li,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:eh,AuthCredential:uo,Error:O};Yh(t,"EmailAuthProvider",xo,[]),Yh(t,"FacebookAuthProvider",_o,[]),Yh(t,"GithubAuthProvider",Eo,[]),Yh(t,"GoogleAuthProvider",So,[]),Yh(t,"TwitterAuthProvider",Oo,[]),Yh(t,"OAuthProvider",bo,[Uh("providerId")]),Yh(t,"SAMLAuthProvider",vo,[Uh("providerId")]),Yh(t,"PhoneAuthProvider",Mo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof eh)}}]),Yh(t,"RecaptchaVerifier",Mh,[Gh(Uh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),qh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof r.default.app.App)}}]),Yh(t,"ActionCodeURL",wi,[]),Yh(t,"PhoneMultiFactorGenerator",wh,[]),r.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new eh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),r.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:w((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:w(t.nc,t),addAuthTokenListener:w(t.cc,t),removeAuthTokenListener:w(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.default.registerVersion("@firebase/auth","0.16.5"),r.default.INTERNAL.extendNamespace({User:gl})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";n.r(e),n.d(e,"firebase",function(){return _});var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.ErrorFactory("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Logger("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.deepCopy)(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.contains)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.Component(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.setUserLogHandler)(t,e)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.contains)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.deepExtend)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.__assign)(Object(o.__assign)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.deepExtend)(e,t)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.isBrowser)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.isNode)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=m;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.22",void 0),t.registerVersion("fire-js","")}(_),e.default=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Vb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(s))},t.\u0275prov=Object(r.Ib)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l(Object(r.Vb)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=Object(r.Vb)(s).location;return new b(Object(r.Vb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let b=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(a),r.Vb(v,8))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(a),r.Vb(v,8))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(T(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,T(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(m),r.Vb(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Ib)({factory:E,token:t,providedIn:"root"}),t})();function E(){return new w(Object(r.Vb)(m),Object(r.Vb)(a))}function T(t){return t.replace(/\/index.html$/,"")}var S=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const I=r.ob;class O{}let C=(()=>{class t extends O{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(I(e||this.locale)(t)){case S.Zero:return"zero";case S.One:return"one";case S.Two:return"two";case S.Few:return"few";case S.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(r.v))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();function k(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class A{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let x=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new A(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new N(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new N(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.R),r.Mb(r.M),r.Mb(r.t))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class N{constructor(t,e){this.record=t,this.view=e}}let j=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new P,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){R("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){R("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.R),r.Mb(r.M))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class P{constructor(){this.$implicit=null,this.ngIf=null}}function R(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.xb)(e)}'.`)}class D{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let M=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),L=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new D(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.R),r.Mb(r.M),r.Mb(M,9))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})();class F{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class U{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const V=new U,q=new F;let B=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Object(r.tb)(e))return V;if(Object(r.ub)(e))return q;throw n=t,Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.xb)(n)}'`);var n}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Xb())},t.\u0275pipe=r.Lb({name:"async",type:t,pure:!1}),t})(),H=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[{provide:O,useClass:C}]}),t})();function K(t){return"server"===t}let z=(()=>{class t{}return t.\u0275prov=Object(r.Ib)({token:t,providedIn:"root",factory:()=>new W(Object(r.Vb)(s),window)}),t})();class W{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=G(this.window.history)||G(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function G(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class $ extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new $,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Y||(Y=document.querySelector("base"),Y)?Y.getAttribute("href"):null;return null==e?null:(n=e,Q||(Q=document.createElement("a")),Q.setAttribute("href",n),"/"===Q.pathname.charAt(0)?Q.pathname:"/"+Q.pathname);var n}resetBaseElement(){Y=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return k(document.cookie,t)}}let Q,Y=null;const X=new r.r("TRANSITION_ID"),J=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[X,s,r.s],multi:!0}];class Z{static init(){Object(r.Y)(new Z)}addToWindow(t){r.qb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.qb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.qb.getAllAngularRootElements=()=>t.getAllRootElements(),r.qb.frameworkStabilizers||(r.qb.frameworkStabilizers=[]),r.qb.frameworkStabilizers.push(t=>{const e=r.qb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const tt=new r.r("EventManagerPlugins");let et=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(tt),r.Vb(r.A))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class nt{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let rt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),it=(()=>{class t extends rt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(ot),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ot))}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();function ot(t){o().remove(t)}const st={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},at=/%COMP%/g;function ut(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?ut(t,i,n):(i=i.replace(at,t),n.push(i))}return n}function ct(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let lt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ht(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.S.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new ft(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.S.ShadowDom:return new dt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=ut(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(et),r.Vb(it),r.Vb(r.c))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class ht{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(st[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=st[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=st[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.H.DashCase|r.H.Important)?t.style.setProperty(e,n,i&r.H.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.H.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ct(n)):this.eventManager.addEventListener(t,e,ct(n))}}class ft extends ht{constructor(t,e,n,r){super(t),this.component=n;const i=ut(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(at,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(at,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class dt extends ht{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=ut(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let pt=(()=>{class t extends nt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const gt=["alt","control","meta","shift"],mt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},vt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let bt=(()=>{class t extends nt{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(gt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&yt.hasOwnProperty(e)&&(e=yt[e]))}return mt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),gt.forEach(r=>{r!=n&&(0,vt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const _t=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){$.makeCurrent(),Z.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.wb)(document),document},deps:[]}],wt=Object(r.T)(r.X,"browser",_t),Et=[[],{provide:r.ab,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:tt,useClass:pt,multi:!0,deps:[s,r.A,r.C]},{provide:tt,useClass:bt,multi:!0,deps:[s]},[],{provide:lt,useClass:lt,deps:[et,it,r.c]},{provide:r.G,useExisting:lt},{provide:rt,useExisting:it},{provide:it,useClass:it,deps:[s]},{provide:r.N,useClass:r.N,deps:[r.A]},{provide:et,useClass:et,deps:[tt,r.A]},[]];let Tt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:X,useExisting:r.c},J]}}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(t,12))},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:Et,imports:[H,r.f]}),t})();"undefined"!=typeof window&&window;var St=n("LRne"),It=n("HDdC"),Ot=n("5+tZ");function Ct(t,e){return Object(Ot.a)(t,e,1)}var kt=n("7o/Q");function At(t,e){return function(n){return n.lift(new xt(t,e))}}class xt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Nt(t,this.predicate,this.thisArg))}}class Nt extends kt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var jt=n("lJxs");class Pt{}class Rt{}class Dt{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Dt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Dt;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Dt?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Mt{encodeKey(t){return Lt(t)}encodeValue(t){return Lt(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Lt(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Ft{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Mt,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Ft({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function Ut(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Vt(t){return"undefined"!=typeof Blob&&t instanceof Blob}function qt(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Bt{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Dt),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Ft,this.urlWithParams=e}serializeBody(){return null===this.body?null:Ut(this.body)||Vt(this.body)||qt(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ft?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||qt(this.body)?null:Vt(this.body)?this.body.type||null:Ut(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ft?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new Bt(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var Ht=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Kt{constructor(t,e=200,n="OK"){this.headers=t.headers||new Dt,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class zt extends Kt{constructor(t={}){super(t),this.type=Ht.ResponseHeader}clone(t={}){return new zt({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Wt extends Kt{constructor(t={}){super(t),this.type=Ht.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Wt({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Gt extends Kt{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function $t(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Qt=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Bt)r=t;else{let i,o;i=n.headers instanceof Dt?n.headers:new Dt(n.headers),n.params&&(o=n.params instanceof Ft?n.params:new Ft({fromObject:n.params})),r=new Bt(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(St.a)(r).pipe(Ct(t=>this.handler.handle(t)));if(t instanceof Bt||"events"===n.observe)return i;const o=i.pipe(At(t=>t instanceof Wt));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(jt.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(jt.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(jt.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(jt.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Ft).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,$t(n,e))}post(t,e,n={}){return this.request("POST",t,$t(n,e))}put(t,e,n={}){return this.request("PUT",t,$t(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(Pt))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class Yt{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Xt=new r.r("HTTP_INTERCEPTORS");let Jt=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const Zt=/^\)\]\}',?\n/;class te{}let ee=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),ne=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new It.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new Dt(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new zt({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(Zt,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new Wt({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Gt({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Gt({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:Ht.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:Ht.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:Ht.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(te))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const re=new r.r("XSRF_COOKIE_NAME"),ie=new r.r("XSRF_HEADER_NAME");class oe{}let se=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=k(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(s),r.Vb(r.C),r.Vb(re))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),ae=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(oe),r.Vb(ie))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),ue=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Xt,[]);this.chain=t.reduceRight((t,e)=>new Yt(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(Rt),r.Vb(r.s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),ce=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:ae,useClass:Jt}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:re,useValue:e.cookieName}:[],e.headerName?{provide:ie,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[ae,{provide:Xt,useExisting:ae,multi:!0},{provide:oe,useClass:se},{provide:re,useValue:"XSRF-TOKEN"},{provide:ie,useValue:"X-XSRF-TOKEN"}]}),t})(),le=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[Qt,{provide:Pt,useClass:ue},ne,{provide:Rt,useExisting:ne},ee,{provide:te,useExisting:ee}],imports:[[ce.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var he=n("Cfvw"),fe=n("XNiG"),de=n("9ppp");class pe extends fe.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new de.a;return this._value}next(t){super.next(this._value=t)}}var ge=n("z+Ro"),me=n("DH7j");class ye extends kt.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class ve extends kt.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var be=n("SeVD");function _e(t,e,n,r,i=new ve(t,n,r)){if(!i.closed)return e instanceof It.a?e.subscribe(i):Object(be.a)(e)(i)}var we=n("yCtX");const Ee={};class Te{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Se(t,this.resultSelector))}}class Se extends ye{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Ee),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(_e(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Ee?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Ie=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Oe=n("bHdf");function Ce(...t){return Object(Oe.a)(1)(Object(St.a)(...t))}var ke=n("EY2u");function Ae(t){return new It.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(he.a)(n):Object(ke.b)()).subscribe(e)})}var xe=n("EQ5u"),Ne=n("zx2A");function je(t,e){return"function"==typeof e?n=>n.pipe(je((n,r)=>Object(he.a)(t(n,r)).pipe(Object(jt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Pe(t))}class Pe{constructor(t){this.project=t}call(t,e){return e.subscribe(new Re(t,this.project))}}class Re extends Ne.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Ne.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Ne.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const De=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Me(t){return e=>0===t?Object(ke.b)():e.lift(new Le(t))}class Le{constructor(t){if(this.total=t,this.total<0)throw new De}call(t,e){return e.subscribe(new Fe(t,this.total))}}class Fe extends kt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Ue(...t){const e=t[t.length-1];return Object(ge.a)(e)?(t.pop(),n=>Ce(t,n,e)):e=>Ce(t,e)}function Ve(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new qe(t,e,n))}}class qe{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Be(t,this.accumulator,this.seed,this.hasSeed))}}class Be extends kt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function He(t){return function(e){const n=new Ke(t),r=e.lift(n);return n.caught=r}}class Ke{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ze(t,this.selector,this.caught))}}class ze extends Ne.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Ne.a(this);this.add(r);const i=Object(Ne.c)(n,r);i!==r&&this.add(i)}}}function We(t){return function(e){return 0===t?Object(ke.b)():e.lift(new Ge(t))}}class Ge{constructor(t){if(this.total=t,this.total<0)throw new De}call(t,e){return e.subscribe(new $e(t,this.total))}}class $e extends kt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Qe(t=Je){return e=>e.lift(new Ye(t))}class Ye{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Xe(t,this.errorFactory))}}class Xe extends kt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Tb){t=Tb}this.destination.error(t)}}}function Je(){return new Ie}function Ze(t=null){return e=>e.lift(new tn(t))}class tn{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new en(t,this.defaultValue))}}class en extends kt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var nn=n("SpAZ");function rn(t,e){const n=arguments.length>=2;return r=>r.pipe(t?At((e,n)=>t(e,n,r)):nn.a,Me(1),n?Ze(e):Qe(()=>new Ie))}var on=n("vkgz"),sn=n("x+ZX"),an=n("quSY");class un{constructor(t){this.callback=t}call(t,e){return e.subscribe(new cn(t,this.callback))}}class cn extends kt.a{constructor(t,e){super(t),this.add(new an.a(e))}}class ln{constructor(t,e){this.id=t,this.url=e}}class hn extends ln{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fn extends ln{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dn extends ln{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pn extends ln{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gn extends ln{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mn extends ln{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yn extends ln{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vn extends ln{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bn extends ln{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _n{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wn{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class En{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tn{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sn{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class In{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class On{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Cn="primary";class kn{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function An(t){return new kn(t)}function xn(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Nn(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function jn(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Pn(t[i],e[i]))return!1;return!0}function Pn(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Rn(t){return Array.prototype.concat.apply([],t)}function Dn(t){return t.length>0?t[t.length-1]:null}function Mn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ln(t){return Object(r.sb)(t)?t:Object(r.tb)(t)?Object(he.a)(Promise.resolve(t)):Object(St.a)(t)}function Fn(t,e,n){return n?function(t,e){return jn(t,e)}(t.queryParams,e.queryParams)&&Un(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Pn(t[n],e[n]))}(t.queryParams,e.queryParams)&&Vn(t.root,e.root)}function Un(t,e){if(!zn(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Un(t.children[n],e.children[n]))return!1}return!0}function Vn(t,e){return qn(t,e,e.segments)}function qn(t,e,n){if(t.segments.length>n.length)return!!zn(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!zn(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Vn(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!zn(t.segments,r)&&!!t.children.primary&&qn(t.children.primary,e,i)}}class Bn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=An(this.queryParams)),this._queryParamMap}toString(){return $n.serialize(this)}}class Hn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Mn(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qn(this)}}class Kn{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=An(this.parameters)),this._parameterMap}toString(){return nr(this)}}function zn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Wn{}class Gn{parse(t){const e=new ar(t);return new Bn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Yn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Jn(e)}=${Jn(t)}`).join("&"):`${Jn(e)}=${Jn(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const $n=new Gn;function Qn(t){return t.segments.map(t=>nr(t)).join("/")}function Yn(t,e){if(!t.hasChildren())return Qn(t);if(e){const e=t.children.primary?Yn(t.children.primary,!1):"",n=[];return Mn(t.children,(t,e)=>{e!==Cn&&n.push(`${e}:${Yn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Mn(t.children,(t,r)=>{r===Cn&&(n=n.concat(e(t,r)))}),Mn(t.children,(t,r)=>{r!==Cn&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Cn?[Yn(t.children.primary,!1)]:[`${n}:${Yn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Qn(t)}/${e[0]}`:`${Qn(t)}/(${e.join("//")})`}}function Xn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jn(t){return Xn(t).replace(/%3B/gi,";")}function Zn(t){return Xn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tr(t){return decodeURIComponent(t)}function er(t){return tr(t.replace(/\+/g,"%20"))}function nr(t){return`${Zn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Zn(t)}=${Zn(e[t])}`).join("")}`;var e}const rr=/^[^\/()?;=#]+/;function ir(t){const e=t.match(rr);return e?e[0]:""}const or=/^[^=?&#]+/,sr=/^[^?&#]+/;class ar{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Hn([],{}):new Hn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Hn(t,e)),n}parseSegment(){const t=ir(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Kn(tr(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ir(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=ir(this.remaining);t&&(n=t,this.capture(n))}t[tr(e)]=tr(n)}parseQueryParam(t){const e=function(t){const e=t.match(or);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(sr);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=er(e),i=er(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=ir(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Cn);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Hn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class ur{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=cr(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=cr(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=lr(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return lr(t,this._root).map(t=>t.value)}}function cr(t,e){if(t===e.value)return e;for(const n of e.children){const e=cr(t,n);if(e)return e}return null}function lr(t,e){if(t===e.value)return[e];for(const n of e.children){const r=lr(t,n);if(r.length)return r.unshift(e),r}return[]}class hr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function fr(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class dr extends ur{constructor(t,e){super(t),this.snapshot=e,br(this,t)}toString(){return this.snapshot.toString()}}function pr(t,e){const n=function(t,e){const n=new yr([],{},{},"",{},Cn,e,null,t.root,-1,{});return new vr("",new hr(n,[]))}(t,e),r=new pe([new Kn("",{})]),i=new pe({}),o=new pe({}),s=new pe({}),a=new pe(""),u=new gr(r,i,s,a,o,Cn,e,n.root);return u.snapshot=n.root,new dr(new hr(u,[]),n)}class gr{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(jt.a)(t=>An(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(jt.a)(t=>An(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function mr(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class yr{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=An(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=An(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vr extends ur{constructor(t,e){super(e),this.url=t,br(this,e)}toString(){return _r(this._root)}}function br(t,e){e.value._routerState=t,e.children.forEach(e=>br(t,e))}function _r(t){const e=t.children.length>0?` { ${t.children.map(_r).join(", ")} } `:"";return`${t.value}${e}`}function wr(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,jn(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),jn(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!jn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),jn(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Er(t,e){return jn(t.params,e.params)&&function(t,e){return zn(t,e)&&t.every((t,n)=>jn(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Er(t.parent,e.parent))}function Tr(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Tr(t,e,r);return Tr(t,e)})}(t,e,n);return new hr(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Sr(e,t),t}}const n=new gr(new pe((r=e.value).url),new pe(r.params),new pe(r.queryParams),new pe(r.fragment),new pe(r.data),r.outlet,r.component,r),i=e.children.map(e=>Tr(t,e));return new hr(n,i)}var r}function Sr(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Sr(t.children[n],e.children[n])}function Ir(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Or(t){return"object"==typeof t&&null!=t&&t.outlets}function Cr(t,e,n,r,i){let o={};return r&&Mn(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Bn(n.root===t?e:kr(n.root,t,e),o,i)}function kr(t,e,n){const r={};return Mn(t.children,(t,i)=>{r[i]=t===e?n:kr(t,e,n)}),new Hn(t.segments,r)}class Ar{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ir(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Or);if(r&&r!==Dn(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xr{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Nr(t,e,n){if(t||(t=new Hn([],{})),0===t.segments.length&&t.hasChildren())return jr(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Or(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Mr(a,u,e))return o;r+=2}else{if(!Mr(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Hn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Hn(t.segments.slice(r.pathIndex),t.children),jr(e,0,i)}return r.match&&0===i.length?new Hn(t.segments,{}):r.match&&!t.hasChildren()?Pr(t,e,n):r.match?jr(t,0,i):Pr(t,e,n)}function jr(t,e,n){if(0===n.length)return new Hn(t.segments,{});{const r=function(t){return Or(t[0])?t[0].outlets:{[Cn]:t}}(n),i={};return Mn(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Nr(t.children[r],e,n))}),Mn(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Hn(t.segments,i)}}function Pr(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Or(o)){const t=Rr(o.outlets);return new Hn(r,t)}if(0===i&&Ir(n[0])){r.push(new Kn(t.segments[e].path,Dr(n[0]))),i++;continue}const s=Or(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ir(a)?(r.push(new Kn(s,Dr(a))),i+=2):(r.push(new Kn(s,{})),i++)}return new Hn(r,{})}function Rr(t){const e={};return Mn(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Pr(new Hn([],{}),0,t))}),e}function Dr(t){const e={};return Mn(t,(t,n)=>e[n]=`${t}`),e}function Mr(t,e,n){return t==n.path&&jn(e,n.parameters)}class Lr{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),wr(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=fr(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Mn(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=fr(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=fr(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new In(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Tn(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(wr(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Fr(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Fr(t){wr(t.value),t.children.forEach(Fr)}class Ur{constructor(t,e){this.routes=t,this.module=e}}function Vr(t){return"function"==typeof t}function qr(t){return t instanceof Bn}const Br=Symbol("INITIAL_VALUE");function Hr(){return je(t=>function(...t){let e,n;return Object(ge.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(me.a)(t[0])&&(t=t[0]),Object(we.a)(t,n).lift(new Te(e))}(t.map(t=>t.pipe(Me(1),Ue(Br)))).pipe(Ve((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Br)return t;if(r===Br&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||qr(r))return r}return t},t)},Br),At(t=>t!==Br),Object(jt.a)(t=>qr(t)?t:!0===t),Me(1)))}let Kr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Nb(0,"router-outlet")},directives:function(){return[Vi]},encapsulation:2}),t})();function zr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Wr(r,Gr(e,r))}}function Wr(t,e){t.children&&zr(t.children,e)}function Gr(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function $r(t){const e=t.children&&t.children.map($r),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Cn&&(n.component=Kr),n}function Qr(t){return t.outlet||Cn}function Yr(t,e){const n=t.filter(t=>Qr(t)===e);return n.push(...t.filter(t=>Qr(t)!==e)),n}const Xr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Jr(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Xr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Nn)(n,t,e);if(!i)return Object.assign({},Xr);const o={};Mn(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Zr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>ti(t,e,n)&&Qr(n)!==Cn)}(t,n,r)){const i=new Hn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Qr(o)!==Cn){const n=new Hn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Qr(o)]=n}return i}(t,e,r,new Hn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>ti(t,e,n))}(t,n,r)){const o=new Hn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(ti(t,n,a)&&!i[Qr(a)]){const n=new Hn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Qr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Hn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function ti(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function ei(t,e,n,r){return!!(Qr(t)===r||r!==Cn&&ti(e,n,t))&&("**"===t.path||Jr(e,t,n).matched)}function ni(t,e,n){return 0===e.length&&!t.children[n]}class ri{constructor(t){this.segmentGroup=t||null}}class ii{constructor(t){this.urlTree=t}}function oi(t){return new It.a(e=>e.error(new ri(t)))}function si(t){return new It.a(e=>e.error(new ii(t)))}function ai(t){return new It.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class ui{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=Zr(this.urlTree.root,[],[],this.config).segmentGroup,e=new Hn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Cn).pipe(Object(jt.a)(t=>this.createUrlTree(ci(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(He(t=>{if(t instanceof ii)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof ri)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Cn).pipe(Object(jt.a)(e=>this.createUrlTree(ci(e),t.queryParams,t.fragment))).pipe(He(t=>{if(t instanceof ri)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Hn([],{[Cn]:t}):t;return new Bn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(jt.a)(t=>new Hn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(he.a)(r).pipe(Ct(r=>{const i=n.children[r],o=Yr(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(jt.a)(t=>({segment:t,outlet:r})))}),Ve((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?At((e,n)=>t(e,n,r)):nn.a,We(1),n?Ze(e):Qe(()=>new Ie))}())}expandSegment(t,e,n,r,i,o){return Object(he.a)(n).pipe(Ct(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(He(t=>{if(t instanceof ri)return Object(St.a)(null);throw t}))),rn(t=>!!t),He((t,n)=>{if(t instanceof Ie||"EmptyError"===t.name){if(ni(e,r,i))return Object(St.a)(new Hn([],{}));throw new ri(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return ei(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):oi(e):oi(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?si(i):this.lineralizeSegments(n,i).pipe(Object(Ot.a)(n=>{const i=new Hn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Jr(e,r,i);if(!s)return oi(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?si(l):this.lineralizeSegments(r,l).pipe(Object(Ot.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(St.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(jt.a)(t=>(n._loadedConfig=t,new Hn(r,{})))):Object(St.a)(new Hn(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=Jr(e,n,r);if(!o)return oi(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Ot.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Zr(e,s,u,o),l=new Hn(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(jt.a)(t=>new Hn(s,t)));if(0===o.length&&0===c.length)return Object(St.a)(new Hn(s,{}));const h=Qr(n)===i;return this.expandSegment(r,l,o,c,h?Cn:i,!0).pipe(Object(jt.a)(t=>new Hn(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(St.a)(new Ur(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(St.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Ot.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(jt.a)(t=>(e._loadedConfig=t,t))):function(t){return new It.a(e=>e.error(xn(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(St.a)(new Ur([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(St.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Vr(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Vr(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Ln(o)});return Object(St.a)(i).pipe(Hr(),Object(on.a)(t=>{if(!qr(t))return;const e=xn(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(jt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(St.a)(n);if(r.numberOfChildren>1||!r.children.primary)return ai(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Bn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Mn(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Mn(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Hn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function ci(t){const e={};for(const n of Object.keys(t.children)){const r=ci(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Hn(t.segments.concat(e.segments),e.children)}return t}(new Hn(t.segments,e))}class li{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class hi{constructor(t,e){this.component=t,this.route=e}}function fi(t,e,n){const r=t._root;return pi(r,e?e._root:null,n,[r.value])}function di(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function pi(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=fr(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!zn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!zn(t.url,e.url)||!jn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Er(t,e)||!jn(t.queryParams,e.queryParams);case"paramsChange":default:return!Er(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new li(r)):(o.data=s.data,o._resolvedData=s._resolvedData),pi(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new hi(a.outlet.component,s))}else s&&gi(e,a,i),i.canActivateChecks.push(new li(r)),pi(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Mn(o,(t,e)=>gi(t,n.getContext(e),i)),i}function gi(t,e,n){const r=fr(t),i=t.value;Mn(r,(t,r)=>{gi(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new hi(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class mi{}function yi(t){return new It.a(e=>e.error(t))}class vi{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Zr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Cn);if(null===e)return null;const n=new yr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Cn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new hr(n,e),i=new vr(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=mr(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Yr(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=_i(n);return r.sort((t,e)=>t.value.outlet===Cn?-1:e.value.outlet===Cn?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return ni(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!ei(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Dn(n).parameters:{};i=new yr(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ti(t),Qr(t),t.component,t,wi(e),Ei(e)+n.length,Si(t))}else{const r=Jr(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new yr(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ti(t),Qr(t),t.component,t,wi(e),Ei(e)+o.length,Si(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Zr(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new hr(i,t)]}if(0===a.length&&0===c.length)return[new hr(i,[])];const l=Qr(t)===r,h=this.processSegment(a,u,c,l?Cn:r);return null===h?null:[new hr(i,h)]}}function bi(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function _i(t){const e=[],n=new Set;for(const r of t){if(!bi(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=_i(r.children);e.push(new hr(r.value,t))}return e.filter(t=>!n.has(t))}function wi(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ei(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ti(t){return t.data||{}}function Si(t){return t.resolve||{}}function Ii(t){return je(e=>{const n=t(e);return n?Object(he.a)(n).pipe(Object(jt.a)(()=>e)):Object(St.a)(e)})}class Oi extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Ci=new r.r("ROUTES");class ki{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(jt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Ur(Rn(i.injector.get(Ci,void 0,r.q.Self|r.q.Optional)).map($r),i)}),He(t=>{throw e._loader$=void 0,t}));return e._loader$=new xe.a(n,()=>new fe.a).pipe(Object(sn.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(he.a)(this.loader.load(t)):Ln(t()).pipe(Object(Ot.a)(t=>t instanceof r.w?Object(St.a)(t):Object(he.a)(this.compiler.compileModuleAsync(t))))}}class Ai{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new xi,this.attachRef=null}}class xi{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Ai,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Ni{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function ji(t){throw t}function Pi(t,e,n){return e.parse("/")}function Ri(t,e){return Object(St.a)(null)}let Di=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new fe.a,this.errorHandler=ji,this.malformedUriErrorHandler=Pi,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ri,afterPreactivation:Ri},this.urlHandlingStrategy=new Ni,this.routeReuseStrategy=new Oi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Z);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Bn(new Hn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ki(s,a,t=>this.triggerEvent(new _n(t)),t=>this.triggerEvent(new wn(t))),this.routerState=pr(this.currentUrlTree,this.rootComponentType),this.transitions=new pe({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(At(t=>0!==t.id),Object(jt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),je(t=>{let n=!1,r=!1;return Object(St.a)(t).pipe(Object(on.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),je(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(St.a)(t).pipe(je(t=>{const n=this.transitions.getValue();return e.next(new hn(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?ke.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,je(t=>function(t,e,n,r,i){return new ui(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(jt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(on.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Ot.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new vi(t,e,n,r,i,o).recognize();return null===s?yi(new mi):Object(St.a)(s)}catch(Tb){return yi(Tb)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(jt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(on.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new gn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new hn(n,this.serializeUrl(r),i,o);e.next(a);const u=pr(r,this.rootComponentType).snapshot;return Object(St.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),ke.a}),Ii(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(on.a)(t=>{const e=new mn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(jt.a)(t=>Object.assign(Object.assign({},t),{guards:fi(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Ot.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(St.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(he.a)(t).pipe(Object(Ot.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(St.a)(!0);const s=o.map(o=>{const s=di(o,e,i);let a;if(function(t){return t&&Vr(t.canDeactivate)}(s))a=Ln(s.canDeactivate(t,e,n,r));else{if(!Vr(s))throw new Error("Invalid CanDeactivate guard");a=Ln(s(t,e,n,r))}return a.pipe(rn())});return Object(St.a)(s).pipe(Hr())}(t.component,t.route,n,e,r)),rn(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Ot.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(he.a)(e).pipe(Ct(e=>Ce(function(t,e){return null!==t&&e&&e(new En(t)),Object(St.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Sn(t)),Object(St.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Ae(()=>{const i=e.guards.map(i=>{const o=di(i,e.node,n);let s;if(function(t){return t&&Vr(t.canActivateChild)}(o))s=Ln(o.canActivateChild(r,t));else{if(!Vr(o))throw new Error("Invalid CanActivateChild guard");s=Ln(o(r,t))}return s.pipe(rn())});return Object(St.a)(i).pipe(Hr())}));return Object(St.a)(i).pipe(Hr())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(St.a)(!0);const i=r.map(r=>Ae(()=>{const i=di(r,e,n);let o;if(function(t){return t&&Vr(t.canActivate)}(i))o=Ln(i.canActivate(e,t));else{if(!Vr(i))throw new Error("Invalid CanActivate guard");o=Ln(i(e,t))}return o.pipe(rn())}));return Object(St.a)(i).pipe(Hr())}(t,e.route,n))),rn(t=>!0!==t,!0))}(r,o,t,e):Object(St.a)(n)),Object(jt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(on.a)(t=>{if(qr(t.guardsResult)){const e=xn(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new yn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),At(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new dn(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Ii(t=>{if(t.guards.canActivateChecks.length)return Object(St.a)(t).pipe(Object(on.a)(t=>{const e=new vn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),je(t=>{let n=!1;return Object(St.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Ot.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(St.a)(t);let o=0;return Object(he.a)(n).pipe(Ct(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(St.a)({});const o={};return Object(he.a)(i).pipe(Object(Ot.a)(i=>function(t,e,n,r){const i=di(t,e,r);return Ln(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(on.a)(t=>{o[i]=t}))),We(1),Object(Ot.a)(()=>Object.keys(o).length===i.length?Object(St.a)(o):ke.a))}(t._resolve,t,e,r).pipe(Object(jt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),mr(t,n).resolve),null)))}(t.route,e,r,i)),Object(on.a)(()=>o++),We(1),Object(Ot.a)(e=>o===n.length?Object(St.a)(t):ke.a))})),Object(on.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new dn(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(on.a)(t=>{const e=new bn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Ii(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(jt.a)(t=>{const e=function(t,e,n){const r=Tr(t,e._root,n?n._root:void 0);return new dr(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(on.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(jt.a)(t=>(new Lr(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(on.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new dn(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new un(i))),He(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=qr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new dn(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new pn(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Hl){t.reject(Hl)}}var i;return ke.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){zr(t),this.config=t.map($r),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Cr(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Ar(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Mn(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Ar(n,e,r)}(n);if(o.toRoot())return Cr(e.root,new Hn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new xr(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new xr(t,t===e.root,0)}const r=Ir(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new xr(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?jr(s.segmentGroup,s.index,o.commands):Nr(s.segmentGroup,s.index,o.commands);return Cr(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=qr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Tb){e=this.malformedUriErrorHandler(Tb,this.urlSerializer,t)}return e}isActive(t,e){if(qr(t))return Fn(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Fn(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new fn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(r.O),r.Vb(Wn),r.Vb(xi),r.Vb(w),r.Vb(r.s),r.Vb(r.x),r.Vb(r.i),r.Vb(void 0))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),Mi=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new fe.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Fi(this.skipLocationChange),replaceUrl:Fi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Fi(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Di),r.Mb(gr),r.Wb("tabindex"),r.Mb(r.F),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Yb("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.Ab]}),t})(),Li=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new fe.a,this.subscription=t.events.subscribe(t=>{t instanceof fn&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Fi(this.skipLocationChange),replaceUrl:Fi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Fi(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Di),r.Mb(gr),r.Mb(m))},t.\u0275dir=r.Hb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Yb("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Ub("href",e.href,r.jc),r.Db("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.Ab]}),t})();function Fi(t){return""===t||!!t}let Ui=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof fn&&this.update()})}ngAfterContentInit(){Object(St.a)(this.links.changes,this.linksWithHrefs.changes,Object(St.a)(null)).pipe(Object(Oe.a)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=Object(he.a)(e).pipe(Object(Oe.a)()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Di),r.Mb(r.l),r.Mb(r.F),r.Mb(r.h),r.Mb(Mi,8),r.Mb(Li,8))},t.\u0275dir=r.Hb({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){if(1&t&&(r.Fb(n,Mi,1),r.Fb(n,Li,1)),2&t){let t;r.hc(t=r.Zb())&&(e.links=t),r.hc(t=r.Zb())&&(e.linksWithHrefs=t)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.Ab]}),t})(),Vi=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Cn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new qi(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(xi),r.Mb(r.R),r.Mb(r.j),r.Wb("name"),r.Mb(r.h))},t.\u0275dir=r.Hb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class qi{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===gr?this.route:t===xi?this.childContexts:this.parent.get(t,e)}}class Bi{}class Hi{preload(t,e){return Object(St.a)(null)}}let Ki=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new ki(e,n,e=>t.triggerEvent(new _n(e)),e=>t.triggerEvent(new wn(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(At(t=>t instanceof fn),Ct(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(he.a)(n).pipe(Object(Oe.a)(),Object(jt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(St.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(Ot.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(Di),r.Vb(r.x),r.Vb(r.i),r.Vb(r.s),r.Vb(Bi))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),zi=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof hn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof fn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof On&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new On(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(Di),r.Vb(z),r.Vb(void 0))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const Wi=new r.r("ROUTER_CONFIGURATION"),Gi=new r.r("ROUTER_FORROOT_GUARD"),$i=[w,{provide:Wn,useClass:Gn},{provide:Di,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new Di(null,t,e,n,r,i,s,Rn(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[Wn,xi,w,r.s,r.x,r.i,Ci,Wi,[class{},new r.B],[class{},new r.B]]},xi,{provide:gr,useFactory:function(t){return t.routerState.root},deps:[Di]},{provide:r.x,useClass:r.L},Ki,Hi,class{preload(t,e){return e().pipe(He(()=>Object(St.a)(null)))}},{provide:Wi,useValue:{enableTracing:!1}}];function Qi(){return new r.z("Router",Di)}let Yi=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[$i,to(e),{provide:Gi,useFactory:Zi,deps:[[Di,new r.B,new r.K]]},{provide:Wi,useValue:n||{}},{provide:m,useFactory:Ji,deps:[a,[new r.p(v),new r.B],Wi]},{provide:zi,useFactory:Xi,deps:[Di,z,Wi]},{provide:Bi,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Hi},{provide:r.z,multi:!0,useFactory:Qi},[eo,{provide:r.d,multi:!0,useFactory:no,deps:[eo]},{provide:io,useFactory:ro,deps:[eo]},{provide:r.b,multi:!0,useExisting:io}]]}}static forChild(e){return{ngModule:t,providers:[to(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(Gi,8),r.Vb(Di,8))},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})();function Xi(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new zi(t,e,n)}function Ji(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function Zi(t){return"guarded"}function to(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Ci,multi:!0,useValue:t}]}let eo=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new fe.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Di),r=this.injector.get(Wi);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(St.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Wi),n=this.injector.get(Ki),i=this.injector.get(zi),o=this.injector.get(Di),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(r.s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();function no(t){return t.appInitializer.bind(t)}function ro(t){return t.bootstrapListener.bind(t)}const io=new r.r("Router Initializer");var oo=n("mrSG"),so=n("zIRd"),ao=(n("t6oF"),n("6Uf2"),n("qOnz")),uo=n("q/0M"),co=function(t,e){return(co=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function lo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ho,fo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},po=po||{},go=fo||self;function mo(){}function yo(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function vo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var bo="closure_uid_"+(1e9*Math.random()>>>0),_o=0;function wo(t,e,n){return t.call.apply(t.bind,arguments)}function Eo(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function To(t,e,n){return(To=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wo:Eo).apply(null,arguments)}function So(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Io(){return Date.now()}function Oo(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Co(){this.j=this.j,this.i=this.i}Co.prototype.j=!1,Co.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,bo)&&t[bo]||(t[bo]=++_o)}(this)},Co.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var ko=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ao=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function xo(t){return Array.prototype.concat.apply([],arguments)}function No(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function jo(t){return/^[\s\xa0]*$/.test(t)}var Po,Ro=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Do(t,e){return-1!=t.indexOf(e)}function Mo(t,e){return t<e?-1:t>e?1:0}t:{var Lo=go.navigator;if(Lo){var Fo=Lo.userAgent;if(Fo){Po=Fo;break t}}Po=""}function Uo(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Vo(t){var e={};for(var n in t)e[n]=t[n];return e}var qo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bo(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<qo.length;o++)n=qo[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ho(t){return Ho[" "](t),t}Ho[" "]=mo;var Ko,zo,Wo=Do(Po,"Opera"),Go=Do(Po,"Trident")||Do(Po,"MSIE"),$o=Do(Po,"Edge"),Qo=$o||Go,Yo=Do(Po,"Gecko")&&!(Do(Po.toLowerCase(),"webkit")&&!Do(Po,"Edge"))&&!(Do(Po,"Trident")||Do(Po,"MSIE"))&&!Do(Po,"Edge"),Xo=Do(Po.toLowerCase(),"webkit")&&!Do(Po,"Edge");function Jo(){var t=go.document;return t?t.documentMode:void 0}t:{var Zo="",ts=(zo=Po,Yo?/rv:([^\);]+)(\)|;)/.exec(zo):$o?/Edge\/([\d\.]+)/.exec(zo):Go?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(zo):Xo?/WebKit\/(\S+)/.exec(zo):Wo?/(?:Version)[ \/]?(\S+)/.exec(zo):void 0);if(ts&&(Zo=ts?ts[1]:""),Go){var es=Jo();if(null!=es&&es>parseFloat(Zo)){Ko=String(es);break t}}Ko=Zo}var ns={};function rs(t){return function(t,e){var n=ns;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Ro(String(Ko)).split("."),r=Ro(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Mo(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Mo(0==s[2].length,0==a[2].length)||Mo(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var is=go.document&&Go&&(Jo()||parseInt(Ko,10))||void 0,os=!Go||9<=Number(is),ss=Go&&!rs("9"),as=function(){if(!go.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{go.addEventListener("test",mo,e),go.removeEventListener("test",mo,e)}catch(n){}return t}();function us(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function cs(t,e){if(us.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Yo){t:{try{Ho(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ls[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}us.prototype.b=function(){this.defaultPrevented=!0},Oo(cs,us);var ls={2:"touch",3:"pen",4:"mouse"};cs.prototype.b=function(){cs.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ss)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var hs="closure_listenable_"+(1e6*Math.random()|0),fs=0;function ds(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++fs,this.Y=this.Z=!1}function ps(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function gs(t){this.src=t,this.a={},this.b=0}function ms(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=ko(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ps(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ys(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}gs.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ys(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ds(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var vs="closure_lm_"+(1e6*Math.random()|0),bs={};function _s(t,e,n,r,i){if(r&&r.once)return Es(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)_s(t,e[o],n,r,i);return null}return n=xs(n),t&&t[hs]?t.va(e,n,vo(r)?!!r.capture:!!r,i):ws(t,e,n,!1,r,i)}function ws(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=vo(i)?!!i.capture:!!i;if(s&&!os)return null;var a=ks(t);if(a||(t[vs]=a=new gs(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Cs,e=os?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)as||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Is(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Es(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Es(t,e[o],n,r,i);return null}return n=xs(n),t&&t[hs]?t.wa(e,n,vo(r)?!!r.capture:!!r,i):ws(t,e,n,!0,r,i)}function Ts(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ts(t,e[o],n,r,i);else r=vo(r)?!!r.capture:!!r,n=xs(n),t&&t[hs]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=ys(o=t.a[e],n,r,i))&&(ps(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=ks(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ys(e,n,r,i)),(n=-1<t?e[t]:null)&&Ss(n))}function Ss(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[hs])ms(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Is(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ks(e))?(ms(n,t),0==n.b&&(n.src=null,e[vs]=null)):ps(t)}}}function Is(t){return t in bs?bs[t]:bs[t]="on"+t}function Os(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ss(t),n.call(r,e)}function Cs(t,e){if(t.Y)return!0;if(!os){if(!e)t:{e=["window","event"];for(var n=go,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Os(t,e=new cs(e,this))}return Os(t,new cs(e,this))}function ks(t){return(t=t[vs])instanceof gs?t:null}var As="__closure_events_fn_"+(1e9*Math.random()>>>0);function xs(t){return"function"==typeof t?t:(t[As]||(t[As]=function(e){return t.handleEvent(e)}),t[As])}function Ns(){Co.call(this),this.c=new gs(this),this.J=this,this.C=null}function js(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new us(e,t);else if(e instanceof us)e.target=e.target||t;else{var i=e;Bo(e=new us(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Ps(s,r,!0,e)&&i}if(i=Ps(s=e.a=t,r,!0,e)&&i,i=Ps(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ps(s=e.a=n[o],r,!1,e)&&i}function Ps(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&ms(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Oo(Ns,Co),Ns.prototype[hs]=!0,(ho=Ns.prototype).addEventListener=function(t,e,n,r){_s(this,t,e,n,r)},ho.removeEventListener=function(t,e,n,r){Ts(this,t,e,n,r)},ho.G=function(){if(Ns.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ps(n[r]);delete e.a[t],e.b--}}this.C=null},ho.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ho.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Rs=go.JSON.stringify;function Ds(){this.b=this.a=null}var Ms,Ls=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Us},function(t){t.reset()});function Fs(){var t=Hs,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Us(){this.next=this.b=this.a=null}function Vs(t){go.setTimeout(function(){throw t},0)}function qs(t,e){Ms||function(){var t=go.Promise.resolve(void 0);Ms=function(){t.then(Ks)}}(),Bs||(Ms(),Bs=!0),Hs.add(t,e)}Ds.prototype.add=function(t,e){var n=Ls.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Us.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Us.prototype.reset=function(){this.next=this.b=this.a=null};var Bs=!1,Hs=new Ds;function Ks(){for(var t;t=Fs();){try{t.a.call(t.b)}catch(n){Vs(n)}var e=Ls;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Bs=!1}function zs(t,e){Ns.call(this),this.b=t||1,this.a=e||go,this.f=To(this.Za,this),this.g=Io()}function Ws(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Gs(t,e,n){if("function"==typeof t)n&&(t=To(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=To(t.handleEvent,t)}return 2147483647<Number(e)?-1:go.setTimeout(t,e||0)}function $s(t){t.a=Gs(function(){t.a=null,t.c&&(t.c=!1,$s(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Oo(zs,Ns),(ho=zs.prototype).aa=!1,ho.M=null,ho.Za=function(){if(this.aa){var t=Io()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),js(this,"tick"),this.aa&&(Ws(this),this.start()))}},ho.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Io())},ho.G=function(){zs.X.G.call(this),Ws(this),delete this.a};var Qs=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}co(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:$s(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(go.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Co);function Ys(t){Co.call(this),this.b=t,this.a={}}Oo(Ys,Co);var Xs=[];function Js(t,e,n,r){Array.isArray(n)||(n&&(Xs[0]=n.toString()),n=Xs);for(var i=0;i<n.length;i++){var o=_s(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Zs(t){Uo(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ss(t)},t),t.a={}}function ta(){this.a=!0}function ea(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Rs(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Ys.prototype.G=function(){Ys.X.G.call(this),Zs(this)},Ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ta.prototype.info=function(){};var na={},ra=null;function ia(){return ra=ra||new Ns}function oa(t){us.call(this,na.Fa,t)}function sa(t){var e=ia();js(e,new oa(e,t))}function aa(t,e){us.call(this,na.STAT_EVENT,t),this.stat=e}function ua(t){var e=ia();js(e,new aa(e,t))}function ca(t){us.call(this,na.Ga,t)}function la(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return go.setTimeout(function(){t()},e)}na.Fa="serverreachability",Oo(oa,us),na.STAT_EVENT="statevent",Oo(aa,us),na.Ga="timingevent",Oo(ca,us);var ha={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},fa={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function da(){}function pa(){}da.prototype.a=null;var ga,ma={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ya(){us.call(this,"d")}function va(){us.call(this,"c")}function ba(){}function _a(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Ys(this),this.P=wa,this.R=new zs(t=Qo?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Oo(ya,us),Oo(va,us),Oo(ba,da),ga=new ba;var wa=45e3,Ea={},Ta={};function Sa(t,e,n){t.H=1,t.i=Wa(Va(e)),t.j=n,t.I=!0,Ia(t,null)}function Ia(t,e){t.u=Io(),ka(t),t.l=Va(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),ou(n.b,"t",r),t.D=0,t.a=Zu(t.g,t.g.C?e:null),0<t.O&&(t.F=new Qs(To(t.Ca,t,t.a),t.O)),Js(t.J,t.a,"readystatechange",t.Xa),e=t.B?Vo(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),sa(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Oa(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ca(t,n);if(i==Ta){4==e&&(t.h=4,ua(14),r=!1),ea(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ea){t.h=4,ua(15),ea(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ea(t.c,t.f,i,null),Pa(t,i)}4==e&&0==n.length&&(t.h=1,ua(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),zu(e),e.F=!0,ua(11))):(ea(t.c,t.f,n,"[Invalid Chunked Response]"),ja(t),Na(t))}function Ca(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ta:(n=Number(e.substring(n,r)),isNaN(n)?Ea:(r+=1)+n>e.length?Ta:(e=e.substr(r,n),t.D=r+n,e))}function ka(t){t.T=Io()+t.P,Aa(t,t.P)}function Aa(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=la(To(t.Va,t),e)}function xa(t){t.o&&(go.clearTimeout(t.o),t.o=null)}function Na(t){0==t.g.v||t.A||$u(t.g,t)}function ja(t){xa(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ws(t.R),Zs(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Pa(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||fu(n.b,t)))if(n.I=t.N,!t.C&&fu(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Vv){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Gu(n),Mu(n)}Ku(n),ua(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=la(To(n.Sa,n),6e3));if(1>=hu(n.b)&&n.ea){try{n.ea()}catch(Vv){}n.ea=void 0}}else Yu(n,11)}else if((t.C||n.a==t)&&Gu(n),!jo(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Do(l,"spdy")||Do(l,"quic")||Do(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(du(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,za(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Io()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Ju(u,u.C?u.ga:null,u.fa),d.C){pu(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(xa(p),ka(p)),u.a=d}else Hu(u);0<n.g.length&&Uu(n)}else"stop"!=i[0]&&"close"!=i[0]||Yu(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Yu(n,7):Du(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);sa(4)}catch(Vv){}}function Ra(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(yo(t)||"string"==typeof t)Ao(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(yo(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(yo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Da(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Da)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ma(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];La(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)La(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function La(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ho=_a.prototype).setTimeout=function(t){this.P=t},ho.Xa=function(t){t=t.target;var e=this.F;e&&3==Nu(t)?e.f():this.Ca(t)},ho.Ca=function(t){try{if(t==this.a)t:{var e=Nu(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Qo&&!this.a.$())){this.A||4!=e||7==n||sa(8==n||0>=r?3:2),xa(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jo(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,ua(12),ja(this),Na(this);break t}ea(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Pa(this,u)}this.I?(Oa(this,e,o),Qo&&this.b&&3==e&&(Js(this.J,this.R,"tick",this.Wa),this.R.start())):(ea(this.c,this.f,o,null),Pa(this,o)),4==e&&ja(this),this.b&&!this.A&&(4==e?$u(this.g,this):(this.b=!1,ka(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ua(12)):(this.h=0,ua(13)),ja(this),Na(this)}}}catch(c){}},ho.Wa=function(){if(this.a){var t=Nu(this.a),e=this.a.$();this.D<e.length&&(xa(this),Oa(this,t,e),this.b&&4!=t&&ka(this))}},ho.cancel=function(){this.A=!0,ja(this)},ho.Va=function(){this.o=null;var t=Io();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(sa(3),ua(17)),ja(this),this.h=2,Na(this)):Aa(this,this.T-t)},(ho=Da.prototype).K=function(){Ma(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ho.L=function(){return Ma(this),this.a.concat()},ho.get=function(t,e){return La(this.b,t)?this.b[t]:e},ho.set=function(t,e){La(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ho.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Fa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ua(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ua){this.a=void 0!==e?e:t.a,qa(this,t.f),this.j=t.j,Ba(this,t.c),Ha(this,t.h),this.g=t.g,e=t.b;var n=new eu;n.c=e.c,e.a&&(n.a=new Da(e.a),n.b=e.b),Ka(this,n),this.i=t.i}else t&&(n=String(t).match(Fa))?(this.a=!!e,qa(this,n[1]||"",!0),this.j=Ga(n[2]||""),Ba(this,n[3]||"",!0),Ha(this,n[4]),this.g=Ga(n[5]||"",!0),Ka(this,n[6]||"",!0),this.i=Ga(n[7]||"")):(this.a=!!e,this.b=new eu(null,this.a))}function Va(t){return new Ua(t)}function qa(t,e,n){t.f=n?Ga(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ba(t,e,n){t.c=n?Ga(e,!0):e}function Ha(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ka(t,e,n){e instanceof eu?(t.b=e,function(t,e){e&&!t.f&&(nu(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(ru(this,e),ou(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=$a(e,Za)),t.b=new eu(e,t.a))}function za(t,e,n){t.b.set(e,n)}function Wa(t){return za(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Io()).toString(36)),t}function Ga(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function $a(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Qa),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Qa(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ua.prototype.toString=function(){var t=[],e=this.f;e&&t.push($a(e,Ya,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push($a(e,Ya,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push($a(n,"/"==n.charAt(0)?Ja:Xa,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",$a(n,tu)),t.join("")};var Ya=/[#\/\?@]/g,Xa=/[#\?:]/g,Ja=/[#\?]/g,Za=/[#\?@]/g,tu=/#/g;function eu(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function nu(t){t.a||(t.a=new Da,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function ru(t,e){nu(t),e=su(t,e),La(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,La((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ma(t)))}function iu(t,e){return nu(t),e=su(t,e),La(t.a.b,e)}function ou(t,e,n){ru(t,e),0<n.length&&(t.c=null,t.a.set(su(t,e),No(n)),t.b+=n.length)}function su(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(ho=eu.prototype).add=function(t,e){nu(this),this.c=null,t=su(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ho.forEach=function(t,e){nu(this),this.a.forEach(function(n,r){Ao(n,function(n){t.call(e,n,r,this)},this)},this)},ho.L=function(){nu(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ho.K=function(t){nu(this);var e=[];if("string"==typeof t)iu(this,t)&&(e=xo(e,this.a.get(su(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=xo(e,t[n])}return e},ho.set=function(t,e){return nu(this),this.c=null,iu(this,t=su(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ho.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ho.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var au=function(){return function(t,e){this.b=t,this.a=e}}();function uu(t){this.g=t||cu,t=go.PerformanceNavigationTiming?0<(t=go.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(go.ia&&go.ia.ya&&go.ia.ya()&&go.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var cu=10;function lu(t){return!!t.b||!!t.a&&t.a.size>=t.f}function hu(t){return t.b?1:t.a?t.a.size:0}function fu(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function du(t,e){t.a?t.a.add(e):t.b=e}function pu(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function gu(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=lo(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return No(t.c)}function mu(){}function yu(){this.a=new mu}function vu(t,e,n){var r=n||"";try{Ra(t,function(t,n){var i=t;vo(t)&&(i=Rs(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Tb){throw e.push(r+"type="+encodeURIComponent("_badmap")),Tb}}function bu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}uu.prototype.cancel=function(){var t,e;if(this.c=gu(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=lo(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},mu.prototype.stringify=function(t){return go.JSON.stringify(t,void 0)},mu.prototype.parse=function(t){return go.JSON.parse(t,void 0)};var _u=go.JSON.parse;function wu(t){Ns.call(this),this.headers=new Da,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Eu,this.D=this.F=!1}Oo(wu,Ns);var Eu="",Tu=/^https?$/i,Su=["POST","PUT"];function Iu(t){return"content-type"==t.toLowerCase()}function Ou(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Cu(t),Au(t)}function Cu(t){t.u||(t.u=!0,js(t,"complete"),js(t,"error"))}function ku(t){if(t.b&&void 0!==po&&(!t.s[1]||4!=Nu(t)||2!=t.W()))if(t.l&&4==Nu(t))Gs(t.za,0,t);else if(js(t,"readystatechange"),4==Nu(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Fa)[1]||null;if(!o&&go.self&&go.self.location){var s=go.self.location.protocol;o=s.substr(0,s.length-1)}i=!Tu.test(o?o.toLowerCase():"")}e=i}if(e)js(t,"complete"),js(t,"success");else{t.h=6;try{var a=2<Nu(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Cu(t)}}finally{Au(t)}}}function Au(t,e){if(t.a){xu(t);var n=t.a,r=t.s[0]?mo:null;t.a=null,t.s=null,e||js(t,"ready");try{n.onreadystatechange=r}catch(Tb){}}}function xu(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(go.clearTimeout(t.m),t.m=null)}function Nu(t){return t.a?t.a.readyState:0}function ju(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Uo(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):za(t,e,n))}function Pu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ru(t){this.pa=0,this.g=[],this.c=new ta,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Pu("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Pu("baseRetryDelayMs",5e3,t),this.Ra=Pu("retryDelaySeedMs",1e4,t),this.Ma=Pu("forwardChannelMaxRetries",2,t),this.ma=Pu("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new uu(t&&t.concurrentRequestLimit),this.ka=new yu,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Du(t){if(Lu(t),3==t.v){var e=t.R++,n=Va(t.B);za(n,"SID",t.J),za(n,"RID",e),za(n,"TYPE","terminate"),qu(t,n),(e=new _a(t,t.c,e,void 0)).H=2,e.i=Wa(Va(n)),n=!1,go.navigator&&go.navigator.sendBeacon&&(n=go.navigator.sendBeacon(e.i.toString(),"")),!n&&go.Image&&((new Image).src=e.i,n=!0),n||(e.a=Zu(e.g,null),e.a.ba(e.i)),e.u=Io(),ka(e)}Xu(t)}function Mu(t){t.a&&(zu(t),t.a.cancel(),t.a=null)}function Lu(t){Mu(t),t.j&&(go.clearTimeout(t.j),t.j=null),Gu(t),t.b.cancel(),t.h&&("number"==typeof t.h&&go.clearTimeout(t.h),t.h=null)}function Fu(t,e){t.g.push(new au(t.Oa++,e)),3==t.v&&Uu(t)}function Uu(t){lu(t.b)||t.h||(t.h=!0,qs(t.Ba,t),t.u=0)}function Vu(t,e){var n;n=e?e.f:t.R++;var r=Va(t.B);za(r,"SID",t.J),za(r,"RID",n),za(r,"AID",t.P),qu(t,r),t.i&&t.l&&ju(r,t.i,t.l),n=new _a(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Bu(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),du(t.b,n),Sa(n,r,e)}function qu(t,e){t.f&&Ra({},function(t,n){za(e,n,t)})}function Bu(t,e,n){n=Math.min(t.g.length,n);var r=t.f?To(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{vu(l,s,"req"+c+"_")}catch(Ac){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Hu(t){t.a||t.j||(t.T=1,qs(t.Aa,t),t.o=0)}function Ku(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=la(To(t.Aa,t),Qu(t,t.o)),t.o++,0))}function zu(t){null!=t.s&&(go.clearTimeout(t.s),t.s=null)}function Wu(t){t.a=new _a(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Va(t.la);za(e,"RID","rpc"),za(e,"SID",t.J),za(e,"CI",t.H?"0":"1"),za(e,"AID",t.P),qu(t,e),za(e,"TYPE","xmlhttp"),t.i&&t.l&&ju(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Wa(Va(e)),n.j=null,n.I=!0,Ia(n,t)}function Gu(t){null!=t.m&&(go.clearTimeout(t.m),t.m=null)}function $u(t,e){var n=null;if(t.a==e){Gu(t),zu(t),t.a=null;var r=2}else{if(!fu(t.b,e))return;n=e.s,pu(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Io()-e.u;var i=t.u;js(r=ia(),new ca(r,n,e,i)),Uu(t)}else Hu(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(hu(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=la(To(t.Ba,t,e),Qu(t,t.u)),t.u++,0)))}(t,e)||2==r&&Ku(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Yu(t,5);break;case 4:Yu(t,10);break;case 3:Yu(t,6);break;default:Yu(t,2)}}function Qu(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Yu(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=To(t.Ya,t);n||(n=new Ua("//www.google.com/images/cleardot.gif"),go.location&&"http"==go.location.protocol||qa(n,"https"),Wa(n)),function(t,e){var n=new ta;if(go.Image){var r=new Image;r.onload=So(bu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=So(bu,n,r,"TestLoadImage: error",!1,e),r.onabort=So(bu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=So(bu,n,r,"TestLoadImage: timeout",!1,e),go.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else ua(2);t.v=0,t.f&&t.f.ra(e),Xu(t),Lu(t)}function Xu(t){t.v=0,t.I=-1,t.f&&(0==gu(t.b).length&&0==t.g.length||(t.b.c.length=0,No(t.g),t.g.length=0),t.f.qa())}function Ju(t,e,n){var r=function(t){return t instanceof Ua?Va(t):new Ua(t,void 0)}(n);if(""!=r.c)e&&Ba(r,e+"."+r.c),Ha(r,r.h);else{var i=go.location;r=function(t,e,n,r){var i=new Ua(null,void 0);return t&&qa(i,t),e&&Ba(i,e),n&&Ha(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Uo(t.V,function(t,e){za(r,e,t)}),n=t.na,(e=t.A)&&n&&za(r,e,n),za(r,"VER",t.ha),qu(t,r),r}function Zu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wu(t.Na)).F=t.C,e}function tc(){}function ec(){if(Go&&!(10<=Number(is)))throw Error("Environmental error: no available transport.")}function nc(t,e){Ns.call(this),this.a=new Ru(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!jo(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jo(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new oc(this)}function rc(t){ya.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function ic(){va.call(this),this.status=1}function oc(t){this.a=t}(ho=wu.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:ga),this.a.onreadystatechange=To(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Ou(this,o)}t=n||"";var i=new Da(this.headers);r&&Ra(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Iu,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=go.FormData&&t instanceof go.FormData,!(0<=ko(Su,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{xu(this),0<this.o&&((this.D=function(t){return Go&&rs(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=To(this.xa,this)):this.m=Gs(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Ou(this,o)}},ho.xa=function(){void 0!==po&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,js(this,"timeout"),this.abort(8))},ho.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,js(this,"complete"),js(this,"abort"),Au(this))},ho.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Au(this,!0)),wu.X.G.call(this)},ho.za=function(){this.j||(this.A||this.l||this.g?ku(this):this.Ua())},ho.Ua=function(){ku(this)},ho.W=function(){try{return 2<Nu(this)?this.a.status:-1}catch(zo){return-1}},ho.$=function(){try{return this.a?this.a.responseText:""}catch(zo){return""}},ho.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),_u(e)}},ho.ua=function(){return this.h},ho.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ho=Ru.prototype).ha=8,ho.v=1,ho.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new _a(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Bo(r=Vo(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Bu(this,n,e),za(i=Va(this.B),"RID",t),za(i,"CVER",22),this.A&&za(i,"X-HTTP-Session-Id",this.A),qu(this,i),this.i&&r&&ju(i,this.i,r),du(this.b,n),this.Ia&&za(i,"TYPE","init"),this.da?(za(i,"$req",e),za(i,"SID","null"),n.U=!0,Sa(n,i,null)):Sa(n,i,e),this.v=2}}else 3==this.v&&(t?Vu(this,t):0==this.g.length||lu(this.b)||Vu(this))},ho.Aa=function(){if(this.j=null,Wu(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=la(To(this.Ta,this),t)}},ho.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ua(10),Mu(this),Wu(this))},ho.Sa=function(){null!=this.m&&(this.m=null,Mu(this),Ku(this),ua(19))},ho.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),ua(2)):(this.c.info("Failed to ping google.com"),ua(1))},(ho=tc.prototype).ta=function(){},ho.sa=function(){},ho.ra=function(){},ho.qa=function(){},ho.Ja=function(){},ec.prototype.a=function(t,e){return new nc(t,e)},Oo(nc,Ns),nc.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;ua(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Ju(t,null,t.fa),Uu(t)},nc.prototype.close=function(){Du(this.a)},nc.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Fu(this.a,e)}else this.l?((e={}).__data__=Rs(t),Fu(this.a,e)):Fu(this.a,t)},nc.prototype.G=function(){this.a.f=null,delete this.f,Du(this.a),delete this.a,nc.X.G.call(this)},Oo(rc,ya),Oo(ic,va),Oo(oc,tc),oc.prototype.ta=function(){js(this.a,"a")},oc.prototype.sa=function(t){js(this.a,new rc(t))},oc.prototype.ra=function(t){js(this.a,new ic(t))},oc.prototype.qa=function(){js(this.a,"b")},ec.prototype.createWebChannel=ec.prototype.a,nc.prototype.send=nc.prototype.h,nc.prototype.open=nc.prototype.g,nc.prototype.close=nc.prototype.close,ha.NO_ERROR=0,ha.TIMEOUT=8,ha.HTTP_ERROR=6,fa.COMPLETE="complete",pa.EventType=ma,ma.OPEN="a",ma.CLOSE="b",ma.ERROR="c",ma.MESSAGE="d",Ns.prototype.listen=Ns.prototype.va,wu.prototype.listenOnce=wu.prototype.wa,wu.prototype.getLastError=wu.prototype.Qa,wu.prototype.getLastErrorCode=wu.prototype.ua,wu.prototype.getStatus=wu.prototype.W,wu.prototype.getResponseJson=wu.prototype.Pa,wu.prototype.getResponseText=wu.prototype.$,wu.prototype.send=wu.prototype.ba;var sc=ha,ac=fa,uc=na,cc=pa,lc=wu,hc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();hc.o=-1;var fc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},dc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(oo.__extends)(e,t),e}(Error),pc=new uo.Logger("@firebase/firestore");function gc(){return pc.logLevel}function mc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(pc.logLevel<=uo.LogLevel.DEBUG){var r=e.map(bc);pc.debug.apply(pc,Object(oo.__spreadArray)(["Firestore (8.5.0): "+t],r))}}function yc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(pc.logLevel<=uo.LogLevel.ERROR){var r=e.map(bc);pc.error.apply(pc,Object(oo.__spreadArray)(["Firestore (8.5.0): "+t],r))}}function vc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(pc.logLevel<=uo.LogLevel.WARN){var r=e.map(bc);pc.warn.apply(pc,Object(oo.__spreadArray)(["Firestore (8.5.0): "+t],r))}}function bc(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Tb){return t}}function _c(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.5.0) INTERNAL ASSERTION FAILED: "+t;throw yc(e),new Error(e)}function wc(t,e){t||_c()}function Ec(t,e){return t}function Tc(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Sc=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Tc(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Ic(t,e){return t<e?-1:t>e?1:0}function Oc(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Cc(t){return t+"\0"}var kc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new dc(fc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new dc(fc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new dc(fc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new dc(fc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Ic(this.nanoseconds,t.nanoseconds):Ic(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Ac=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new kc(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function xc(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Nc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Pc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&_c(),void 0===n?n=t.length-e:n>t.length-e&&_c(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Rc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(oo.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new dc(fc.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Pc),Dc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(oo.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Dc.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new dc(fc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new dc(fc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new dc(fc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new dc(fc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Pc),Lc=function(){function t(t){this.fields=t,t.sort(Mc.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Oc(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Fc=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Ic(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Fc.EMPTY_BYTE_STRING=new Fc("");var Uc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vc(t){if(wc(!!t),"string"==typeof t){var e=0,n=Uc.exec(t);if(wc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:qc(t.seconds),nanos:qc(t.nanos)}}function qc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Bc(t){return"string"==typeof t?Fc.fromBase64String(t):Fc.fromUint8Array(t)}function Hc(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kc(t){var e=t.mapValue.fields.__previous_value__;return Hc(e)?Kc(e):e}function zc(t){var e=Vc(t.mapValue.fields.__local_write_time__.timestampValue);return new kc(e.seconds,e.nanos)}function Wc(t){return null==t}function Gc(t){return 0===t&&1/t==-1/0}function $c(t){return"number"==typeof t&&Number.isInteger(t)&&!Gc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Qc=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Rc.fromString(e))},t.fromName=function(e){return new t(Rc.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Rc.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Rc.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Rc(e.slice()))},t}();function Yc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hc(t)?4:10:_c()}function Xc(t,e){var n=Yc(t);if(n!==Yc(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zc(t).isEqual(zc(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Vc(t.timestampValue),r=Vc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Bc(t.bytesValue).isEqual(Bc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return qc(t.geoPointValue.latitude)===qc(e.geoPointValue.latitude)&&qc(t.geoPointValue.longitude)===qc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return qc(t.integerValue)===qc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=qc(t.doubleValue),r=qc(e.doubleValue);return n===r?Gc(n)===Gc(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Oc(t.arrayValue.values||[],e.arrayValue.values||[],Xc);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(xc(n)!==xc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Xc(n[i],r[i])))return!1;return!0}(t,e);default:return _c()}}function Jc(t,e){return void 0!==(t.values||[]).find(function(t){return Xc(t,e)})}function Zc(t,e){var n=Yc(t),r=Yc(e);if(n!==r)return Ic(n,r);switch(n){case 0:return 0;case 1:return Ic(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=qc(t.integerValue||t.doubleValue),r=qc(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return tl(t.timestampValue,e.timestampValue);case 4:return tl(zc(t),zc(e));case 5:return Ic(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Bc(t),r=Bc(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ic(n[i],r[i]);if(0!==o)return o}return Ic(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ic(qc(t.latitude),qc(e.latitude));return 0!==n?n:Ic(qc(t.longitude),qc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Zc(n[i],r[i]);if(o)return o}return Ic(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Ic(r[s],o[s]);if(0!==a)return a;var u=Zc(n[r[s]],i[o[s]]);if(0!==u)return u}return Ic(r.length,o.length)}(t.mapValue,e.mapValue);default:throw _c()}}function tl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ic(t,e);var n=Vc(t),r=Vc(e),i=Ic(n.seconds,r.seconds);return 0!==i?i:Ic(n.nanos,r.nanos)}function el(t){return nl(t)}function nl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Vc(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Bc(t.bytesValue).toBase64():"referenceValue"in t?Qc.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=nl(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+nl(t.fields[o])}return e+"}"}(t.mapValue):_c();var e}function rl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function il(t){return!!t&&"integerValue"in t}function ol(t){return!!t&&"arrayValue"in t}function sl(t){return!!t&&"nullValue"in t}function al(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ul(t){return!!t&&"mapValue"in t}var cl=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(Mc.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return Xc(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Yc(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=ul(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(Mc.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!ul(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function ll(t){var e=[];return Nc(t.fields||{},function(t,n){var r=new Mc([t]);if(ul(n)){var i=ll(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Lc(e)}var hl=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Ac.min(),cl.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,cl.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,cl.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=cl.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=cl.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),fl=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function dl(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new fl(t,e,n,r,i,o,s)}function pl(t){var e=Ec(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+el(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Wc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Cl(e.startAt)),e.endAt&&(n+="|ub:",n+=Cl(e.endAt)),e.h=n}return e.h}function gl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Al(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Xc(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Nl(t.startAt,e.startAt)&&Nl(t.endAt,e.endAt)}function ml(t){return Qc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var yl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(oo.__extends)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new vl(t,n,r):"array-contains"===n?new El(t,r):"in"===n?new Tl(t,r):"not-in"===n?new Sl(t,r):"array-contains-any"===n?new Il(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new bl(t,n):new _l(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Zc(e,this.value)):null!==e&&Yc(this.value)===Yc(e)&&this.m(Zc(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return _c()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),vl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Qc.fromName(r.referenceValue),i}return Object(oo.__extends)(e,t),e.prototype.matches=function(t){var e=Qc.comparator(t.key,this.key);return this.m(e)},e}(yl),bl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=wl(0,n),r}return Object(oo.__extends)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(yl),_l=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=wl(0,n),r}return Object(oo.__extends)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(yl);function wl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Qc.fromName(t.referenceValue)})}var El=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(oo.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return ol(e)&&Jc(e.arrayValue,this.value)},e}(yl),Tl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(oo.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Jc(this.value.arrayValue,e)},e}(yl),Sl=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(oo.__extends)(e,t),e.prototype.matches=function(t){if(Jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Jc(this.value.arrayValue,e)},e}(yl),Il=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(oo.__extends)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!ol(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Jc(e.value.arrayValue,t)})},e}(yl),Ol=function(t,e){this.position=t,this.before=e};function Cl(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return el(t)}).join(",")}var kl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Al(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function xl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Qc.comparator(Qc.fromName(s.referenceValue),n.key):Zc(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Nl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Xc(t.position[n],e.position[n]))return!1;return!0}var jl=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Pl(t,e,n,r,i,o,s,a){return new jl(t,e,n,r,i,o,s,a)}function Rl(t){return new jl(t)}function Dl(t){return!Wc(t.limit)&&"F"===t.limitType}function Ml(t){return!Wc(t.limit)&&"L"===t.limitType}function Ll(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Fl(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Ul(t){return null!==t.collectionGroup}function Vl(t){var e=Ec(t);if(null===e.p){e.p=[];var n=Fl(e),r=Ll(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new kl(n)),e.p.push(new kl(Mc.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new kl(Mc.keyField(),u))}}}return e.p}function ql(t){var e=Ec(t);if(!e.T)if("F"===e.limitType)e.T=dl(e.path,e.collectionGroup,Vl(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Vl(e);r<i.length;r++){var o=i[r];n.push(new kl(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Ol(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Ol(e.startAt.position,!e.startAt.before):null;e.T=dl(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Bl(t,e,n){return new jl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hl(t,e){return gl(ql(t),ql(e))&&t.limitType===e.limitType}function Kl(t){return pl(ql(t))+"|lt:"+t.limitType}function zl(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+el(e.value);var e}).join(", ")+"]"),Wc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Cl(t.startAt)),t.endAt&&(e+=", endAt: "+Cl(t.endAt)),"Target("+e+")"}(ql(t))+"; limitType="+t.limitType+")"}function Wl(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Qc.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!xl(t.startAt,Vl(t),e)||t.endAt&&xl(t.endAt,Vl(t),e))}(t,e)}function Gl(t){return function(e,n){for(var r=!1,i=0,o=Vl(t);i<o.length;i++){var s=o[i],a=$l(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function $l(t,e,n){var r=t.field.isKeyField()?Qc.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Zc(r,i):_c()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _c()}}function Ql(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gc(e)?"-0":e}}function Yl(t){return{integerValue:""+t}}function Xl(t,e){return $c(e)?Yl(e):Ql(t,e)}var Jl=function(){this._=void 0};function Zl(t,e,n){return t instanceof nh?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof rh?ih(t,e):t instanceof oh?sh(t,e):function(t,e){var n=eh(t,e),r=uh(n)+uh(t.A);return il(n)&&il(t.A)?Yl(r):Ql(t.R,r)}(t,e)}function th(t,e,n){return t instanceof rh?ih(t,e):t instanceof oh?sh(t,e):n}function eh(t,e){return t instanceof ah?il(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var nh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(oo.__extends)(e,t),e}(Jl),rh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(oo.__extends)(e,t),e}(Jl);function ih(t,e){for(var n=ch(e),r=function(t){n.some(function(e){return Xc(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var oh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(oo.__extends)(e,t),e}(Jl);function sh(t,e){for(var n=ch(e),r=function(t){n=n.filter(function(e){return!Xc(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ah=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(oo.__extends)(e,t),e}(Jl);function uh(t){return qc(t.integerValue||t.doubleValue)}function ch(t){return ol(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var lh=function(t,e){this.field=t,this.transform=e},hh=function(t,e){this.version=t,this.transformResults=e},fh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function dh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var ph=function(){};function gh(t,e,n){t instanceof _h?function(t,e,n){var r=t.value.clone(),i=Th(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof wh?function(t,e,n){if(dh(t.precondition,e)){var r=Th(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Eh(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function mh(t,e,n){t instanceof _h?function(t,e,n){if(dh(t.precondition,e)){var r=t.value.clone(),i=Sh(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(bh(e),r).setHasLocalMutations()}}(t,e,n):t instanceof wh?function(t,e,n){if(dh(t.precondition,e)){var r=Sh(t.fieldTransforms,n,e),i=e.data;i.setAll(Eh(t)),i.setAll(r),e.convertToFoundDocument(bh(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){dh(t.precondition,e)&&e.convertToNoDocument(Ac.min())}(t,e)}function yh(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=eh(o.transform,s||null);null!=a&&(null==n&&(n=cl.empty()),n.set(o.field,a))}return n||null}function vh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Oc(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof rh&&e instanceof rh||t instanceof oh&&e instanceof oh?Oc(t.elements,e.elements,Xc):t instanceof ah&&e instanceof ah?Xc(t.A,e.A):t instanceof nh&&e instanceof nh}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function bh(t){return t.isFoundDocument()?t.version:Ac.min()}var _h=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(oo.__extends)(e,t),e}(ph),wh=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(oo.__extends)(e,t),e}(ph);function Eh(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Th(t,e,n){var r=new Map;wc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,th(s,a,n[i]))}return r}function Sh(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Zl(a,u,e))}return r}var Ih,Oh,Ch=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(oo.__extends)(e,t),e}(ph),kh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(oo.__extends)(e,t),e}(ph),Ah=function(t){this.count=t};function xh(t){switch(t){case fc.OK:return _c();case fc.CANCELLED:case fc.UNKNOWN:case fc.DEADLINE_EXCEEDED:case fc.RESOURCE_EXHAUSTED:case fc.INTERNAL:case fc.UNAVAILABLE:case fc.UNAUTHENTICATED:return!1;case fc.INVALID_ARGUMENT:case fc.NOT_FOUND:case fc.ALREADY_EXISTS:case fc.PERMISSION_DENIED:case fc.FAILED_PRECONDITION:case fc.ABORTED:case fc.OUT_OF_RANGE:case fc.UNIMPLEMENTED:case fc.DATA_LOSS:return!0;default:return _c()}}function Nh(t){if(void 0===t)return yc("GRPC error has no .code"),fc.UNKNOWN;switch(t){case Ih.OK:return fc.OK;case Ih.CANCELLED:return fc.CANCELLED;case Ih.UNKNOWN:return fc.UNKNOWN;case Ih.DEADLINE_EXCEEDED:return fc.DEADLINE_EXCEEDED;case Ih.RESOURCE_EXHAUSTED:return fc.RESOURCE_EXHAUSTED;case Ih.INTERNAL:return fc.INTERNAL;case Ih.UNAVAILABLE:return fc.UNAVAILABLE;case Ih.UNAUTHENTICATED:return fc.UNAUTHENTICATED;case Ih.INVALID_ARGUMENT:return fc.INVALID_ARGUMENT;case Ih.NOT_FOUND:return fc.NOT_FOUND;case Ih.ALREADY_EXISTS:return fc.ALREADY_EXISTS;case Ih.PERMISSION_DENIED:return fc.PERMISSION_DENIED;case Ih.FAILED_PRECONDITION:return fc.FAILED_PRECONDITION;case Ih.ABORTED:return fc.ABORTED;case Ih.OUT_OF_RANGE:return fc.OUT_OF_RANGE;case Ih.UNIMPLEMENTED:return fc.UNIMPLEMENTED;case Ih.DATA_LOSS:return fc.DATA_LOSS;default:return _c()}}(Oh=Ih||(Ih={}))[Oh.OK=0]="OK",Oh[Oh.CANCELLED=1]="CANCELLED",Oh[Oh.UNKNOWN=2]="UNKNOWN",Oh[Oh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oh[Oh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oh[Oh.NOT_FOUND=5]="NOT_FOUND",Oh[Oh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oh[Oh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oh[Oh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oh[Oh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oh[Oh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oh[Oh.ABORTED=10]="ABORTED",Oh[Oh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oh[Oh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oh[Oh.INTERNAL=13]="INTERNAL",Oh[Oh.UNAVAILABLE=14]="UNAVAILABLE",Oh[Oh.DATA_LOSS=15]="DATA_LOSS";var jh=function(){function t(t,e){this.comparator=t,this.root=e||Rh.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rh.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rh.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Ph(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Ph(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Ph(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Ph(this.root,t,this.comparator,!0)},t}(),Ph=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Rh=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw _c();if(this.right.isRed())throw _c();var t=this.left.check();if(t!==this.right.check())throw _c();return t+(this.isRed()?0:1)},t}();Rh.EMPTY=null,Rh.RED=!0,Rh.BLACK=!1,Rh.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw _c()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw _c()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw _c()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw _c()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw _c()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Rh(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Dh=function(){function t(t){this.comparator=t,this.data=new jh(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Mh(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Mh(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Mh=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Lh=new jh(Qc.comparator);function Fh(){return Lh}var Uh=new jh(Qc.comparator);function Vh(){return Uh}var qh=new jh(Qc.comparator);function Bh(){return qh}var Hh=new Dh(Qc.comparator);function Kh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Hh,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var zh=new Dh(Ic);function Wh(){return zh}var Gh=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,$h.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Ac.min(),r,Wh(),Fh(),Kh())},t}(),$h=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Fc.EMPTY_BYTE_STRING,n,Kh(),Kh(),Kh())},t}(),Qh=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Yh=function(t,e){this.targetId=t,this.V=e},Xh=function(t,e,n,r){void 0===n&&(n=Fc.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Jh=function(){function t(){this.S=0,this.D=ef(),this.C=Fc.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Kh(),e=Kh(),n=Kh();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:_c()}}),new $h(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=ef()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Zh=function(){function t(t){this.W=t,this.G=new Map,this.H=Fh(),this.J=tf(),this.Y=new Dh(Ic)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:_c()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(ml(i))if(0===n){var o=new Qc(i.path);this.tt(e,o,hl.newNoDocument(o,Ac.min()))}else wc(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&ml(o.target)){var s=new Qc(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,hl.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=Kh();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Gh(t,n,this.Y,this.H,r);return this.H=Fh(),this.J=tf(),this.Y=new Dh(Ic),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Jh,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Dh(Ic),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||mc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Jh),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function tf(){return new jh(Qc.comparator)}function ef(){return new jh(Qc.comparator)}var nf={asc:"ASCENDING",desc:"DESCENDING"},rf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},of=function(t,e){this.databaseId=t,this.I=e};function sf(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function af(t,e){return t.I?e.toBase64():e.toUint8Array()}function uf(t,e){return sf(t,e.toTimestamp())}function cf(t){return wc(!!t),Ac.fromTimestamp(function(t){var e=Vc(t);return new kc(e.seconds,e.nanos)}(t))}function lf(t,e){return function(t){return new Rc(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function hf(t){var e=Rc.fromString(t);return wc(Df(e)),e}function ff(t,e){return lf(t.databaseId,e.path)}function df(t,e){var n=hf(e);if(n.get(1)!==t.databaseId.projectId)throw new dc(fc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new dc(fc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Qc(yf(n))}function pf(t,e){return lf(t.databaseId,e)}function gf(t){var e=hf(t);return 4===e.length?Rc.emptyPath():yf(e)}function mf(t){return new Rc(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yf(t){return wc(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function vf(t,e,n){return{name:ff(t,e),fields:n.toProto().mapValue.fields}}function bf(t,e,n){var r=df(t,e.name),i=cf(e.updateTime),o=new cl({mapValue:{fields:e.fields}}),s=hl.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function _f(t,e){var n;if(e instanceof _h)n={update:vf(t,e.key,e.value)};else if(e instanceof Ch)n={delete:ff(t,e.key)};else if(e instanceof wh)n={update:vf(t,e.key,e.data),updateMask:Rf(e.fieldMask)};else{if(!(e instanceof kh))return _c();n={verify:ff(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof nh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof rh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof oh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ah)return{fieldPath:e.field.canonicalString(),increment:n.A};throw _c()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:uf(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:_c()}(t,e.precondition)),n}function wf(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?fh.updateTime(cf(t.updateTime)):void 0!==t.exists?fh.exists(t.exists):fh.none()}(e.currentDocument):fh.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(wc("REQUEST_TIME"===e.setToServerValue),n=new nh):"appendMissingElements"in e?n=new rh(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new oh(e.removeAllFromArray.values||[]):"increment"in e?n=new ah(t,e.increment):_c();var r=Mc.fromServerFormat(e.fieldPath);return new lh(r,n)}(t,e)}):[];if(e.update){var i=df(t,e.update.name),o=new cl({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Lc((t.fieldPaths||[]).map(function(t){return Mc.fromServerFormat(t)}))}(e.updateMask);return new wh(i,o,s,n,r)}return new _h(i,o,n,r)}if(e.delete){var a=df(t,e.delete);return new Ch(a,n)}if(e.verify){var u=df(t,e.verify);return new kh(u,n)}return _c()}function Ef(t,e){return{documents:[pf(t,e.path)]}}function Tf(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=pf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=pf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(al(t.value))return{unaryFilter:{field:xf(t.field),op:"IS_NAN"}};if(sl(t.value))return{unaryFilter:{field:xf(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(al(t.value))return{unaryFilter:{field:xf(t.field),op:"IS_NOT_NAN"}};if(sl(t.value))return{unaryFilter:{field:xf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xf(t.field),op:Af(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:xf(t.field),direction:kf(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Wc(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Of(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Of(e.endAt)),n}function Sf(t){var e=gf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){wc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=If(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new kl(Nf(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Wc(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Cf(n.startAt));var l=null;return n.endAt&&(l=Cf(n.endAt)),Pl(e,i,a,s,u,"F",c,l)}function If(t){return t?void 0!==t.unaryFilter?[Pf(t)]:void 0!==t.fieldFilter?[jf(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return If(t)}).reduce(function(t,e){return t.concat(e)}):_c():[]}function Of(t){return{before:t.before,values:t.position}}function Cf(t){return new Ol(t.values||[],!!t.before)}function kf(t){return nf[t]}function Af(t){return rf[t]}function xf(t){return{fieldPath:t.canonicalString()}}function Nf(t){return Mc.fromServerFormat(t.fieldPath)}function jf(t){return yl.create(Nf(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return _c()}}(t.fieldFilter.op),t.fieldFilter.value)}function Pf(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Nf(t.unaryFilter.field);return yl.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Nf(t.unaryFilter.field);return yl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Nf(t.unaryFilter.field);return yl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Nf(t.unaryFilter.field);return yl.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return _c()}}function Rf(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Df(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Mf(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ff(e)),e=Lf(t.get(n),e);return Ff(e)}function Lf(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ff(t){return t+"\x01\x01"}function Uf(t){var e=t.length;if(wc(e>=2),2===e)return wc("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Rc.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&_c(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:_c()}o=s+2}return new Rc(r)}var Vf=function(t,e){this.seconds=t,this.nanoseconds=e},qf=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};qf.store="owner",qf.key="owner";var Bf=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Bf.store="mutationQueues",Bf.keyPath="userId";var Hf=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Hf.store="mutations",Hf.keyPath="batchId",Hf.userMutationsIndex="userMutationsIndex",Hf.userMutationsKeyPath=["userId","batchId"];var Kf=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Mf(e)]},t.key=function(t,e,n){return[t,Mf(e),n]},t}();Kf.store="documentMutations",Kf.PLACEHOLDER=new Kf;var zf=function(t,e){this.path=t,this.readTime=e},Wf=function(t,e){this.path=t,this.version=e},Gf=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Gf.store="remoteDocuments",Gf.readTimeIndex="readTimeIndex",Gf.readTimeIndexPath="readTime",Gf.collectionReadTimeIndex="collectionReadTimeIndex",Gf.collectionReadTimeIndexPath=["parentPath","readTime"];var $f=function(t){this.byteSize=t};$f.store="remoteDocumentGlobal",$f.key="remoteDocumentGlobalKey";var Qf=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Qf.store="targets",Qf.keyPath="targetId",Qf.queryTargetsIndexName="queryTargetsIndex",Qf.queryTargetsKeyPath=["canonicalId","targetId"];var Yf=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Yf.store="targetDocuments",Yf.keyPath=["targetId","path"],Yf.documentTargetsIndex="documentTargetsIndex",Yf.documentTargetsKeyPath=["path","targetId"];var Xf=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Xf.key="targetGlobalKey",Xf.store="targetGlobal";var Jf=function(t,e){this.collectionId=t,this.parent=e};Jf.store="collectionParents",Jf.keyPath=["collectionId","parent"];var Zf=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Zf.store="clientMetadata",Zf.keyPath="clientId";var td=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};td.store="bundles",td.keyPath="bundleId";var ed=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ed.store="namedQueries",ed.keyPath="name";var nd=Object(oo.__spreadArray)(Object(oo.__spreadArray)([],Object(oo.__spreadArray)(Object(oo.__spreadArray)([],Object(oo.__spreadArray)(Object(oo.__spreadArray)([],Object(oo.__spreadArray)(Object(oo.__spreadArray)([],[Bf.store,Hf.store,Kf.store,Gf.store,Qf.store,qf.store,Xf.store,Yf.store]),[Zf.store])),[$f.store])),[Jf.store])),[td.store,ed.store]),rd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",id=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),od=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},sd=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&_c(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),ad=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new od,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new ld(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=gd(e.target.error);n.ft.reject(new ld(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ld(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(mc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new fd(e)},t}(),ud=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(ao.getUA)())&&yc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return mc("SimpleDb","Removing database:",t),dd(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(ao.getUA)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(mc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new ld(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new dc(fc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new ld(t,n))},i.onupgradeneeded=function(t){mc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){mc("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(oo.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(oo.__generator)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(oo.__generator)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=ad.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),sd.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return mc("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),cd=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return dd(this.Pt.delete())},t}(),ld=function(t){function e(e,n){var r=this;return(r=t.call(this,fc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(oo.__extends)(e,t),e}(dc);function hd(t){return"IndexedDbTransactionError"===t.name}var fd=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(mc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(mc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),dd(n)},t.prototype.add=function(t){return mc("SimpleDb","ADD",this.store.name,t,t),dd(this.store.add(t))},t.prototype.get=function(t){var e=this;return dd(this.store.get(t)).next(function(n){return void 0===n&&(n=null),mc("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return mc("SimpleDb","DELETE",this.store.name,t),dd(this.store.delete(t))},t.prototype.count=function(){return mc("SimpleDb","COUNT",this.store.name),dd(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){mc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new sd(function(n,r){e.onerror=function(t){var e=gd(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new sd(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new cd(i),s=e(i.primaryKey,i.value,o);if(s instanceof sd){var a=s.catch(function(t){return o.done(),sd.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return sd.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function dd(t){return new sd(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=gd(t.target.error);n(e)}})}var pd=!1;function gd(t){var e=ud._t(Object(ao.getUA)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new dc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return pd||(pd=!0,setTimeout(function(){throw r},0)),r}}return t}var md=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(oo.__extends)(e,t),e}(id);function yd(t,e){var n=Ec(t);return ud.It(n.Mt,e)}var vd=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&gh(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&mh(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&mh(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ac.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Kh())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Oc(this.mutations,t.mutations,function(t,e){return vh(t,e)})&&Oc(this.baseMutations,t.baseMutations,function(t,e){return vh(t,e)})},t}(),bd=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){wc(e.mutations.length===r.length);for(var i=Bh(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),_d=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Ac.min()),void 0===o&&(o=Ac.min()),void 0===s&&(s=Fc.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),wd=function(t){this.Lt=t};function Ed(t,e){if(e.document)return bf(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Qc.fromSegments(e.noDocument.path),r=Cd(e.noDocument.readTime),i=hl.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Qc.fromSegments(e.unknownDocument.path);return r=Cd(e.unknownDocument.version),hl.newUnknownDocument(o,r)}return _c()}function Td(t,e,n){var r=Sd(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:ff(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:sf(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Gf(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Od(e.version);return s=e.hasCommittedMutations,new Gf(null,new zf(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Od(e.version);return new Gf(new Wf(c,l),null,null,!0,r,i)}return _c()}function Sd(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Id(t){var e=new kc(t[0],t[1]);return Ac.fromTimestamp(e)}function Od(t){var e=t.toTimestamp();return new Vf(e.seconds,e.nanoseconds)}function Cd(t){var e=new kc(t.seconds,t.nanoseconds);return Ac.fromTimestamp(e)}function kd(t,e){for(var n=(e.baseMutations||[]).map(function(e){return wf(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return wf(t.Lt,e)}),o=kc.fromMillis(e.localWriteTimeMs);return new vd(e.batchId,o,n,i)}function Ad(t){var e,n,r=Cd(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Cd(t.lastLimboFreeSnapshotVersion):Ac.min();return void 0!==t.query.documents?(wc(1===(n=t.query).documents.length),e=ql(Rl(gf(n.documents[0])))):e=function(t){return ql(Sf(t))}(t.query),new _d(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Fc.fromBase64String(t.resumeToken))}function xd(t,e){var n,r=Od(e.snapshotVersion),i=Od(e.lastLimboFreeSnapshotVersion);n=ml(e.target)?Ef(t.Lt,e.target):Tf(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Qf(e.targetId,pl(e.target),r,o,e.sequenceNumber,i,n)}function Nd(t){var e=Sf({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Bl(e,e.limit,"L"):e}var jd=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Pd(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Cd(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Pd(t).put({bundleId:(n=e).id,createTime:Od(cf(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Rd(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Nd(e.bundledQuery),readTime:Cd(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Rd(t).put(function(t){return{name:t.name,readTime:Od(cf(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Pd(t){return yd(t,td.store)}function Rd(t){return yd(t,ed.store)}var Dd=function(){function t(){this.Bt=new Md}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),sd.resolve()},t.prototype.getCollectionParents=function(t,e){return sd.resolve(this.Bt.getEntries(e))},t}(),Md=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Dh(Rc.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Dh(Rc.comparator)).toArray()},t}(),Ld=function(){function t(){this.qt=new Md}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Mf(i)};return Fd(t).put(o)}return sd.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Cc(e),""],!1,!0);return Fd(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Uf(o.parent))}return n})},t}();function Fd(t){return yd(t,Jf.store)}var Ud={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vd=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function qd(t,e,n){var r=t.store(Hf.store),i=t.store(Kf.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){wc(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Kf.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return sd.waitFor(o).next(function(){return c})}function Bd(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw _c();e=t.noDocument}return JSON.stringify(e).length}Vd.DEFAULT_COLLECTION_PERCENTILE=10,Vd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vd.DEFAULT=new Vd(41943040,Vd.DEFAULT_COLLECTION_PERCENTILE,Vd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vd.DISABLED=new Vd(-1,0,0);var Hd=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return wc(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zd(t).Ot({index:Hf.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Wd(t),s=zd(t);return s.add({}).next(function(a){wc("number"==typeof a);for(var u=new vd(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return _f(t.Lt,e)}),i=n.mutations.map(function(e){return _f(t.Lt,e)});return new Hf(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Dh(function(t,e){return Ic(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=Kf.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Kf.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),sd.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return zd(t).get(e).next(function(t){return t?(wc(t.userId===n.userId),kd(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?sd.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return zd(t).Ot({index:Hf.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(wc(e.batchId>=r),o=kd(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return zd(t).Ot({index:Hf.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zd(t).Nt(Hf.userMutationsIndex,n).next(function(t){return t.map(function(t){return kd(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Kf.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Wd(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=Uf(r[1]);if(a===n.userId&&e.path.isEqual(c))return zd(t).get(u).next(function(t){if(!t)throw _c();wc(t.userId===n.userId),o.push(kd(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Dh(Ic),i=[];return e.forEach(function(e){var o=Kf.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Wd(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=Uf(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),sd.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Kf.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Dh(Ic);return Wd(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=Uf(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(zd(t).get(e).next(function(t){if(null===t)throw _c();wc(t.userId===n.userId),r.push(kd(n.R,t))}))}),sd.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return qd(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),sd.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return sd.resolve();var r=IDBKeyRange.lowerBound(Kf.prefixForUser(e.userId)),i=[];return Wd(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=Uf(t[1]);i.push(o)}else r.done()}).next(function(){wc(0===i.length)})})},t.prototype.containsKey=function(t,e){return Kd(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Gd(t).get(this.userId).next(function(t){return t||new Bf(e.userId,-1,"")})},t}();function Kd(t,e,n){var r=Kf.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Wd(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function zd(t){return yd(t,Hf.store)}function Wd(t){return yd(t,Kf.store)}function Gd(t){return yd(t,Bf.store)}var $d=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Qd=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new $d(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Ac.fromTimestamp(new kc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Yd(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return wc(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Yd(t).Ot(function(s,a){var u=Ad(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return sd.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Yd(t).Ot(function(t,n){var r=Ad(n);e(r)})},t.prototype.Xt=function(t){return Xd(t).get(Xf.key).next(function(t){return wc(null!==t),t})},t.prototype.Zt=function(t,e){return Xd(t).put(Xf.key,e)},t.prototype.te=function(t,e){return Yd(t).put(xd(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=pl(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Yd(t).Ot({range:r,index:Qf.queryTargetsIndexName},function(t,n,r){var o=Ad(n);gl(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Jd(t);return e.forEach(function(e){var s=Mf(e.path);i.push(o.put(new Yf(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),sd.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Jd(t);return sd.forEach(e,function(e){var o=Mf(e.path);return sd.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Jd(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Jd(t),i=Kh();return r.Ot({range:n,kt:!0},function(t,e,n){var r=Uf(t[1]),o=new Qc(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Mf(e.path),r=IDBKeyRange.bound([n],[Cc(n)],!1,!0),i=0;return Jd(t).Ot({index:Yf.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Yd(t).get(e).next(function(t){return t?Ad(t):null})},t}();function Yd(t){return yd(t,Qf.store)}function Xd(t){return yd(t,Xf.store)}function Jd(t){return yd(t,Yf.store)}function Zd(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){if(t.code!==fc.FAILED_PRECONDITION||t.message!==rd)throw t;return mc("LocalStore","Unexpectedly lost primary lease"),[2]})})}function tp(t,e){var n=t[1],r=e[1],i=Ic(t[0],e[0]);return 0===i?Ic(n,r):i}var ep=function(){function t(t){this.ne=t,this.buffer=new Dh(tp),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();tp(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),np=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;mc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(oo.__awaiter)(e,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return hd(e=n.sent())?(mc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Zd(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),rp=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return sd.resolve(hc.o);var r=new ep(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(mc("LruGarbageCollector","Garbage collection skipped; disabled"),sd.resolve(Ud)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(mc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Ud):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(mc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),gc()<=uo.LogLevel.DEBUG&&mc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),sd.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),ip=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new rp(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return op(t,n)},t.prototype.removeReference=function(t,e,n){return op(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return op(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Gd(t).$t(function(r){return Kd(t,r,e).next(function(t){return t&&(n=!0),sd.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Jd(t).delete([0,Mf(s.path)])})});i.push(u)}}).next(function(){return sd.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return op(t,e)},t.prototype.we=function(t,e){var n,r=Jd(t),i=hc.o;return r.Ot({index:Yf.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==hc.o&&e(new Qc(Uf(n)),i),i=s,n=o):i=hc.o}).next(function(){i!==hc.o&&e(new Qc(Uf(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function op(t,e){return Jd(t).put(function(t,e){return new Yf(0,Mf(t.path),e)}(e,t.currentSequenceNumber))}var sp=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Nc(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return jc(this.inner)},t}(),ap=function(){function t(){this.changes=new sp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Ac.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:hl.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?sd.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),up=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return hp(t).put(fp(e),n)},t.prototype.removeEntry=function(t,e){var n=hp(t),r=fp(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return hp(t).get(fp(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return hp(t).get(fp(e)).next(function(t){return{document:n.ye(e,t),size:Bd(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Fh();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Fh(),i=new jh(Qc.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Bd(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return sd.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return hp(t).Ot({range:r},function(t,e,r){for(var s=Qc.fromSegments(t);o&&Qc.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Fh(),o=e.path.length+1,s={};if(n.isEqual(Ac.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Sd(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Gf.collectionReadTimeIndex}return hp(t).Ot(s,function(t,n,s){if(t.length===o){var a=Ed(r.R,n);e.path.isPrefixOf(a.key.path)?Wl(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new cp(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return lp(t).get($f.key).next(function(t){return wc(!!t),t})},t.prototype.me=function(t,e){return lp(t).put($f.key,e)},t.prototype.ye=function(t,e){if(e){var n=Ed(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Ac.min()))return n}return hl.newInvalidDocument(t)},t}(),cp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new sp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(oo.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Dh(function(t,e){return Ic(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Td(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Bd(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Td(e.Ie.R,hl.newNoDocument(o,Ac.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),sd.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(ap);function lp(t){return yd(t,$f.store)}function hp(t){return yd(t,Gf.store)}function fp(t){return t.path.toArray()}var dp=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;wc(n<r&&n>=0&&r<=11);var o=new ad("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(qf.store)}(t),function(t){t.createObjectStore(Bf.store,{keyPath:Bf.keyPath}),t.createObjectStore(Hf.store,{keyPath:Hf.keyPath,autoIncrement:!0}).createIndex(Hf.userMutationsIndex,Hf.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Kf.store)}(t),pp(t),function(t){t.createObjectStore(Gf.store)}(t));var s=sd.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Yf.store),t.deleteObjectStore(Qf.store),t.deleteObjectStore(Xf.store)}(t),pp(t)),s=s.next(function(){return function(t){var e=t.store(Xf.store),n=new Xf(0,0,Ac.min().toTimestamp(),0);return e.put(Xf.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Hf.store).Nt().next(function(n){t.deleteObjectStore(Hf.store),t.createObjectStore(Hf.store,{keyPath:Hf.keyPath,autoIncrement:!0}).createIndex(Hf.userMutationsIndex,Hf.userMutationsKeyPath,{unique:!0});var r=e.store(Hf.store),i=n.map(function(t){return r.put(t)});return sd.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Zf.store,{keyPath:Zf.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore($f.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Gf.store);e.createIndex(Gf.readTimeIndex,Gf.readTimeIndexPath,{unique:!1}),e.createIndex(Gf.collectionReadTimeIndex,Gf.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(td.store,{keyPath:td.keyPath})}(t),function(t){t.createObjectStore(ed.store,{keyPath:ed.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Gf.store).Ot(function(t,n){e+=Bd(n)}).next(function(){var n=new $f(e);return t.store($f.store).put($f.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(Bf.store),r=t.store(Hf.store);return n.Nt().next(function(n){return sd.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Hf.userMutationsIndex,i).next(function(r){return sd.forEach(r,function(r){wc(r.userId===n.userId);var i=kd(e.R,r);return qd(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Yf.store),n=t.store(Gf.store);return t.store(Xf.store).get(Xf.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new Rc(n),s=function(t){return[0,Mf(t)]}(o);r.push(e.get(s).next(function(n){return n?sd.resolve():function(n){return e.put(new Yf(0,Mf(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return sd.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Jf.store,{keyPath:Jf.keyPath});var n=e.store(Jf.store),r=new Md,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Mf(i)})}};return e.store(Gf.store).Ot({kt:!0},function(t,e){var n=new Rc(t);return i(n.popLast())}).next(function(){return e.store(Kf.store).Ot({kt:!0},function(t,e){var n=Uf(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Qf.store);return n.Ot(function(t,r){var i=Ad(r),o=xd(e.R,i);return n.put(o)})},t}();function pp(t){t.createObjectStore(Yf.store,{keyPath:Yf.keyPath}).createIndex(Yf.documentTargetsIndex,Yf.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Qf.store,{keyPath:Qf.keyPath}).createIndex(Qf.queryTargetsIndexName,Qf.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Xf.store)}var gp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",mp=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new dc(fc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ip(this,i),this.Le=n+"main",this.R=new wd(u),this.Be=new ud(this.Le,11,new dp(this.R)),this.qe=new Qd(this.referenceDelegate,this.R),this.Ut=new Ld,this.Ue=function(t,e){return new up(t,e)}(this.R,this.Ut),this.Qe=new jd,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&yc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new dc(fc.FAILED_PRECONDITION,gp);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new hc(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(oo.__awaiter)(e,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(oo.__awaiter)(e,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(oo.__awaiter)(e,void 0,void 0,function(){return Object(oo.__generator)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return vp(e).put(new Zf(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(hd(e))return mc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return mc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return yp(t).get(qf.key).next(function(t){return sd.resolve(e.tn(t))})},t.prototype.en=function(t){return vp(t).delete(this.clientId)},t.prototype.nn=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=yd(t,Zf.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return sd.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?sd.resolve(!0):yp(t).get(qf.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new dc(fc.FAILED_PRECONDITION,gp);return!1}}return!(!e.networkEnabled||!e.inForeground)||vp(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&mc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t=this;return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[qf.store,Zf.store],function(e){var n=new md(e,hc.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return vp(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Hd.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return mc("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",nd,function(o){return r=new md(o,i.Ne?i.Ne.next():hc.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw yc("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new dc(fc.FAILED_PRECONDITION,rd);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return yp(t).get(qf.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new dc(fc.FAILED_PRECONDITION,gp)})},t.prototype.Ze=function(t){var e=new qf(this.clientId,this.allowTabSynchronization,Date.now());return yp(t).put(qf.key,e)},t.yt=function(){return ud.yt()},t.prototype.Xe=function(t){var e=this,n=yp(t);return n.get(qf.key).next(function(t){return e.tn(t)?(mc("IndexedDbPersistence","Releasing primary lease."),n.delete(qf.key)):sd.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(yc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return mc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return yc("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){yc("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function yp(t){return yd(t,qf.store)}function vp(t){return yd(t,Zf.store)}function bp(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var _p=function(t,e){this.progress=t,this.wn=e},wp=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Qc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Ul(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Qc(e)).next(function(t){var e=Vh();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Vh();return this.Ut.getCollectionParents(t,i).next(function(s){return sd.forEach(s,function(s){var a=function(t,e){return new jl(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=hl.newInvalidDocument(c),r=r.insert(c,l)),mh(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Wl(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Kh(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof wh&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Ep=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Kh(),i=Kh(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Tp=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Ac.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Dl(e)||Ml(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(gc()<=uo.LogLevel.DEBUG&&mc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),zl(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Dh(Gl(t));return e.forEach(function(e,r){Wl(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return gc()<=uo.LogLevel.DEBUG&&mc("QueryEngine","Using full collection scan to execute query:",zl(e)),this.Sn.getDocumentsMatchingQuery(t,e,Ac.min())},t}(),Sp=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new jh(Ic),this.kn=new sp(function(t){return pl(t)},gl),this.On=Ac.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new wp(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Ip(t,e,n,r){return new Sp(t,e,n,r)}function Op(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(oo.__generator)(this,function(s){switch(s.label){case 0:return n=Ec(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new wp(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Kh(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Cp(t,e){var n=Ec(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=sd.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);wc(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function kp(t){var e=Ec(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Ap(t,e){var n=Ec(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return wc(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=Fh();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(xp(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Ac.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return sd.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function xp(t,e,n,r,i){var o=Kh();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Fh();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Ac.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):mc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Np(t,e){var n=Ec(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function jp(t,e){var n=Ec(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?sd.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new _d(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Pp(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return Object(oo.__generator)(this,function(a){switch(a.label){case 0:r=Ec(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!hd(s=a.sent()))throw s;return mc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Rp(t,e,n){var r=Ec(t),i=Ac.min(),o=Kh();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Ec(t),i=r.kn.get(n);return void 0!==i?sd.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,ql(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Ac.min(),n?o:Kh())}).next(function(t){return{documents:t,Bn:o}})})}function Dp(t,e){var n=Ec(t),r=Ec(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Mp(t){var e=Ec(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Ec(t),i=Fh(),o=Sd(n),s=hp(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:Gf.readTimeIndex,range:a},function(t,e){var n=Ed(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:Id(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function Lp(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){return[2,(e=Ec(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=hp(t),n=Ac.min();return e.Ot({index:Gf.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Id(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function Fp(t,e,n,r){return Object(oo.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(oo.__generator)(this,function(p){switch(p.label){case 0:for(i=Ec(t),o=Kh(),s=Fh(),a=Bh(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return f=i.$n.newChangeBuffer({trackRemovals:!0}),[4,jp(i,function(t){return ql(Rl(Rc.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return xp(t,f,s,Ac.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function Up(t,e,n){return void 0===n&&(n=Kh()),Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return[4,jp(t,ql(Nd(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Ec(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=cf(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(Fc.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var Vp=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return sd.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:cf(n.createTime)}),sd.resolve()},t.prototype.getNamedQuery=function(t,e){return sd.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Nd(t.bundledQuery),readTime:cf(t.readTime)}}(e)),sd.resolve()},t}(),qp=function(){function t(){this.Wn=new Dh(Bp.Gn),this.zn=new Dh(Bp.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Bp(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new Bp(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Qc(new Rc([])),r=new Bp(n,t),i=new Bp(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Qc(new Rc([])),n=new Bp(e,t),r=new Bp(e,t+1),i=Kh();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Bp(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Bp=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Qc.comparator(t.key,e.key)||Ic(t.ns,e.ns)},t.Hn=function(t,e){return Ic(t.ns,e.ns)||Qc.comparator(t.key,e.key)},t}(),Hp=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Dh(Bp.Gn)}return t.prototype.checkEmpty=function(t){return sd.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new vd(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Bp(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return sd.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return sd.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return sd.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return sd.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return sd.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Bp(e,0),i=new Bp(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),sd.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Dh(Ic);return e.forEach(function(t){var e=new Bp(t,0),i=new Bp(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),sd.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Qc.isDocumentKey(i)||(i=i.child(""));var o=new Bp(new Qc(i),0),s=new Dh(Ic);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),sd.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;wc(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return sd.forEach(e.mutations,function(i){var o=new Bp(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Bp(e,0),r=this.rs.firstAfterOrEqual(n);return sd.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return sd.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Kp=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new jh(Qc.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return sd.resolve(n?n.document.clone():hl.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Fh();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():hl.newInvalidDocument(t))}),sd.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Fh(),i=new Qc(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Wl(e,u)&&(r=r.insert(u.key,u.clone()))}return sd.resolve(r)},t.prototype.fs=function(t,e){return sd.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new zp(this)},t.prototype.getSize=function(t){return sd.resolve(this.size)},t}(),zp=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(oo.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),sd.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ap),Wp=function(){function t(t){this.persistence=t,this.ds=new sp(function(t){return pl(t)},gl),this.lastRemoteSnapshotVersion=Ac.min(),this.highestTargetId=0,this.ws=0,this._s=new qp,this.targetCount=0,this.ys=$d.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),sd.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return sd.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return sd.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),sd.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),sd.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new $d(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,sd.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),sd.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,sd.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),sd.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return sd.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return sd.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),sd.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),sd.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),sd.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return sd.resolve(n)},t.prototype.containsKey=function(t,e){return sd.resolve(this._s.containsKey(e))},t}(),Gp=function(){function t(t,e){var n=this;this.gs={},this.Ne=new hc(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Wp(this),this.Ut=new Dd,this.Ue=function(t,e){return new Kp(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new wd(e),this.Qe=new Vp(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Hp(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;mc("MemoryPersistence","Starting transaction:",t);var i=new $p(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return sd.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),$p=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(oo.__extends)(e,t),e}(id),Qp=function(){function t(t){this.persistence=t,this.As=new qp,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw _c()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),sd.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),sd.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),sd.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return sd.forEach(this.vs,function(r){var i=Qc.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return sd.or([function(){return sd.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Yp=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Xp(t,e){return"firestore_clients_"+t+"_"+e}function Jp(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Zp(t,e){return"firestore_targets_"+t+"_"+e}Yp.UNAUTHENTICATED=new Yp(null),Yp.GOOGLE_CREDENTIALS=new Yp("google-credentials-uid"),Yp.FIRST_PARTY=new Yp("first-party-uid");var tg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new dc(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(yc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),eg=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new dc(i.error.code,i.error.message)),o?new t(e,i.state,r):(yc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ng=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Wh(),s=0;i&&s<r.activeTargetIds.length;++s)i=$c(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(yc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),rg=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(yc("SharedClientState","Failed to parse online state: "+e),null)},t}(),ig=function(){function t(){this.activeTargetIds=Wh()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),og=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new jh(Ic),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=Xp(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new ig),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(oo.__generator)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Xp(this.persistenceKey,r)))&&(o=ng.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Zp(this.persistenceKey,t));if(n){var r=eg.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Zp(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return mc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){mc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){mc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(mc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void yc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(oo.__awaiter)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(oo.__generator)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=hc.o;if(null!=t)try{var n=JSON.parse(t);wc("number"==typeof n),e=n}catch(t){yc("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==hc.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new tg(this.currentUser,t,e,n),i=Jp(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Jp(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Zp(this.persistenceKey,t),i=new eg(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return ng.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return tg.Vs(new Yp(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return eg.Vs(r,e)},t.prototype.js=function(t){return rg.Vs(t)},t.prototype.ii=function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(mc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Wh();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),sg=function(){function t(){this.li=new ig,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new ig,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),ag=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),ug=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){mc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){mc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),cg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},lg=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),hg=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(oo.__extends)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new lc;s.listenOnce(ac.COMPLETE,function(){try{switch(s.getLastErrorCode()){case sc.NO_ERROR:var e=s.getResponseJson();mc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case sc.TIMEOUT:mc("Connection",'RPC "'+t+'" timed out'),o(new dc(fc.DEADLINE_EXCEEDED,"Request time out"));break;case sc.HTTP_ERROR:var n=s.getStatus();if(mc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(fc).indexOf(e)>=0?e:fc.UNKNOWN}(r.status);o(new dc(a,r.message))}else o(new dc(fc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new dc(fc.UNAVAILABLE,"Connection failed."));break;default:_c()}}finally{mc("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new ec,i=ia(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(ao.isMobileCordova)()||Object(ao.isReactNative)()||Object(ao.isElectron)()||Object(ao.isIE)()||Object(ao.isUWP)()||Object(ao.isBrowserExtension)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");mc("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new lg({Ei:function(t){c?mc("Connection","Not sending because WebChannel is closed:",t):(u||(mc("Connection","Opening WebChannel transport."),a.open(),u=!0),mc("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,cc.EventType.OPEN,function(){c||mc("Connection","WebChannel transport opened.")}),h(a,cc.EventType.CLOSE,function(){c||(c=!0,mc("Connection","WebChannel transport closed"),l.Vi())}),h(a,cc.EventType.ERROR,function(t){c||(c=!0,vc("Connection","WebChannel transport errored:",t),l.Vi(new dc(fc.UNAVAILABLE,"The operation could not be completed")))}),h(a,cc.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];wc(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){mc("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Ih[t];if(void 0!==e)return Nh(e)}(i),s=r.message;void 0===o&&(o=fc.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new dc(o,s)),a.close()}else mc("Connection","WebChannel received:",n),l.Si(n)}}),h(i,uc.STAT_EVENT,function(t){10===t.stat?mc("Connection","Detected buffering proxy"):11===t.stat&&mc("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);mc("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return mc("RestConnection","Received: ",t),t},function(e){throw vc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.5.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+cg[t]},t}());function fg(){return"undefined"!=typeof window?window:null}function dg(){return"undefined"!=typeof document?document:null}function pg(t){return new of(t,!0)}var gg=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&mc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),mg=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new gg(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===fc.RESOURCE_EXHAUSTED?(yc(e.toString()),yc("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===fc.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new dc(fc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(oo.__awaiter)(t,void 0,void 0,function(){return Object(oo.__generator)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return mc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(mc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),yg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(oo.__extends)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:_c()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(wc(void 0===e||"string"==typeof e),Fc.fromBase64String(e||"")):(wc(void 0===e||e instanceof Uint8Array),Fc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?fc.UNKNOWN:Nh(t.code);return new dc(e,t.message||"")}(a);n=new Xh(r,i,o,s||null)}else if("documentChange"in e){i=df(t,(r=e.documentChange).document.name),o=cf(r.document.updateTime);var a=new cl({mapValue:{fields:r.document.fields}}),u=(s=hl.newFoundDocument(i,o,a),r.targetIds||[]);n=new Qh(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=df(t,(r=e.documentDelete).document),o=r.readTime?cf(r.readTime):Ac.min(),a=hl.newNoDocument(i,o),n=new Qh([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=df(t,(r=e.documentRemove).document),n=new Qh([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return _c();var c=e.filter;i=new Ah(r=c.count||0),n=new Yh(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Ac.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ac.min():e.readTime?cf(e.readTime):Ac.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=mf(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=ml(r)?{documents:Ef(t,r)}:{query:Tf(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=af(t,e.resumeToken):e.snapshotVersion.compareTo(Ac.min())>0&&(n.readTime=sf(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _c()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=mf(this.R),e.removeTarget=t,this.cr(e)},e}(mg),vg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(oo.__extends)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(wc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(wc(void 0!==e),t.map(function(t){return function(t,e){var n=cf(t.updateTime?t.updateTime:e);return n.isEqual(Ac.min())&&(n=cf(e)),new hh(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=cf(t.commitTime);return this.listener.Tr(n,e)}return wc(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=mf(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return _f(e.R,t)})};this.cr(n)},e}(mg),bg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(oo.__extends)(e,t),e.prototype.br=function(){if(this.Rr)throw new dc(fc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===fc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new dc(fc.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===fc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new dc(fc.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),_g=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(yc(e),this.Vr=!1):mc("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),wg=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(oo.__awaiter)(o,void 0,void 0,function(){return Object(oo.__generator)(this,function(t){switch(t.label){case 0:return xg(this)?(mc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return(e=Ec(t)).$r.add(4),[4,Tg(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Eg(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new _g(n,r)};function Eg(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:if(!xg(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Tg(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Sg(t,e){var n=Ec(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),Ag(n)?kg(n):zg(n).er()&&Og(n,e))}function Ig(t,e){var n=Ec(t),r=zg(n);n.Or.delete(e),r.er()&&Cg(n,e),0===n.Or.size&&(r.er()?r.ir():xg(n)&&n.Br.set("Unknown"))}function Og(t,e){t.qr.U(e.targetId),zg(t).mr(e)}function Cg(t,e){t.qr.U(e),zg(t).yr(e)}function kg(t){t.qr=new Zh({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),zg(t).start(),t.Br.Sr()}function Ag(t){return xg(t)&&!zg(t).tr()&&t.Or.size>0}function xg(t){return 0===Ec(t).$r.size}function Ng(t){t.qr=void 0}function jg(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){return t.Or.forEach(function(e,n){Og(t,e)}),[2]})})}function Pg(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(n){return Ng(t),Ag(t)?(t.Br.Nr(e),kg(t)):t.Br.set("Unknown"),[2]})})}function Rg(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i,o;return Object(oo.__generator)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Xh&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(oo.__generator)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),mc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Dg(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Qh?t.qr.X(e):e instanceof Yh?t.qr.rt(e):t.qr.et(e),n.isEqual(Ac.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,kp(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Fc.EMPTY_BYTE_STRING,n.snapshotVersion)),Cg(t,e);var r=new _d(n.target,e,1,n.sequenceNumber);Og(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return mc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Dg(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Dg(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r=this;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:if(!hd(e))throw e;return t.$r.add(1),[4,Tg(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return kp(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(oo.__awaiter)(r,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return mc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Eg(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Mg(t,e){return e().catch(function(n){return Dg(t,n,e)})}function Lg(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(oo.__generator)(this,function(s){switch(s.label){case 0:e=Ec(t),n=Wg(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return xg(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Np(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Wg(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Dg(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Fg(e)&&Ug(e),[2]}})})}function Fg(t){return xg(t)&&!Wg(t).tr()&&t.kr.length>0}function Ug(t){Wg(t).start()}function Vg(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){return Wg(t).Ar(),[2]})})}function qg(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(oo.__generator)(this,function(i){for(e=Wg(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function Bg(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=bd.from(r,e,n),[4,Mg(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Lg(t)];case 2:return o.sent(),[2]}})})}function Hg(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return e&&Wg(t).pr?[4,function(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return xh(r=e.code)&&r!==fc.ABORTED?(n=t.kr.shift(),Wg(t).sr(),[4,Mg(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Lg(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Fg(t)&&Ug(t),[2]}})})}function Kg(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return n=Ec(t),e?(n.$r.delete(2),[4,Eg(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Tg(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function zg(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Ec(t);return r.br(),new yg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:jg.bind(null,t),Ri:Pg.bind(null,t),_r:Rg.bind(null,t)}),t.Mr.push(function(n){return Object(oo.__awaiter)(e,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Ag(t)?kg(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Ng(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Wg(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Ec(t);return r.br(),new vg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Vg.bind(null,t),Ri:Hg.bind(null,t),Ir:qg.bind(null,t),Tr:Bg.bind(null,t)}),t.Mr.push(function(n){return Object(oo.__awaiter)(e,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Lg(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(mc("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var Gg=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new od,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new dc(fc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function $g(t,e){if(yc("AsyncQueue",e+": "+t),hd(t))return new dc(fc.UNAVAILABLE,e+": "+t);throw t}var Qg=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Qc.comparator(e.key,n.key)}:function(t,e){return Qc.comparator(t.key,e.key)},this.keyedMap=Vh(),this.sortedSet=new jh(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Yg=function(){function t(){this.Kr=new jh(Qc.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):_c():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Xg=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Qg.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Hl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Jg=function(){this.Wr=void 0,this.listeners=[]},Zg=function(){this.queries=new sp(function(t){return Kl(t)},Hl),this.onlineState="Unknown",this.Gr=new Set};function tm(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(oo.__generator)(this,function(c){switch(c.label){case 0:if(n=Ec(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Jg),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=$g(a,"Initialization of query '"+zl(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&im(n),[2]}})})}function em(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(oo.__generator)(this,function(a){return n=Ec(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function nm(t,e){for(var n=Ec(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&im(n)}function rm(t,e,n){var r=Ec(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function im(t){t.Gr.forEach(function(t){t.next()})}var om=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Xg(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Xg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),sm=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),am=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return df(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?bf(this.R,t.document,!1):hl.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return cf(t)},t}(),um=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=cm(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new am(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Kh()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return[4,Fp(this.localStore,new am(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Up(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new _p(Object.assign({},this.progress),t))]}})})},t}();function cm(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var lm=function(t){this.key=t},hm=function(t){this.key=t},fm=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Kh(),this.mutatedKeys=Kh(),this.lo=Gl(t),this.fo=new Qg(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Yg,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Dl(this.query)&&i.size===this.query.limit?i.last():null,c=Ml(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Wl(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Dl(this.query)||Ml(this.query))for(;s.size>this.query.limit;){var l=Dl(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _c()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Xg(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Yg,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Kh(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new hm(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new lm(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Kh();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Xg.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),dm=function(t,e,n){this.query=t,this.targetId=e,this.view=n},pm=function(t){this.key=t,this.bo=!1},gm=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new sp(function(t){return Kl(t)},Hl),this.Vo=new Map,this.So=new Set,this.Do=new jh(Qc.comparator),this.Co=new Map,this.No=new qp,this.xo={},this.Fo=new Map,this.ko=$d.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function mm(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(oo.__generator)(this,function(a){switch(a.label){case 0:return n=zm(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,jp(n.localStore,ql(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,ym(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Sg(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function ym(t,e,n,r){return Object(oo.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(oo.__generator)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(oo.__awaiter)(this,void 0,void 0,function(){var i,o,s;return Object(oo.__generator)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Rp(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(xm(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Rp(t.localStore,e,!0)];case 1:return i=l.sent(),o=new fm(e,i.Bn),s=o._o(i.documents),a=$h.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),xm(t,n,u.To),c=new dm(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function vm(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return n=Ec(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Hl(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Pp(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Ig(n.remoteStore,r.targetId),km(n,r.targetId)}).catch(Zd)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return km(n,r.targetId),[4,Pp(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function bm(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return Object(oo.__generator)(this,function(a){switch(a.label){case 0:r=Wm(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ec(t),i=kc.now(),o=e.reduce(function(t,e){return t.add(e.key)},Kh());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=yh(c,n.get(c.key));null!=l&&s.push(new wh(c.key,l,ll(l.toProto().mapValue),fh.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new jh(Ic)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Pm(r,i.changes)];case 3:return a.sent(),[4,Lg(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=$g(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function _m(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:n=Ec(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Ap(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(wc(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?wc(r.bo):t.removedDocuments.size>0&&(wc(r.bo),r.bo=!1))}),[4,Pm(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Zd(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function wm(t,e,n){var r=Ec(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Ec(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&im(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Em(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(oo.__generator)(this,function(c){switch(c.label){case 0:return(r=Ec(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new jh(Qc.comparator)).insert(o,hl.newNoDocument(o,Ac.min())),a=Kh().add(o),u=new Gh(Ac.min(),new Map,new Dh(Ic),s,a),[4,_m(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),jm(r),[3,4];case 2:return[4,Pp(r.localStore,e,!1).then(function(){return km(r,e,n)}).catch(Zd)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Tm(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:n=Ec(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Cp(n.localStore,e)];case 2:return i=o.sent(),Cm(n,r,null),Om(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Pm(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Zd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Sm(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:r=Ec(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Ec(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return wc(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Cm(r,e,n),Om(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Pm(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Zd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Im(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(oo.__generator)(this,function(a){switch(a.label){case 0:xg((n=Ec(t)).remoteStore)||mc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Ec(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=$g(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Om(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Cm(t,e,n){var r=Ec(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function km(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Am(t,e)})}function Am(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Ig(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),jm(t))}function xm(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof lm?(t.No.addReference(o.key,e),Nm(t,o)):o instanceof hm?(mc("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Am(t,o.key)):_c()}}function Nm(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(mc("SyncEngine","New document in limbo: "+n),t.So.add(r),jm(t))}function jm(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Qc(Rc.fromString(e)),r=t.ko.next();t.Co.set(r,new pm(n)),t.Do=t.Do.insert(n,r),Sg(t.remoteStore,new _d(ql(Rl(n.path)),r,2,hc.o))}}function Pm(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return Object(oo.__generator)(this,function(a){switch(a.label){case 0:return r=Ec(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ep.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(oo.__generator)(this,function(l){switch(l.label){case 0:n=Ec(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return sd.forEach(e,function(e){return sd.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return sd.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!hd(r=l.sent()))throw r;return mc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Rm(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return(n=Ec(t)).currentUser.isEqual(e)?[3,3]:(mc("SyncEngine","User change. New user:",e.toKey()),[4,Op(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new dc(fc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Pm(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Dm(t,e){var n=Ec(t),r=n.Co.get(e);if(r&&r.bo)return Kh().add(r.key);var i=Kh(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Mm(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return[4,Rp((n=Ec(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&xm(n,e.targetId,i.To),i)]}})})}function Lm(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){return[2,Mp((e=Ec(t)).localStore).then(function(t){return Pm(e,t)})]})})}function Fm(t,e,n,r){return Object(oo.__awaiter)(this,void 0,void 0,function(){var i,o;return Object(oo.__generator)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Ec(t),r=Ec(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):sd.resolve(null)})})}((i=Ec(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Lg(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Cm(i,e,r||null),Om(i,e),function(t,e){Ec(Ec(t)._n).Gt(e)}(i.localStore,e)):_c(),s.label=4;case 4:return[4,Pm(i,o)];case 5:return s.sent(),[3,7];case 6:mc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Um(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(oo.__generator)(this,function(c){switch(c.label){case 0:return zm(n=Ec(t)),Wm(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Vm(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,Kg(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Sg(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return km(n,e),Pp(n.localStore,e,!0)}),Ig(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Vm(n,a)];case 5:return c.sent(),function(t){var e=Ec(t);e.Co.forEach(function(t,n){Ig(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new jh(Qc.comparator)}(n),n.Oo=!1,[4,Kg(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Vm(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(oo.__generator)(this,function(g){switch(g.label){case 0:n=Ec(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,jp(n.localStore,ql(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,Mm(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Dp(n.localStore,a)];case 8:return p=g.sent(),[4,jp(n.localStore,p)];case 9:return u=g.sent(),[4,ym(n,qm(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function qm(t){return Pl(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Bm(t){var e=Ec(t);return Ec(Ec(e.localStore).persistence).fn()}function Hm(t,e,n,r){return Object(oo.__awaiter)(this,void 0,void 0,function(){var i,o,s;return Object(oo.__generator)(this,function(a){switch(a.label){case 0:return(i=Ec(t)).Oo?(mc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Mp(i.localStore)];case 3:return o=a.sent(),s=Gh.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Pm(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Pp(i.localStore,e,!0)];case 6:return a.sent(),km(i,e,r),[3,8];case 7:_c(),a.label=8;case 8:return[2]}})})}function Km(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(oo.__generator)(this,function(f){switch(f.label){case 0:if(!(r=zm(t)).Oo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(mc("SyncEngine","Adding an already active target "+s),[3,5]):[4,Dp(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,jp(r.localStore,a)];case 3:return u=f.sent(),[4,ym(r,qm(a),u.targetId,!1)];case 4:f.sent(),Sg(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Pp(r.localStore,t,!1).then(function(){Ig(r.remoteStore,t),km(r,t)}).catch(Zd)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function zm(t){var e=Ec(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_m.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Em.bind(null,e),e.vo._r=nm.bind(null,e.eventManager),e.vo.Mo=rm.bind(null,e.eventManager),e}function Wm(t){var e=Ec(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sm.bind(null,e),e}function Gm(t,e,n){var r=Ec(t);(function(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(oo.__generator)(this,function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=Ec(t),r=cf(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(t){return n.Qe.getBundleMetadata(t,e.id)}).then(function(t){return!!t&&t.createTime.compareTo(r)>=0})}(t.localStore,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(cm(r)),i=new um(r,t.localStore,e.R),[4,e.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(s=c.sent())&&n._updateProgress(s),[4,e.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,Pm(t,a.wn,void 0)];case 12:return c.sent(),[4,function(t,e){var n=Ec(t);return n.persistence.runTransaction("Save bundle","readwrite",function(t){return n.Qe.saveBundleMetadata(t,e)})}(t.localStore,r)];case 13:return c.sent(),n._completeWith(a.progress),[3,15];case 14:return vc("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}})})})(r,e,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var $m=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return this.R=pg(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Ip(this.persistence,new Tp,t.initialUser,this.R)},t.prototype.qo=function(t){return new Gp(Qp.bs,this.R)},t.prototype.Bo=function(t){return new sg},t.prototype.terminate=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Qm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(oo.__extends)(e,t),e.prototype.initialize=function(e){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Lp(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Wm(this.Ko.syncEngine)];case 4:return n.sent(),[4,Lg(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return Ip(this.persistence,new Tp,t.initialUser,this.R)},e.prototype.Uo=function(t){return new np(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=bp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Vd.withCacheSize(this.cacheSizeBytes):Vd.DEFAULT;return new mp(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,fg(),dg(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new sg},e}($m),Ym=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(oo.__extends)(e,t),e.prototype.initialize=function(e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r=this;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof og?(this.sharedClientState.syncEngine={ui:Fm.bind(null,n),ai:Hm.bind(null,n),hi:Km.bind(null,n),fn:Bm.bind(null,n),ci:Lm.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(oo.__awaiter)(r,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return[4,Um(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=fg();if(!og.yt(e))throw new dc(fc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=bp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new og(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Qm),Xm=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n=this;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return wm(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Rm.bind(null,this.syncEngine),[4,Kg(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Zg},t.prototype.createDatastore=function(t){var e=pg(t.databaseInfo.databaseId),n=new hg(t.databaseInfo);return function(t,e,n){return new bg(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return wm(s.syncEngine,t,0)},o=ug.yt()?new ug:new ag,new wg(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new gm(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return e=Ec(t),mc("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Tg(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}();function Jm(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r;return Object(oo.__generator)(this,function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]})})},cancel:function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(t){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Zm=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),ty=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new od,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t,e,n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new sm(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})},t}(),ey=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new dc(fc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(oo.__generator)(this,function(u){switch(u.label){case 0:return n=Ec(t),r=mf(n.R)+"/documents",i={documents:e.map(function(t){return ff(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){wc(!!e.found);var n=df(t,e.found.name),r=cf(e.found.updateTime),i=new cl({mapValue:{fields:e.found.fields}});return hl.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){wc(!!e.missing),wc(!!e.readTime);var n=df(t,e.missing),r=cf(e.readTime);return hl.newNoDocument(n,r)}(t,e):_c()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());wc(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ch(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t,e=this;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Qc.fromPath(n);e.mutations.push(new kh(r,e.precondition(r)))}),[4,function(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return n=Ec(t),r=mf(n.R)+"/documents",i={writes:e.map(function(t){return _f(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw _c();e=Ac.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new dc(fc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?fh.updateTime(e):fh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Ac.min()))throw new dc(fc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fh.updateTime(e)}return fh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),ny=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new gg(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(oo.__awaiter)(t,void 0,void 0,function(){var t,e,n=this;return Object(oo.__generator)(this,function(r){return t=new ey(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Wc(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!xh(e)}return!1},t}(),ry=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Yp.UNAUTHENTICATED,this.clientId=Sc.u(),this.credentialListener=function(){},this.receivedInitialUser=new od,this.credentials.setChangeListener(function(t){mc("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new dc(fc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new od;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(oo.__awaiter)(t,void 0,void 0,function(){var t,n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=$g(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function iy(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i=this;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),mc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(oo.__awaiter)(i,void 0,void 0,function(){return Object(oo.__generator)(this,function(t){switch(t.label){case 0:return[4,Op(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function oy(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,sy(t)];case 1:return n=i.sent(),mc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return(n=Ec(t)).asyncQueue.verifyOperationInProgress(),mc("RemoteStore","RemoteStore received new credentials"),r=xg(n),n.$r.add(3),[4,Tg(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Eg(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function sy(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(mc("FirestoreClient","Using default OfflineComponentProvider"),[4,iy(t,new $m)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function ay(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(mc("FirestoreClient","Using default OnlineComponentProvider"),[4,oy(t,new Xm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function uy(t){return sy(t).then(function(t){return t.persistence})}function cy(t){return sy(t).then(function(t){return t.localStore})}function ly(t){return ay(t).then(function(t){return t.remoteStore})}function hy(t){return ay(t).then(function(t){return t.syncEngine})}function fy(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return[4,ay(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=mm.bind(null,e.syncEngine),n.onUnlisten=vm.bind(null,e.syncEngine),n)]}})})}function dy(t,e,n){var r=this;void 0===n&&(n={});var i=new od;return t.asyncQueue.enqueueAndForget(function(){return Object(oo.__awaiter)(r,void 0,void 0,function(){var r;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Zm({next:function(o){e.enqueueAndForget(function(){return em(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new dc(fc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new dc(fc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new om(Rl(n.path),o,{includeMetadataChanges:!0,so:!0});return tm(t,s)},[4,fy(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function py(t,e,n){var r=this;void 0===n&&(n={});var i=new od;return t.asyncQueue.enqueueAndForget(function(){return Object(oo.__awaiter)(r,void 0,void 0,function(){var r;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Zm({next:function(n){e.enqueueAndForget(function(){return em(t,s)}),n.fromCache&&"server"===r.source?i.reject(new dc(fc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new om(n,o,{includeMetadataChanges:!0,so:!0});return tm(t,s)},[4,fy(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var gy=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},my=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),yy=new Map,vy=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},by=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Yp.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),_y=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(this.token.user)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),wy=function(){function t(t){var e=this;this.oc=null,this.currentUser=Yp.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(mc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(wc("string"==typeof n.accessToken),new vy(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return wc(null===t||"string"==typeof t),new Yp(t)},t}(),Ey=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=Yp.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),Ty=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new Ey(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(Yp.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Sy(t,e,n){if(!n)throw new dc(fc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Iy(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new dc(fc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Oy(t,e,n,r){if(!0===e&&!0===r)throw new dc(fc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Cy(t){if(!Qc.isDocumentKey(t))throw new dc(fc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function ky(t){if(Qc.isDocumentKey(t))throw new dc(fc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Ay(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":_c()}function xy(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new dc(fc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ay(t);throw new dc(fc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Ny(t,e){if(e<=0)throw new dc(fc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var jy=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new dc(fc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new dc(fc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Oy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Py=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jy({}),this._settingsFrozen=!1,t instanceof my?(this._databaseId=t,this._credentials=new by):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new dc(fc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new my(t.options.projectId)}(t),this._credentials=new wy(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new dc(fc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new dc(fc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jy(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new by;switch(t.type){case"gapi":var e=t.client;return wc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ty(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new dc(fc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=yy.get(this))&&(mc("ComponentProvider","Removing Datastore"),yy.delete(this),t.terminate()),Promise.resolve();var t},t}(),Ry=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new My(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Dy=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),My=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Rl(r))||this)._path=r,i.type="collection",i}return Object(oo.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Ry(this.firestore,null,new Qc(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Dy);function Ly(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(ao.getModularInstance)(t),Sy("collection","path",e),t instanceof Py)return ky(n=Rc.fromString.apply(Rc,Object(oo.__spreadArray)([e],r))),new My(t,null,n);if(!(t instanceof Ry||t instanceof My))throw new dc(fc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ky(n=Rc.fromString.apply(Rc,Object(oo.__spreadArray)([t.path],r)).child(Rc.fromString(e))),new My(t.firestore,null,n)}function Fy(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(ao.getModularInstance)(t),1===arguments.length&&(e=Sc.u()),Sy("doc","path",e),t instanceof Py)return Cy(n=Rc.fromString.apply(Rc,Object(oo.__spreadArray)([e],r))),new Ry(t,null,new Qc(n));if(!(t instanceof Ry||t instanceof My))throw new dc(fc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Cy(n=t._path.child(Rc.fromString.apply(Rc,Object(oo.__spreadArray)([e],r)))),new Ry(t.firestore,t instanceof My?t.converter:null,new Qc(n))}function Uy(t,e){return t=Object(ao.getModularInstance)(t),e=Object(ao.getModularInstance)(e),(t instanceof Ry||t instanceof My)&&(e instanceof Ry||e instanceof My)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Vy(t,e){return t=Object(ao.getModularInstance)(t),e=Object(ao.getModularInstance)(e),t instanceof Dy&&e instanceof Dy&&t.firestore===e.firestore&&Hl(t._query,e._query)&&t.converter===e.converter}var qy=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new gg(this,"async_queue_retry"),this.Ec=function(){var e=dg();e&&mc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=dg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=dg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t,e=this;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!hd(t=n.sent()))throw t;return mc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,yc("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=Gg.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&_c()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t;return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function By(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Hy=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new od,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),Ky=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new qy,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(oo.__extends)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Wy(this),this._firestoreClient.terminate()},e}(Py);function zy(t){return t._firestoreClient||Wy(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Wy(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new gy(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new ry(t._credentials,t._queue,r)}function Gy(t,e,n){var r=this,i=new od;return t.asyncQueue.enqueue(function(){return Object(oo.__awaiter)(r,void 0,void 0,function(){var r;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,iy(t,n)];case 1:return o.sent(),[4,oy(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===fc.FAILED_PRECONDITION||t.code===fc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function $y(t){if(t._initialized||t._terminated)throw new dc(fc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Qy=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new dc(fc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mc(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Yy=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Fc.fromBase64String(e))}catch(e){throw new dc(fc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Fc.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Xy=function(t){this._methodName=t},Jy=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new dc(fc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new dc(fc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Ic(this._lat,t._lat)||Ic(this._long,t._long)},t}(),Zy=/^__.*__$/,tv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new wh(t,this.data,this.fieldMask,e,this.fieldTransforms):new _h(t,this.data,e,this.fieldTransforms)},t}(),ev=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new wh(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function nv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _c()}}var rv=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return Tv(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(nv(this.Dc)&&Zy.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),iv=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||pg(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new rv({Dc:t,methodName:e,Lc:n,path:Mc.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function ov(t){var e=t._freezeSettings(),n=pg(t._databaseId);return new iv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sv(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);bv("Data must be an object, but it was:",s,r);var a,u,c=yv(r,s);if(o.merge)a=new Lc(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=_v(e,f[h],n);if(!s.contains(d))throw new dc(fc.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Sv(l,d)||l.push(d)}a=new Lc(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new tv(new cl(c),a,u)}var av=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(oo.__extends)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Xy);function uv(t,e,n){return new rv({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var cv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(oo.__extends)(e,t),e.prototype._toFieldTransform=function(t){return new lh(t.path,new nh)},e.prototype.isEqual=function(t){return t instanceof e},e}(Xy),lv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(oo.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=uv(this,t,!0),n=this.qc.map(function(t){return mv(t,e)}),r=new rh(n);return new lh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Xy),hv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(oo.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=uv(this,t,!0),n=this.qc.map(function(t){return mv(t,e)}),r=new oh(n);return new lh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Xy),fv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(oo.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=new ah(t.R,Xl(t.R,this.Uc));return new lh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Xy);function dv(t,e,n,r){var i=t.Bc(1,e,n);bv("Data must be an object, but it was:",i,r);var o=[],s=cl.empty();Nc(r,function(t,r){var a=Ev(e,t,n);r=Object(ao.getModularInstance)(r);var u=i.kc(a);if(r instanceof av)o.push(a);else{var c=mv(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Lc(o);return new ev(s,a,i.fieldTransforms)}function pv(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[_v(e,r,n)],u=[i];if(o.length%2!=0)throw new dc(fc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(_v(e,o[c])),u.push(o[c+1]);for(var l=[],h=cl.empty(),f=a.length-1;f>=0;--f)if(!Sv(l,a[f])){var d=a[f],p=u[f];p=Object(ao.getModularInstance)(p);var g=s.kc(d);if(p instanceof av)l.push(d);else{var m=mv(p,g);null!=m&&(l.push(d),h.set(d,m))}}var y=new Lc(l);return new ev(h,y,s.fieldTransforms)}function gv(t,e,n,r){return void 0===r&&(r=!1),mv(n,t.Bc(r?4:3,e))}function mv(t,e){if(vv(t=Object(ao.getModularInstance)(t)))return bv("Unsupported field value:",e,t),yv(t,e);if(t instanceof Xy)return function(t,e){if(!nv(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=mv(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(ao.getModularInstance)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Xl(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=kc.fromDate(t);return{timestampValue:sf(e.R,n)}}if(t instanceof kc)return n=new kc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:sf(e.R,n)};if(t instanceof Jy)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Yy)return{bytesValue:af(e.R,t._byteString)};if(t instanceof Ry){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:lf(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+Ay(t))}(t,e)}function yv(t,e){var n={};return jc(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nc(t,function(t,r){var i=mv(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function vv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof kc||t instanceof Jy||t instanceof Yy||t instanceof Ry||t instanceof Xy)}function bv(t,e,n){if(!vv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Ay(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function _v(t,e,n){if((e=Object(ao.getModularInstance)(e))instanceof Qy)return e._internalPath;if("string"==typeof e)return Ev(t,e);throw Tv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var wv=new RegExp("[~\\*/\\[\\]]");function Ev(t,e,n){if(e.search(wv)>=0)throw Tv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Qy.bind.apply(Qy,Object(oo.__spreadArray)([void 0],e.split(".")))))._internalPath}catch(r){throw Tv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Tv(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new dc(fc.INVALID_ARGUMENT,(a+=". ")+t+u)}function Sv(t,e){return t.some(function(t){return t.isEqual(e)})}var Iv=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ry(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Ov(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Cv("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Ov=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(oo.__extends)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Iv);function Cv(t,e){return"string"==typeof e?Ev(t,e):e instanceof Qy?e._internalPath:e._delegate._internalPath}var kv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Av=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(oo.__extends)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new xv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Cv("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Iv),xv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(oo.__extends)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Av),Nv=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new kv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new xv(n._firestore,n._userDataWriter,r.key,r,new kv(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new dc(fc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new xv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new kv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new xv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new kv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:jv(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function jv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _c()}}function Pv(t,e){return t instanceof Av&&e instanceof Av?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Nv&&e instanceof Nv&&t._firestore===e._firestore&&Vy(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Rv(t){if(Ml(t)&&0===t.explicitOrderBy.length)throw new dc(fc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Dv=function(){};function Mv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Lv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(oo.__extends)(e,t),e.prototype._apply=function(t){var e=ov(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new dc(fc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Kv(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Hv(r,t,l[c]));a={arrayValue:{values:u}}}else a=Hv(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Kv(s,o),a=gv(n,"where",s,"in"===o||"not-in"===o);var h=yl.create(i,o,a);return function(t,e){if(e.g()){var n=Fl(t);if(null!==n&&!n.isEqual(e.field))throw new dc(fc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Ll(t);null!==r&&zv(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new dc(fc.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new Dy(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new jl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Dv),Fv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(oo.__extends)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new dc(fc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new dc(fc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new kl(e,n);return function(t,e){if(null===Ll(t)){var n=Fl(t);null!==n&&zv(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new Dy(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new jl(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Dv),Uv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(oo.__extends)(e,t),e.prototype._apply=function(t){return new Dy(t.firestore,t.converter,Bl(t._query,this.Gc,this.zc))},e}(Dv),Vv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(oo.__extends)(e,t),e.prototype._apply=function(t){var e=Bv(t,this.type,this.Hc,this.Jc);return new Dy(t.firestore,t.converter,function(t,e){return new jl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Dv),qv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(oo.__extends)(e,t),e.prototype._apply=function(t){var e=Bv(t,this.type,this.Hc,this.Jc);return new Dy(t.firestore,t.converter,function(t,e){return new jl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Dv);function Bv(t,e,n,r){if(n[0]=Object(ao.getModularInstance)(n[0]),n[0]instanceof Iv)return function(t,e,n,r,i){if(!r)throw new dc(fc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Vl(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(rl(e,r.key));else{var c=r.data.field(u.field);if(Hc(c))throw new dc(fc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new dc(fc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Ol(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=ov(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new dc(fc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new dc(fc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ul(t)&&-1!==c.indexOf("/"))throw new dc(fc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Rc.fromString(c));if(!Qc.isDocumentKey(l))throw new dc(fc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Qc(l);a.push(rl(e,h))}else{var f=gv(n,r,c);a.push(f)}}return new Ol(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Hv(t,e,n){if("string"==typeof(n=Object(ao.getModularInstance)(n))){if(""===n)throw new dc(fc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ul(e)&&-1!==n.indexOf("/"))throw new dc(fc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Rc.fromString(n));if(!Qc.isDocumentKey(r))throw new dc(fc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return rl(t,new Qc(r))}if(n instanceof Ry)return rl(t,n._key);throw new dc(fc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ay(n)+".")}function Kv(t,e){if(!Array.isArray(t)||0===t.length)throw new dc(fc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new dc(fc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function zv(t,e,n){if(!n.isEqual(e))throw new dc(fc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Wv=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Yc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return qc(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Bc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw _c()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Nc(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Jy(qc(t.latitude),qc(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Kc(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(zc(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Vc(t);return new kc(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Rc.fromString(t);wc(Df(n));var r=new my(n.get(1),n.get(3)),i=new Qc(n.popFirst(5));return r.isEqual(e)||yc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Gv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var $v=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(oo.__extends)(e,t),e.prototype.convertBytes=function(t){return new Yy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ry(this.firestore,null,e)},e}(Wv),Qv=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=ov(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Yv(t,this._firestore),i=Gv(r.converter,e,n),o=sv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,fh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Yv(t,this._firestore);return o="string"==typeof(e=Object(ao.getModularInstance)(e))||e instanceof Qy?pv(this._dataReader,"WriteBatch.update",s._key,e,n,r):dv(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,fh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Yv(t,this._firestore);return this._mutations=this._mutations.concat(new Ch(e._key,fh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new dc(fc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Yv(t,e){if((t=Object(ao.getModularInstance)(t)).firestore!==e)throw new dc(fc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Xv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(oo.__extends)(e,t),e.prototype.convertBytes=function(t){return new Yy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ry(this.firestore,null,e)},e}(Wv);function Jv(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=xy(t,Ry);var o=xy(t.firestore,Ky),s=ov(o);return tb(o,[("string"==typeof(e=Object(ao.getModularInstance)(e))||e instanceof Qy?pv(s,"updateDoc",t._key,e,n,r):dv(s,"updateDoc",t._key,e)).toMutation(t._key,fh.exists(!0))])}function Zv(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(ao.getModularInstance)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||By(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(By(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Ry)c=xy(t.firestore,Ky),l=Rl(t._key.path),u={next:function(e){i[a]&&i[a](eb(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=xy(t,Dy);c=xy(d.firestore,Ky),l=d._query;var p=new Xv(c);u={next:function(t){i[a]&&i[a](new Nv(c,p,d,t))},error:i[a+1],complete:i[a+2]},Rv(t._query)}return function(t,e,n,r){var i=this,o=new Zm(r),s=new om(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(oo.__awaiter)(i,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return e=tm,[4,fy(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(oo.__awaiter)(i,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return e=em,[4,fy(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(zy(c),l,h,u)}function tb(t,e){return function(t,e){var n=this,r=new od;return t.asyncQueue.enqueueAndForget(function(){return Object(oo.__awaiter)(n,void 0,void 0,function(){var n;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return n=bm,[4,hy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(zy(t),e)}function eb(t,e,n){var r=n.docs.get(e._key),i=new Xv(t);return new Av(t,i,e._key,r,new kv(n.hasPendingWrites,n.fromCache),e.converter)}var nb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(oo.__extends)(e,t),e.prototype.get=function(e){var n=this,r=Yv(e,this._firestore),i=new Xv(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Av(n._firestore,i,r._key,t._document,new kv(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=ov(t)}return t.prototype.get=function(t){var e=this,n=Yv(t,this._firestore),r=new $v(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return _c();var i=t[0];if(i.isFoundDocument())return new Iv(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Iv(e._firestore,r,n._key,null,n.converter);throw _c()})},t.prototype.set=function(t,e,n){var r=Yv(t,this._firestore),i=Gv(r.converter,e,n),o=sv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Yv(t,this._firestore);return o="string"==typeof(e=Object(ao.getModularInstance)(e))||e instanceof Qy?pv(this._dataReader,"Transaction.update",s._key,e,n,r):dv(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Yv(t,this._firestore);return this._transaction.delete(e._key),this},t}());function rb(){if("undefined"==typeof Uint8Array)throw new dc(fc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ib(){if("undefined"==typeof atob)throw new dc(fc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ob=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return ib(),new t(Yy.fromBase64String(e))},t.fromUint8Array=function(e){return rb(),new t(Yy.fromUint8Array(e))},t.prototype.toBase64=function(){return ib(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return rb(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),sb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){$y(t=xy(t,Ky));var n=zy(t),r=t._freezeSettings(),i=new Xm;return Gy(n,i,new Qm(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){$y(t=xy(t,Ky));var e=zy(t),n=t._freezeSettings(),r=new Xm;return Gy(e,r,new Ym(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new dc(fc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new od;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(oo.__awaiter)(e,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return ud.yt()?[4,ud.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(bp(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),ab=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof my||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=xy(t,Py))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&vc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Object(ao.createMockUserToken)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new dc(fc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new _y(new vy(o,new Yp(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(oo.__awaiter)(e,void 0,void 0,function(){var e,n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return[4,uy(t)];case 1:return e=r.sent(),[4,ly(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Ec(t);return e.$r.delete(0),Eg(e)}(n))]}})})})}(zy(xy(this._delegate,Ky)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(oo.__awaiter)(e,void 0,void 0,function(){var e,n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return[4,uy(t)];case 1:return e=r.sent(),[4,ly(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return(e=Ec(t)).$r.add(0),[4,Tg(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(zy(xy(this._delegate,Ky)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Oy("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new od;return t.asyncQueue.enqueueAndForget(function(){return Object(oo.__awaiter)(e,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return e=Im,[4,hy(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(zy(xy(this._delegate,Ky)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Zm(e);return t.asyncQueue.enqueueAndForget(function(){return Object(oo.__awaiter)(n,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return e=function(t,e){Ec(t).Gr.add(e),e.next()},[4,fy(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(oo.__awaiter)(n,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return e=function(t,e){Ec(t).Gr.delete(e)},[4,fy(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(zy(t=xy(t,Ky)),By(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new dc(fc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new wb(this,Ly(this._delegate,t))}catch(t){throw db(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new fb(this,Fy(this._delegate,t))}catch(t){throw db(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new vb(this,function(t,e){if(t=xy(t,Py),Sy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new dc(fc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Dy(t,null,function(t){return new jl(Rc.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw db(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new od;return t.asyncQueue.enqueueAndForget(function(){return Object(oo.__awaiter)(n,void 0,void 0,function(){var n;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return[4,function(t){return ay(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new ny(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(zy(t),function(n){return e(new nb(t,n))})}(this._delegate,function(n){return t(new cb(e,n))})},t.prototype.batch=function(){var t=this;return zy(this._delegate),new lb(new Qv(this._delegate,function(e){return tb(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new dc(fc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new dc(fc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),ub=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(oo.__extends)(e,t),e.prototype.convertBytes=function(t){return new ob(new Yy(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return fb.Zc(e,this.firestore,null)},e}(Wv),cb=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new ub(t)}return t.prototype.get=function(t){var e=this,n=Eb(t);return this._delegate.get(n).then(function(t){return new mb(e._firestore,new Av(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=Eb(t);return n?(Iy("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Eb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(oo.__spreadArray)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Eb(t);return this._delegate.delete(e),this},t}(),lb=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Eb(t);return n?(Iy("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Eb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(oo.__spreadArray)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Eb(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),hb=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new xv(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new yb(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new ub(e),n),i.set(n,o)),o},t}();hb.eu=new WeakMap;var fb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ub(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new dc(fc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Ry(n._delegate,r,new Qc(e)))},t.Zc=function(e,n,r){return new t(n,new Ry(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new wb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new wb(this.firestore,Ly(this._delegate,t))}catch(t){throw db(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(ao.getModularInstance)(t))instanceof Ry&&Uy(this._delegate,t)},t.prototype.set=function(t,e){e=Iy("DocumentReference.set",e);try{return function(t,e,n){t=xy(t,Ry);var r=xy(t.firestore,Ky),i=Gv(t.converter,e,n);return tb(r,[sv(ov(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,fh.none())])}(this._delegate,t,e)}catch(t){throw db(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Jv(this._delegate,t):Jv.apply(void 0,Object(oo.__spreadArray)([this._delegate,t,e],n))}catch(t){throw db(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return tb(xy((t=this._delegate).firestore,Ky),[new Ch(t._key,fh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=pb(e),i=gb(e,function(e){return new mb(t.firestore,new Av(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return Zv(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=xy(t,Ry);var e=xy(t.firestore,Ky),n=zy(e),r=new Xv(e);return function(t,e){var n=this,r=new od;return t.asyncQueue.enqueueAndForget(function(){return Object(oo.__awaiter)(n,void 0,void 0,function(){var n;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Ec(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new dc(fc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=$g(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,cy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Av(e,r,t._key,n,new kv(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=xy(t,Ry);var e=xy(t.firestore,Ky);return dy(zy(e),t._key,{source:"server"}).then(function(n){return eb(e,t,n)})}(this._delegate):function(t){t=xy(t,Ry);var e=xy(t.firestore,Ky);return dy(zy(e),t._key).then(function(n){return eb(e,t,n)})}(this._delegate)).then(function(t){return new mb(e.firestore,new Av(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?hb.tu(this.firestore,e):null))},t}();function db(t,e,n){return t.message=t.message.replace(e,n),t}function pb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!By(r))return r}return{}}function gb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=By(t[0])?t[0]:By(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var mb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new fb(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Pv(this._delegate,t._delegate)},t}(),yb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(oo.__extends)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(mb),vb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ub(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Mv(this._delegate,function(t,e,n){var r=e,i=Cv("where",t);return new Lv(i,r,n)}(e,n,r)))}catch(e){throw db(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Mv(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Cv("orderBy",t);return new Fv(r,n)}(e,n)))}catch(e){throw db(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Mv(this._delegate,function(t){return Ny("limit",t),new Uv("limit",t,"F")}(e)))}catch(e){throw db(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Mv(this._delegate,function(t){return Ny("limitToLast",t),new Uv("limitToLast",t,"L")}(e)))}catch(e){throw db(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Mv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vv("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw db(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Mv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vv("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw db(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Mv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qv("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw db(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Mv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qv("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw db(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Vy(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=xy(t,Dy);var e=xy(t.firestore,Ky),n=zy(e),r=new Xv(e);return function(t,e){var n=this,r=new od;return t.asyncQueue.enqueueAndForget(function(){return Object(oo.__awaiter)(n,void 0,void 0,function(){var n;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(oo.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Rp(t,e,!0)];case 1:return a=u.sent(),r=new fm(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=$g(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,cy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Nv(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=xy(t,Dy);var e=xy(t.firestore,Ky),n=zy(e),r=new Xv(e);return py(n,t._query,{source:"server"}).then(function(n){return new Nv(e,r,t,n)})}(this._delegate):function(t){t=xy(t,Dy);var e=xy(t.firestore,Ky),n=zy(e),r=new Xv(e);return Rv(t._query),py(n,t._query).then(function(n){return new Nv(e,r,t,n)})}(this._delegate)).then(function(t){return new _b(e.firestore,new Nv(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=pb(e),i=gb(e,function(e){return new _b(t.firestore,new Nv(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Zv(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?hb.tu(this.firestore,e):null))},t}(),bb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new yb(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),_b=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new vb(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new yb(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new bb(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new yb(n._firestore,r))})},t.prototype.isEqual=function(t){return Pv(this._delegate,t._delegate)},t}(),wb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(oo.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new fb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new fb(this.firestore,void 0===t?Fy(this._delegate):Fy(this._delegate,t))}catch(t){throw db(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=xy(t.firestore,Ky),r=Fy(t),i=Gv(t.converter,e);return tb(n,[sv(ov(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,fh.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new fb(e.firestore,t)})},e.prototype.isEqual=function(t){return Uy(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?hb.tu(this.firestore,t):null))},e}(vb);function Eb(t){return xy(t,Ry)}var Tb,Sb,Ib=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Qy.bind.apply(Qy,Object(oo.__spreadArray)([void 0],t)))}return t.documentId=function(){return new t(Mc.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(ao.getModularInstance)(t))instanceof Qy&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Ob=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new cv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new av("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new lv("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hv("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new fv("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Cb=n("/6Yf"),kb={Firestore:ab,GeoPoint:Jy,Timestamp:kc,Blob:ob,Transaction:cb,WriteBatch:lb,DocumentReference:fb,DocumentSnapshot:mb,Query:vb,QueryDocumentSnapshot:yb,QuerySnapshot:_b,CollectionReference:wb,FieldPath:Ib,FieldValue:Ob,setLogLevel:function(t){pc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Cb.Component("firestore",function(t){return function(t,e){return new ab(t,new Ky(t,e),new sb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},kb)))})(Tb=so.default),Tb.registerVersion("@firebase/firestore","2.3.0"),(Sb=ab).prototype.loadBundle=function(t){return function(t,e){var n=zy(t=xy(t,Ky)),r=new Hy;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new ty(t,e)}(function(t,e){if(t instanceof Uint8Array)return Jm(t,e);if(t instanceof ArrayBuffer)return Jm(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,pg(e));t.asyncQueue.enqueueAndForget(function(){return Object(oo.__awaiter)(i,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return e=Gm,[4,hy(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}})})})}(n,t._databaseId,e,r),r}(this._delegate,t)},Sb.prototype.namedQuery=function(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue(function(){return Object(oo.__awaiter)(n,void 0,void 0,function(){var n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return n=function(t,e){var n=Ec(t);return n.persistence.runTransaction("Get named query","readonly",function(t){return n.Qe.getNamedQuery(t,e)})},[4,cy(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}})})})}(zy(e=xy(e,Ky)),n).then(function(t){return t?new Dy(e,null,t.query):null})).then(function(t){return t?new vb(r,t):null})};var Ab={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xb=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Object(oo.__extends)(e,t),e}(Error),Nb=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}return t.prototype.getAuthToken=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t;return Object(oo.__generator)(this,function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getInstanceIdToken=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(Tb){return[2,void 0]}return[2]})})},t.prototype.getContext=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},t}();function jb(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Pb,Rb,Db,Mb=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return jb(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?jb(t,function(t){return e.decode(t)}):t},t}(),Lb=function(){function t(t,e,n,r,i,o){var s=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new Mb,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(s.deleteService())}},this.contextProvider=new Nb(e,n),this.cancelAllRequests=new Promise(function(t){s.deleteService=function(){return t()}});try{var a=new URL(i);this.customDomain=a.origin,this.region="us-central1"}catch(Tb){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i,o;return Object(oo.__generator)(this,function(s){switch(s.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=s.sent())&&(n["X-Firebase-AppCheck"]=r),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=s.sent(),[3,5];case 4:return s.sent(),[2,{status:0,json:null}];case 5:o=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,i.json()];case 7:return o=s.sent(),[3,9];case 8:return s.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}})})},t.prototype.getAppCheckToken=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t;return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype.call=function(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h,f;return Object(oo.__generator)(this,function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=d.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=function(t){var e,n=new Promise(function(n,r){e=setTimeout(function(){r(new xb("deadline-exceeded","deadline-exceeded"))},t)});return{timer:e,promise:n}}(n.timeout||7e4),u=a.timer,c=a.promise,[4,Promise.race([Fb(u,this.postJSON(r,i,o)),c,Fb(u,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new xb("cancelled","Firebase Functions instance was deleted.");if(h=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!Ab[a])return new xb("internal","internal");r=Ab[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(Tb){}return"ok"===r?null:new xb(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new xb("internal","Response is not valid JSON object.");if(void 0===(f=l.json.data)&&(f=l.json.result),void 0===f)throw new xb("internal","Response is missing data field.");return[2,{data:this.serializer.decode(f)}]}})})},t}();function Fb(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}})})}Pb=so.default,Rb=fetch.bind(self),Db={Functions:Lb},Pb.INTERNAL.registerComponent(new Cb.Component("functions",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal"),s=t.getProvider("messaging");return new Lb(r,i,s,o,n,Rb)},"PUBLIC").setServiceProps(Db).setMultipleInstances(!0)),so.default.registerVersion("@firebase/functions","0.6.8");var Ub,Vb=n("nbvr"),qb="w:0.4.26",Bb=((Ub={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Ub["not-registered"]="Firebase Installation is not registered.",Ub["installation-not-found"]="Firebase Installation not found.",Ub["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Ub["app-offline"]="Could not process request. Application offline.",Ub["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Ub),Hb=new ao.ErrorFactory("installations","Installations",Bb);function Kb(t){return t instanceof ao.FirebaseError&&t.code.includes("request-failed")}function zb(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function Wb(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function Gb(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,Hb.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function $b(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function Qb(t,e){var n=e.refreshToken,r=$b(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function Yb(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}})})}function Xb(t,e){var n=e.fid;return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,r,i,o,s;return Object(oo.__generator)(this,function(a){switch(a.label){case 0:return e=zb(t),r=$b(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:qb})},[4,Yb(function(){return fetch(e,i)})];case 1:return(o=a.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=a.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:Wb(s.authToken)}];case 3:return[4,Gb("Create Installation",o)];case 4:throw a.sent()}})})}function Jb(t){return new Promise(function(e){setTimeout(e,t)})}var Zb=/^[cdef][\w-]{21}$/;function t_(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(oo.__spreadArray)([],Object(oo.__read)(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return Zb.test(e)?e:""}catch(n){return""}}function e_(t){return t.appName+"!"+t.appId}var n_=new Map;function r_(t,e){var n=e_(t);i_(n,e),function(t,e){var n=s_();n&&n.postMessage({key:t,fid:e}),a_()}(n,e)}function i_(t,e){var n,r,i=n_.get(t);if(i)try{for(var o=Object(oo.__values)(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var o_=null;function s_(){return!o_&&"BroadcastChannel"in self&&((o_=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){i_(t.data.key,t.data.fid)}),o_}function a_(){0===n_.size&&o_&&(o_.close(),o_=null)}var u_,c_="firebase-installations-store",l_=null;function h_(){return l_||(l_=Object(Vb.openDb)("firebase-installations-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(c_)}})),l_}function f_(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(oo.__generator)(this,function(a){switch(a.label){case 0:return n=e_(t),[4,h_()];case 1:return r=a.sent(),i=r.transaction(c_,"readwrite"),[4,(o=i.objectStore(c_)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||r_(t,e.fid),[2,e]}})})}function d_(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return e=e_(t),[4,h_()];case 1:return n=i.sent(),[4,(r=n.transaction(c_,"readwrite")).objectStore(c_).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function p_(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(oo.__generator)(this,function(u){switch(u.label){case 0:return n=e_(t),[4,h_()];case 1:return r=u.sent(),i=r.transaction(c_,"readwrite"),[4,(o=i.objectStore(c_)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||r_(t,a.fid),[2,a]}})})}function g_(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return[4,p_(t,function(n){var r=function(t){return v_(t||{fid:t_(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Hb.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Xb(t,e)];case 1:return n=i.sent(),[2,f_(t,n)];case 2:return Kb(r=i.sent())&&409===r.customData.serverCode?[4,d_(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,f_(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:m_(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry})];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function m_(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return[4,y_(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,Jb(100)];case 3:return o.sent(),[4,y_(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,g_(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}function y_(t){return p_(t,function(t){if(!t)throw Hb.create("installation-not-found");return v_(t)})}function v_(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function b_(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(oo.__awaiter)(this,void 0,void 0,function(){var t,i,o,s,a;return Object(oo.__generator)(this,function(u){switch(u.label){case 0:return t=function(t,e){var n=e.fid;return zb(t)+"/"+n+"/authTokens:generate"}(n,e),i=Qb(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:qb}})},[4,Yb(function(){return fetch(t,s)})];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,Wb(u.sent())];case 3:return[4,Gb("Generate Auth Token",a)];case 4:throw u.sent()}})})}function __(t,e){return void 0===e&&(e=!1),Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return[4,p_(t.appConfig,function(r){if(!E_(r))throw Hb.create("not-registered");var i,o=r.authToken;if(!e&&2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i))return r;if(1===o.requestStatus)return n=function(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return[4,w_(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,Jb(100)];case 3:return i.sent(),[4,w_(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,__(t,e)]:[2,r]}})})}(t,e),r;if(!navigator.onLine)throw Hb.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(oo.__assign)(Object(oo.__assign)({},t),{authToken:e})}(r);return n=function(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,b_(t,e)];case 1:return n=o.sent(),i=Object(oo.__assign)(Object(oo.__assign)({},e),{authToken:n}),[4,f_(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!Kb(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,d_(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(oo.__assign)(Object(oo.__assign)({},e),{authToken:{requestStatus:0}}),[4,f_(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(t,s),s})];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}})})}function w_(t){return p_(t,function(t){if(!E_(t))throw Hb.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object(oo.__assign)(Object(oo.__assign)({},t),{authToken:{requestStatus:0}}):t})}function E_(t){return void 0!==t&&2===t.registrationStatus}function T_(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return[4,g_(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function S_(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(oo.__generator)(this,function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return zb(t)+"/"+n}(t,e),r=Qb(t,e),i={method:"DELETE",headers:r},[4,Yb(function(){return fetch(n,i)})];case 1:return(o=s.sent()).ok?[3,3]:[4,Gb("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}})})}function I_(t){return Hb.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new Cb.Component("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw I_("App Configuration");if(!t.name)throw I_("App Name");try{for(var r=Object(oo.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw I_(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return[4,g_(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):__(t).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return[4,T_(t.appConfig)];case 1:return n.sent(),[4,__(t,e)];case 2:return[2,n.sent().token]}})})}(n,t)},delete:function(){return function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return[4,p_(e=t.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Hb.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Hb.create("app-offline");case 3:return[4,S_(e,n)];case 4:return r.sent(),[4,d_(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){s_();var n=e_(t),r=n_.get(n);r||(r=new Set,n_.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=e_(t),r=n_.get(n);r&&(r.delete(e),0===r.size&&n_.delete(n),a_())}(n,e)}}(n,t)}}},"PUBLIC")),t.registerVersion("@firebase/installations","0.4.26")}(so.default);var O_=((u_={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',u_["only-available-in-window"]="This method is available in a Window context.",u_["only-available-in-sw"]="This method is available in a service worker context.",u_["permission-default"]="The notification permission was not granted and dismissed instead.",u_["permission-blocked"]="The notification permission was not granted and blocked instead.",u_["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",u_["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",u_["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",u_["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",u_["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",u_["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",u_["token-update-no-token"]="FCM returned no token when updating the user to push.",u_["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",u_["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",u_["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",u_["invalid-vapid-key"]="The public VAPID key must be a string.",u_["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",u_),C_=new ao.ErrorFactory("messaging","Messaging",O_),k_="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",A_=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}({});function x_(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(oo.__spreadArray)([],Object(oo.__read)(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function N_(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var j_="fcm_token_details_db",P_="fcm_token_object_Store";function R_(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map(function(t){return t.name}).includes(j_))return[2,null];r.label=2;case 2:return e=null,[4,Object(Vb.openDb)(j_,5,function(r){return Object(oo.__awaiter)(n,void 0,void 0,function(){var n,i,o,s;return Object(oo.__generator)(this,function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(P_)?[4,(n=r.transaction.objectStore(P_)).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:x_(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:x_(o.auth),p256dh:x_(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:x_(o.vapidKey)}});return[2]}})})})];case 3:return r.sent().close(),[4,Object(Vb.deleteDb)(j_)];case 4:return r.sent(),[4,Object(Vb.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,Object(Vb.deleteDb)("undefined")];case 6:return r.sent(),[2,D_(e)?e:null]}})})}function D_(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var M_="firebase-messaging-store",L_=null;function F_(){return L_||(L_=Object(Vb.openDb)("firebase-messaging-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(M_)}})),L_}function U_(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return e=B_(t),[4,F_()];case 1:return[4,i.sent().transaction(M_).objectStore(M_).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,R_(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,V_(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}})})}function V_(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return n=B_(t),[4,F_()];case 1:return r=o.sent(),[4,(i=r.transaction(M_,"readwrite")).objectStore(M_).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}})})}function q_(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return e=B_(t),[4,F_()];case 1:return n=i.sent(),[4,(r=n.transaction(M_,"readwrite")).objectStore(M_).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function B_(t){return t.appConfig.appId}function H_(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(oo.__generator)(this,function(a){switch(a.label){case 0:return[4,G_(t)];case 1:n=a.sent(),r=$_(e),i={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(W_(t.appConfig),i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),C_.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw C_.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw C_.create("token-subscribe-no-token");return[2,o.token]}})})}function K_(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(oo.__generator)(this,function(a){switch(a.label){case 0:return[4,G_(t)];case 1:n=a.sent(),r=$_(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(W_(t.appConfig)+"/"+e.token,i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),C_.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw C_.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw C_.create("token-update-no-token");return[2,o.token]}})})}function z_(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(oo.__generator)(this,function(s){switch(s.label){case 0:return[4,G_(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(W_(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw C_.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=s.sent(),C_.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function W_(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function G_(t){var e=t.appConfig,n=t.installations;return Object(oo.__awaiter)(this,void 0,void 0,function(){var t;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}})})}function $_(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==k_&&(n.web.applicationPubKey=e),n}function Q_(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return Object(oo.__generator)(this,function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw C_.create("permission-blocked");return[4,Z_(e,n)];case 1:return r=a.sent(),[4,U_(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:x_(r.getKey("auth")),p256dh:x_(r.getKey("p256dh"))},i?[3,3]:[2,J_(t,o)];case 3:if(l=(c=o).endpoint===(u=i.subscriptionOptions).endpoint,c.vapidKey===u.vapidKey&&l&&c.auth===u.auth&&c.p256dh===u.p256dh)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,z_(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,J_(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,X_({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l})})}function Y_(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return[4,U_(t)];case 1:return(n=i.sent())?[4,z_(t,n.token)]:[3,4];case 2:return i.sent(),[4,q_(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}})})}function X_(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i,o;return Object(oo.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,K_(e,t)];case 1:return r=s.sent(),i=Object(oo.__assign)(Object(oo.__assign)({},t),{token:r,createTime:Date.now()}),[4,V_(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,Y_(e,n)];case 4:throw s.sent(),o;case 5:return[2]}})})}function J_(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return[4,H_(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,V_(t,r)];case 2:return i.sent(),[2,r.token]}})})}function Z_(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:N_(e)})]}})})}function tw(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function ew(t){return new Promise(function(e){setTimeout(e,t)})}var nw=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw C_.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(oo.__awaiter)(this,void 0,void 0,function(){var n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,U_(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:k_,r.label=2;case 2:return[2,Q_(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},t.prototype.deleteToken=function(){return Y_(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw C_.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw C_.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw C_.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw C_.create("only-available-in-window")},t.prototype.onMessage=function(){throw C_.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw C_.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,sw()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})}(n=o.sent())?[2,ow(n,e)]:(r=!1,e.notification?[4,aw(rw(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,ew(1e3)]);case 4:return o.sent(),[2]}})})},t.prototype.onSubChange=function(t){var e,n;return Object(oo.__awaiter)(this,void 0,void 0,function(){var r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,Y_(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,U_(this.firebaseDependencies)];case 3:return r=i.sent(),[4,Y_(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,Q_(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:k_)];case 5:return i.sent(),[2]}})})},t.prototype.onNotificationClick=function(t){var e,n;return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(oo.__generator)(this,function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(tw(t.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,iw(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,ew(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=A_.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}})})},t}();function rw(t){var e,n=Object(oo.__assign)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function iw(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Object(oo.__generator)(this,function(u){switch(u.label){case 0:return[4,sw()];case 1:e=u.sent();try{for(n=Object(oo.__values)(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}function ow(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=A_.PUSH_RECEIVED;try{for(var i=Object(oo.__values)(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function sw(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function aw(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var uw=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===A_.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),tw(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw C_.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,Q_(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},t.prototype.updateVapidKey=function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=k_),[2]})})},t.prototype.updateSwReg=function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw C_.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},t.prototype.registerDefaultSw=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=n.sent(),C_.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},t.prototype.deleteToken=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,Y_(this.firebaseDependencies,this.swRegistration)]}})})},t.prototype.requestPermission=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t;return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw C_.create("denied"===t?"permission-blocked":"permission-default")}})})},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw C_.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw C_.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw C_.create("invalid-sw-registration");if(this.swRegistration)throw C_.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw C_.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw C_.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return n=function(t){switch(t){case A_.NOTIFICATION_CLICKED:return"notification_open";case A_.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},t}();function cw(t){return C_.create("missing-app-config-values",{valueName:t})}var lw={isSupported:hw};function hw(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}so.default.INTERNAL.registerComponent(new Cb.Component("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw cw("App Configuration Object");if(!t.name)throw cw("App Name");var r=t.options;try{for(var i=Object(oo.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw cw(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!hw())throw C_.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new nw(n):new uw(n)},"PUBLIC").setServiceProps(lw));var fw="firebasestorage.googleapis.com",dw=function(t){function e(n,r){var i=t.call(this,pw(n),"Firebase Storage: "+r+" ("+pw(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Object(oo.__extends)(e,t),e.prototype._codeEquals=function(t){return pw(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(ao.FirebaseError);function pw(t){return"storage/"+t}function gw(){return new dw("unknown","An unknown error occurred, please check the error payload for server response.")}function mw(){return new dw("canceled","User canceled the upload/download.")}function yw(){return new dw("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function vw(t){return new dw("invalid-argument",t)}function bw(){return new dw("app-deleted","The Firebase app was deleted.")}function _w(t){return new dw("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ww(t,e){return new dw("invalid-format","String does not match format '"+t+"': "+e)}function Ew(t){throw new dw("internal-error","Internal error: "+t)}var Tw={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Sw=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function Iw(t,e){switch(t){case Tw.RAW:return new Sw(Ow(e));case Tw.BASE64:case Tw.BASE64URL:return new Sw(Cw(t,e));case Tw.DATA_URL:return new Sw((n=new kw(e)).base64?Cw(Tw.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Tb){throw ww(Tw.DATA_URL,"Malformed data URL.")}return Ow(e)}(n.rest),new kw(e).contentType)}var n;throw gw()}function Ow(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Cw(t,e){switch(t){case Tw.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw ww(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Tw.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw ww(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(Tb){throw ww(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var kw=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw ww(Tw.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),Aw={STATE_CHANGED:"state_changed"},xw={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Nw(t){switch(t){case"running":case"pausing":case"canceling":return xw.RUNNING;case"paused":return xw.PAUSED;case"success":return xw.SUCCESS;case"canceled":return xw.CANCELED;case"error":default:return xw.ERROR}}var jw=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Pw=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=jw.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=jw.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=jw.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Ew("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Ew("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Ew("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Tb){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Ew("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Rw=function(){function t(){}return t.prototype.createXhrIo=function(){return new Pw},t}(),Dw=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(Tb){return new t(e,"")}if(""===r.path)return r;throw new dw("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===fw?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.path];f||(f=""),r=new t(h[l.indices.bucket],f),l.postModify(r);break}}if(null==r)throw function(t){return new dw("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),Mw=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function Lw(t){return"string"==typeof t||t instanceof String}function Fw(t){return Uw()&&t instanceof Blob}function Uw(){return"undefined"!=typeof Blob}function Vw(t,e,n,r){if(r<e)throw vw("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw vw("Invalid value for '"+t+"'. Expected "+n+" or less.")}function qw(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function Bw(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var Hw=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(Tb){o(Tb)}else null!==s?((r=gw()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?bw():mw():new dw("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Kw(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new Kw(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===jw.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Kw(s,n))}else{var a=n.getErrorCode()===jw.ABORT;e(!1,new Kw(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(oo.__spreadArray)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(oo.__spreadArray)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Kw=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function zw(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Ww(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=zw();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Uw())return new Blob(t);throw new dw("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Gw=function(){function t(t,e){var n=0,r="";Fw(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Fw(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Uw()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(Ww.apply(null,r))}var i=e.map(function(t){return Lw(t)?Iw(Tw.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function $w(t){var e,n;try{e=JSON.parse(t)}catch(Tb){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function Qw(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Yw(t,e){return e}var Xw=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Yw}}(),Jw=null;function Zw(){if(Jw)return Jw;var t=[];t.push(new Xw("bucket")),t.push(new Xw("generation")),t.push(new Xw("metageneration")),t.push(new Xw("name","fullPath",!0));var e=new Xw("name");e.xform=function(t,e){return function(t){return!Lw(t)||t.length<2?t:Qw(t)}(e)},t.push(e);var n=new Xw("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Xw("timeCreated")),t.push(new Xw("updated")),t.push(new Xw("md5Hash",null,!0)),t.push(new Xw("cacheControl",null,!0)),t.push(new Xw("contentDisposition",null,!0)),t.push(new Xw("contentEncoding",null,!0)),t.push(new Xw("contentLanguage",null,!0)),t.push(new Xw("contentType",null,!0)),t.push(new Xw("metadata","customMetadata",!0)),Jw=t}function tE(t,e,n){var r=$w(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Dw(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function eE(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var nE=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function rE(t){if(!t)throw gw()}function iE(t,e){return function(n,r){var i=tE(t,r,e);return rE(null!==i),i}}function oE(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new dw("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new dw("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new dw("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new dw("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function sE(t){var e=oE(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new dw("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function aE(t,e,n){var r=qw(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new nE(r,"GET",iE(t,n),i);return o.errorHandler=sE(e),o}function uE(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var cE=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function lE(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Tb){rE(!1)}return rE(!!n&&-1!==(e||["active"]).indexOf(n)),n}var hE=262144,fE=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function dE(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var pE=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Zw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=uE(e,r,i),a={name:s.fullPath},u=qw(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=eE(s,n),h=new nE(u,"POST",function(t){var e;lE(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Tb){rE(!1)}return rE(Lw(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=oE(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new nE(n,"POST",function(t){var e=lE(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Tb){rE(!1)}n||rE(!1);var i=Number(n);return rE(!isNaN(i)),new cE(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=oE(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=hE*this._chunkMultiplier,n=new cE(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var u=new cE(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new dw("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw yw();var p=new nE(n,"POST",function(t,n){var i,s=lE(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?iE(e,o)(t,n):null,new cE(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=oE(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Tb){return t._error=Tb,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){hE*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=aE(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=uE(e,r,i),c=eE(u,n),l=Gw.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw yw();var h={name:u.fullPath},f=qw(o,t.host),d=t.maxUploadRetryTime,p=new nE(f,"POST",iE(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=oE(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=mw(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Nw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new fE(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Nw(this._state)){case xw.SUCCESS:dE(this._resolve.bind(null,this.snapshot))();break;case xw.CANCELED:case xw.ERROR:dE(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Nw(this._state)){case xw.RUNNING:case xw.PAUSED:t.next&&dE(t.next.bind(t,this.snapshot))();break;case xw.SUCCESS:t.complete&&dE(t.complete.bind(t))();break;case xw.CANCELED:case xw.ERROR:t.error&&dE(t.error.bind(t,this._error))();break;default:t.error&&dE(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),gE=function(){function t(t,e){this._service=t,this._location=e instanceof Dw?e:Dw.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Dw(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Qw(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Dw(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw _w(t)},t}();function mE(t){var e={prefixes:[],items:[]};return yE(t,e).then(function(){return e})}function yE(t,e,n){return Object(oo.__awaiter)(this,void 0,void 0,function(){var r,i,o;return Object(oo.__generator)(this,function(s){switch(s.label){case 0:return[4,vE(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,yE(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function vE(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Vw("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=qw(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new nE(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=$w(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new Dw(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new Dw(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return rE(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=oE(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function bE(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Dw(t._location.bucket,n);return new gE(t.storage,r)}function _E(t){return/^[A-Za-z]+:\/\//.test(t)}function wE(t,e){if(t instanceof SE){var n=t;if(null==n._bucket)throw new dw("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new gE(n,n._bucket);return null!=e?wE(r,e):r}if(void 0!==e){if(e.includes(".."))throw vw('`path` param cannot contain ".."');return bE(t,e)}return t}function EE(t,e){if(e&&_E(e)){if(t instanceof SE)return new gE(t,e);throw vw("To use ref(service, url), the first argument must be a Storage instance.")}return wE(t,e)}function TE(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:Dw.makeFromBucketSpec(n,t)}var SE=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=fw,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Dw.makeFromBucketSpec(i,this._host):TE(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?Dw.makeFromBucketSpec(this._url,t):TE(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Vw("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Vw("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t;return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new gE(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new Mw(bw());var i=function(t,e,n,r,i,o){var s=Bw(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new Hw(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function IE(t,e){return EE(t=Object(ao.getModularInstance)(t),e)}var OE=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),CE=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new OE(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new OE(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new OE(t,i,i._ref))}:{next:e.next?function(t){return e.next(new OE(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),kE=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new AE(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new AE(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),AE=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return bE(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new CE(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new pE(t,new Gw(e),n)}(t=Object(ao.getModularInstance)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Tw.RAW),this._throwIfRoot("putString");var r=Iw(e,t),i=Object(oo.__assign)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new CE(new pE(this._delegate,new Gw(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,mE(t=Object(ao.getModularInstance)(t))).then(function(t){return new kE(t,e.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return vE(t=Object(ao.getModularInstance)(t),e)}(this._delegate,t||void 0).then(function(t){return new kE(t,e.storage)})},t.prototype.getMetadata=function(){return t=this._delegate,function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=aE(t.storage,t._location,Zw()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=Object(ao.getModularInstance)(t));var t},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=qw(e.fullServerUrl(),t.host),o=eE(n,r),s=t.maxOperationRetryTime,a=new nE(i,"PATCH",iE(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=sE(e),a}(t.storage,t._location,e,Zw()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=Object(ao.getModularInstance)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return t=this._delegate,function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=qw(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new nE(r,"GET",function(t,e){return function(n,r){var i=tE(t,r,e);return rE(null!==i),function(t,e,n){var r=$w(e);if(null===r)return null;if(!Lw(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return qw("/b/"+o(t.bucket)+"/o/"+o(r),n)+Bw({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=sE(e),o}(t.storage,t._location,Zw()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new dw("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=Object(ao.getModularInstance)(t));var t},t.prototype.delete=function(){return this._throwIfRoot("delete"),t=this._delegate,function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=qw(e.fullServerUrl(),t.host),r=new nE(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=sE(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=Object(ao.getModularInstance)(t));var t},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw _w(t)},t}(),xE=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(_E(t))throw vw("ref() expected a child path but got a URL, use refFromURL instead.");return new AE(IE(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!_E(t))throw vw("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Dw.makeFromUrl(t,this._delegate.host)}catch(Tb){throw vw("refFromUrl() expected a valid full URL but got an invalid one.")}return new AE(IE(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function NE(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new xE(r,new SE(r,i,o,new Rw,n,so.default.SDK_VERSION))}!function(t){var e={TaskState:xw,TaskEvent:Aw,StringFormat:Tw,Storage:SE,Reference:AE};t.INTERNAL.registerComponent(new Cb.Component("storage",NE,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.5.2")}(so.default);var jE,PE,RE,DE="0.4.12",ME=DE,LE="FB-PERF-TRACE-MEASURE",FE="_wt_",UE="_fcp",VE="_fid",qE="@firebase/performance/config",BE="@firebase/performance/configexpire",HE="Performance",KE=((jE={})["trace started"]="Trace {$traceName} was started before.",jE["trace stopped"]="Trace {$traceName} is not running.",jE["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",jE["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",jE["no window"]="Window is not available.",jE["no app id"]="App id is not available.",jE["no project id"]="Project id is not available.",jE["no api key"]="Api key is not available.",jE["invalid cc log"]="Attempted to queue invalid cc event",jE["FB not default"]="Performance can only start when Firebase app instance is the default one.",jE["RC response not ok"]="RC response is not ok",jE["invalid attribute name"]="Attribute name {$attributeName} is invalid.",jE["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",jE["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",jE["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",jE),zE=new ao.ErrorFactory("performance",HE,KE),WE=new uo.Logger(HE);WE.logLevel=uo.LogLevel.INFO;var GE,$E=function(){function t(t){if(this.window=t,!t)throw zE.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(ao.isIndexedDBAvailable)()||(WE.info("IndexedDB is not supported by current browswer"),!1):(WE.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])}).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===PE&&(PE=new t(RE)),PE},t}();function QE(t,e){var n=t.length-e.length;if(n<0||n>1)throw zE.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var YE,XE=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=QE("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=QE("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw zE.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw zE.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw zE.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===GE&&(GE=new t),GE},t}();function JE(){return YE}var ZE=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}({}),tT=["firebase_","google_","ga_"],eT=new RegExp("^[a-zA-Z]\\w*$");function nT(){var t=$E.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function rT(){switch($E.getInstance().document.visibilityState){case"visible":return ZE.VISIBLE;case"hidden":return ZE.HIDDEN;default:return ZE.UNKNOWN}}function iT(){var t=$E.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function oT(t){if(!t)return t;var e=XE.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=sT(e.tracesSamplingRate),e.logNetworkAfterSampling=sT(e.networkRequestsSamplingRate),t}function sT(t){return Math.random()<=t}var aT,uT=1;function cT(){return uT=2,aT=aT||function(){var t=$E.getInstance().document;return new Promise(function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}().then(function(){return(t=XE.getInstance().installationsService.getId()).then(function(t){YE=t}),t;var t}).then(function(t){return function(t){var e=function(){var t=$E.getInstance().localStorage;if(t){var e=t.getItem(BE);if(e&&Number(e)>Date.now()){var n=t.getItem(qE);if(n)try{return JSON.parse(n)}catch(r){return}}}}();return e?(oT(e),Promise.resolve()):function(t){return(e=XE.getInstance().installationsService.getToken(),e.then(function(t){}),e).then(function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+XE.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+XE.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:XE.getInstance().getAppId(),app_version:ME,sdk_version:"0.0.1"})});return fetch(r).then(function(t){if(t.ok)return t.json();throw zE.create("RC response not ok")})}).catch(function(){WE.info("Could not fetch config, will use default configs")});var e}(t).then(oT).then(function(t){return function(t){var e=$E.getInstance().localStorage;t&&e&&(e.setItem(qE,JSON.stringify(t)),e.setItem(BE,String(Date.now()+60*XE.getInstance().configTimeToLive*60*1e3)))}(t)},function(){})}(t)}).then(function(){return lT()},function(){return lT()})}function lT(){uT=3}var hT,fT=1e4,dT=3,pT=[],gT=!1;function mT(t){setTimeout(function(){var t,e;if(0!==dT)return pT.length?(e=(t=pT.splice(0,1e3)).map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,e){return function(t){var e=XE.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||WE.info("Call to Firebase backend failed."),t.json()}).then(function(t){var n=Number(t.nextRequestWaitMillis),r=fT;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(pT=Object(oo.__spreadArray)(Object(oo.__spreadArray)([],e),pT),WE.info("Retry transport request later.")),dT=3,mT(r)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:XE.getInstance().logSource,log_event:e},t).catch(function(){pT=Object(oo.__spreadArray)(Object(oo.__spreadArray)([],t),pT),dT--,WE.info("Tries left: "+dT+"."),mT(fT)})):mT(fT)},t)}function yT(t){if(!t.eventTime||!t.message)throw zE.create("invalid cc log");pT=Object(oo.__spreadArray)(Object(oo.__spreadArray)([],pT),[t])}function vT(t,e){var n;hT||(n=wT,hT=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];yT({message:n.apply(void 0,t),eventTime:Date.now()})}),hT(t,e)}function bT(t){var e=XE.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&$E.getInstance().requiredApisAvailable()&&(t.isAuto&&rT()!==ZE.VISIBLE||(3===uT?_T(t):cT().then(function(){return _T(t)},function(){return _T(t)})))}function _T(t){if(JE()){var e=XE.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return vT(t,1)},0)}}function wT(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:ET(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:ET(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function ET(){return{google_app_id:XE.getInstance().getAppId(),app_instance_id:JE(),web_app_info:{sdk_version:ME,page_url:$E.getInstance().getUrl(),service_worker_status:nT(),visibility_state:rT(),effective_connection_type:iT()},application_process_state:0}}var TT=["_fp",UE,VE],ST=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=$E.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw zE.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw zE.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),bT(this)},t.prototype.record=function(t,e,n){if(t<=0)throw zE.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw zE.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(oo.__assign)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}bT(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(o=this.name,0===(i=t).length||i.length>100||!(o&&o.startsWith(FE)&&TT.indexOf(i)>-1)&&i.startsWith("_"))throw zE.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&WE.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||tT.some(function(t){return n.startsWith(t)})||!n.match(eT)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw zE.create("invalid attribute name",{attributeName:t});if(!i)throw zE.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(oo.__assign)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=$E.getInstance().getUrl();if(i){var o=new t(FE+i,!0),s=Math.floor(1e3*$E.getInstance().getTimeOrigin());if(o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var a=n.find(function(t){return"first-paint"===t.name});a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find(function(t){return"first-contentful-paint"===t.name});u&&u.startTime&&o.putMetric(UE,Math.floor(1e3*u.startTime)),r&&o.putMetric(VE,Math.floor(1e3*r))}bT(o)}},t.createUserTimingTrace=function(e){bT(new t(e,!1,e))},t}();function IT(t){var e=t;if(e&&void 0!==e.responseStart){var n=$E.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=XE.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return vT(t,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function OT(){JE()&&(setTimeout(function(){return function(){var t=$E.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){ST.createOobTrace(e,n),r=void 0},5e3);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),ST.createOobTrace(e,n,t))})}else ST.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=$E.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)IT(n[e]);t.setupObserver("resource",IT)}()},0),setTimeout(function(){return function(){for(var t=$E.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)CT(n[e]);t.setupObserver("measure",CT)}()},0))}function CT(t){var e=t.name;e.substring(0,LE.length)!==LE&&ST.createUserTimingTrace(e)}var kT=function(){function t(t){this.app=t,$E.getInstance().requiredApisAvailable()&&Object(ao.validateIndexedDBOpenable)().then(function(t){t&&(gT||(mT(5500),gT=!0),cT().then(OT,OT))}).catch(function(t){WE.info("Environment doesn't support IndexedDB: "+t)})}return t.prototype.trace=function(t){return new ST(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return XE.getInstance().instrumentationEnabled},set:function(t){XE.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return XE.getInstance().dataCollectionEnabled},set:function(t){XE.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new Cb.Component("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw zE.create("FB not default");if("undefined"==typeof window)throw zE.create("no window");return function(t){RE=t}(window),XE.getInstance().firebaseAppInstance=t,XE.getInstance().installationsService=e,new kT(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC")),t.registerVersion("@firebase/performance",DE)}(so.default);var AT,xT="https://www.googletagmanager.com/gtag/js",NT=function(t){return t.EVENT="event",t.SET="set",t.CONFIG="config",t}({}),jT=function(t){return t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results",t}({}),PT=new uo.Logger("@firebase/analytics");function RT(t,e,n,r,i,o){return Object(oo.__awaiter)(this,void 0,void 0,function(){var s,a,u,c;return Object(oo.__generator)(this,function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),(u=a.find(function(t){return t.measurementId===i}))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),PT.error(c),[3,8];case 8:return t(NT.CONFIG,i,o),[2]}})})}function DT(t,e,n,r,i){return Object(oo.__awaiter)(this,void 0,void 0,function(){var o,s,a,u,c,l,h;return Object(oo.__generator)(this,function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=f.sent(),u=function(t){var n=a.find(function(e){return e.measurementId===t}),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=s;c<l.length&&"break"!==u(l[c]);c++);f.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return f.sent(),t(NT.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),PT.error(h),[3,5];case 5:return[2]}})})}var MT=((AT={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",AT["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",AT["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",AT["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",AT["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",AT["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",AT["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",AT["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',AT["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',AT),LT=new ao.ErrorFactory("analytics","Analytics",MT),FT=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function UT(t){var e;return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(oo.__generator)(this,function(u){switch(u.label){case 0:return n=t.appId,r={method:"GET",headers:(c=t.apiKey,new Headers({Accept:"application/json","x-goog-api-key":c}))},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(i,r)];case 1:if(200===(o=u.sent()).status||304===o.status)return[3,6];s="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.json()];case 3:return a=u.sent(),(null===(e=a.error)||void 0===e?void 0:e.message)&&(s=a.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw LT.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s});case 6:return[2,o.json()]}var c})})}function VT(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=FT),Object(oo.__awaiter)(this,void 0,void 0,function(){var e,s,a,u,c,l,h;return Object(oo.__generator)(this,function(f){switch(f.label){case 0:e=t.appId,s=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,qT(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return PT.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,UT(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof ao.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),s)return PT.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return l=503===Number(c.customData.httpStatus)?Object(ao.calculateBackoffMillis)(o,r.intervalMillis,30):Object(ao.calculateBackoffMillis)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),PT.debug("Calling attemptFetch again in "+l+" millis"),[2,VT(t,h,n,r)];case 7:return[2]}})})}function qT(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(LT.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var BT,HT,KT=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),zT={},WT=[],GT={},$T="dataLayer",QT="gtag",YT=!1;function XT(t){if(YT)throw LT.create("already-initialized");t.dataLayerName&&($T=t.dataLayerName),t.gtagName&&(QT=t.gtagName)}var JT="analytics";function ZT(){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(t){switch(t.label){case 0:if(Object(ao.isBrowserExtension)())return[2,!1];if(!Object(ao.areCookiesEnabled)())return[2,!1];if(!Object(ao.isIndexedDBAvailable)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(ao.validateIndexedDBOpenable)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}!function(t){t.INTERNAL.registerComponent(new Cb.Component(JT,function(t){return function(t,e){!function(){var t=[];if(Object(ao.isBrowserExtension)()&&t.push("This is a browser extension environment."),Object(ao.areCookiesEnabled)()||t.push("Cookies are not available."),t.length>0){var e=t.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=LT.create("invalid-analytics-context",{errorInfo:e});PT.warn(n.message)}}();var n,r,i=t.options.appId;if(!i)throw LT.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw LT.create("no-api-key");PT.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=zT[i])throw LT.create("already-exists",{id:i});if(!YT){n=$T,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return Object(oo.__awaiter)(this,void 0,void 0,function(){var a;return Object(oo.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==NT.EVENT?[3,2]:[4,DT(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==NT.CONFIG?[3,4]:[4,RT(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(NT.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),PT.error(a),[3,7];case 7:return[2]}})})}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(zT,WT,GT,$T,QT);HT=o.wrappedGtag,BT=o.gtagCore,YT=!0}return zT[i]=function(t,e,n,r,i,o){return Object(oo.__awaiter)(this,void 0,void 0,function(){var s,a,u,c,l,h,f;return Object(oo.__generator)(this,function(d){switch(d.label){case 0:return(s=function(t,e,n){return void 0===e&&(e=FT),Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u=this;return Object(oo.__generator)(this,function(c){if(i=(n=t.options).apiKey,o=n.measurementId,!(r=n.appId))throw LT.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw LT.create("no-api-key")}return s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new KT,setTimeout(function(){return Object(oo.__awaiter)(u,void 0,void 0,function(){return Object(oo.__generator)(this,function(t){return a.abort(),[2]})})},6e4),[2,VT({appId:r,apiKey:i,measurementId:o},s,a,e)]})})}(t)).then(function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&PT.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return PT.error(t)}),e.push(s),a=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t;return Object(oo.__generator)(this,function(e){switch(e.label){case 0:return Object(ao.isIndexedDBAvailable)()?[3,1]:(PT.warn(LT.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(ao.validateIndexedDBOpenable)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),PT.warn(LT.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?r.getId():void 0}),[4,Promise.all([s,a])];case 1:return u=d.sent(),c=u[0],l=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(xT))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=xT+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(NT.CONFIG,c.measurementId,h),[2,c.measurementId]}})})}(t,WT,GT,e,BT,$T),{app:t,logEvent:function(t,e,n){(function(t,e,n,r,i){return Object(oo.__awaiter)(this,void 0,void 0,function(){var o,s;return Object(oo.__generator)(this,function(a){switch(a.label){case 0:return i&&i.global?(t(NT.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=Object(oo.__assign)(Object(oo.__assign)({},r),{send_to:o}),t(NT.EVENT,n,s),a.label=3;case 3:return[2]}})})})(HT,zT[i],t,e,n).catch(function(t){return PT.error(t)})},setCurrentScreen:function(t,e){(function(t,e,n,r){return Object(oo.__awaiter)(this,void 0,void 0,function(){var i;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(NT.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(NT.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}})})})(HT,zT[i],t,e).catch(function(t){return PT.error(t)})},setUserId:function(t,e){(function(t,e,n,r){return Object(oo.__awaiter)(this,void 0,void 0,function(){var i;return Object(oo.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(NT.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(NT.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}})})})(HT,zT[i],t,e).catch(function(t){return PT.error(t)})},setUserProperties:function(t,e){(function(t,e,n,r){return Object(oo.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(oo.__generator)(this,function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)i["user_properties."+(a=s[o])]=n[a];return t(NT.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(NT.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}})})})(HT,zT[i],t,e).catch(function(t){return PT.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}})})})(zT[i],t).catch(function(t){return PT.error(t)})},INTERNAL:{delete:function(){return delete zT[i],Promise.resolve()}}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:XT,EventName:jT,isSupported:ZT})),t.INTERNAL.registerComponent(new Cb.Component("analytics-internal",function(t){try{return{logEvent:t.getProvider(JT).getImmediate().logEvent}}catch(Tb){throw LT.create("interop-component-reg-failed",{reason:Tb})}},"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.10")}(so.default);var tS,eS=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(oo.__generator)(this,function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}})})},t}(),nS=((tS={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",tS["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",tS["registration-api-key"]="Undefined API key. Check Firebase app initialization.",tS["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",tS["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",tS["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",tS["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",tS["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",tS["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",tS["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',tS["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',tS["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",tS["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",tS),rS=new ao.ErrorFactory("remoteconfig","Remote Config",nS),iS=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,l,h,f,d,p,g,m;return Object(oo.__generator)(this,function(y){switch(y.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=y.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===v&&(v=navigator),v.languages&&v.languages[0]||v.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(i)},s=fetch(r,o),a=new Promise(function(e,n){t.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)})}),y.label=2;case 2:return y.trys.push([2,5,,6]),[4,Promise.race([s,a])];case 3:return y.sent(),[4,s];case 4:return u=y.sent(),[3,6];case 5:throw c=y.sent(),l="fetch-client-network","AbortError"===c.name&&(l="fetch-timeout"),rS.create(l,{originalErrorMessage:c.message});case 6:if(h=u.status,f=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];g=void 0,y.label=7;case 7:return y.trys.push([7,9,,10]),[4,u.json()];case 8:return g=y.sent(),[3,10];case 9:throw m=y.sent(),rS.create("fetch-client-parse",{originalErrorMessage:m.message});case 10:d=g.entries,p=g.state,y.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(d={}),304!==h&&200!==h)throw rS.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:f,config:d}]}var v})})},t}(),oS=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),sS=["1","true","t","yes","y","on"],aS=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&sS.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),uS=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=uo.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=uo.LogLevel.SILENT;break;default:this._logger.logLevel=uo.LogLevel.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t,e,n;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}})})},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},t.prototype.fetch=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:t=new oS,setTimeout(function(){return Object(oo.__awaiter)(r,void 0,void 0,function(){return Object(oo.__generator)(this,function(e){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof ao.FirebaseError&&-1!==t.code.indexOf("fetch-throttle")}(e)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}})})},t.prototype.fetchAndActivate=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){return Object(oo.__generator)(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Object(oo.__assign)(Object(oo.__assign)({},t),e))).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new aS("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new aS("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new aS("static"))},t}();function cS(t,e){var n=t.target.error||void 0;return rS.create(e,{originalErrorMessage:n&&n.message})}var lS="app_namespace_store",hS=function(){function t(t,e,n,r){void 0===r&&(r=new Promise(function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(cS(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(lS,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([lS],"readonly").objectStore(lS),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(cS(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(Tb){i(rS.create("storage-get",{originalErrorMessage:Tb&&Tb.message}))}})]}})})},t.prototype.set=function(t,e){return Object(oo.__awaiter)(this,void 0,void 0,function(){var n,r=this;return Object(oo.__generator)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var s=n.transaction([lS],"readwrite").objectStore(lS),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(cS(t,"storage-set"))},u.onsuccess=function(){i()}}catch(Tb){o(rS.create("storage-set",{originalErrorMessage:Tb&&Tb.message}))}})]}})})},t.prototype.delete=function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,n=this;return Object(oo.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([lS],"readwrite").objectStore(lS),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(cS(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(Tb){i(rS.create("storage-delete",{originalErrorMessage:Tb&&Tb.message}))}})]}})})},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),fS=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(oo.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i,o;return Object(oo.__generator)(this,function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}})})},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function dS(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(rS.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var pS,gS=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(oo.__awaiter)(this,void 0,void 0,function(){var e;return Object(oo.__generator)(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}})})},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Object(oo.__awaiter)(this,void 0,void 0,function(){var e,i,o;return Object(oo.__generator)(this,function(s){switch(s.label){case 0:return[4,dS(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof ao.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Object(ao.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}})})},t}(),mS="@firebase/remote-config";(pS=so.default).INTERNAL.registerComponent(new Cb.Component("remoteConfig",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw rS.create("registration-window");var o=r.options,s=o.projectId,a=o.apiKey,u=o.appId;if(!s)throw rS.create("registration-project-id");if(!a)throw rS.create("registration-api-key");if(!u)throw rS.create("registration-app-id");var c=new hS(u,r.name,n=n||"firebase"),l=new fS(c),h=new uo.Logger(mS);h.logLevel=uo.LogLevel.ERROR;var f=new iS(i,pS.SDK_VERSION,n,s,a,u),d=new gS(f,c),p=new eS(d,c,l,h),g=new uS(r,p,l,c,h);return g.ensureInitialized(),g},"PUBLIC").setMultipleInstances(!0)),pS.registerVersion(mS,"0.1.37"),n("X8/r"),so.default.registerVersion("firebase","8.6.1","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),so.default.registerVersion("firebase","8.6.1");var yS=n("D0XW");function vS(){return t=>t.lift(new bS)}class bS{call(t,e){return e.subscribe(new _S(t))}}class _S extends kt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class wS{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new ES(t,this.compare,this.keySelector))}}class ES extends kt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var TS=n("pxpQ"),SS=n("spgP"),IS=n("Jgta"),OS=n("VRyK"),CS=n("qgXg"),kS=n("Ylt2");class AS extends fe.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new xS(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new de.a;if(this.isStopped||this.hasError?o=an.a.EMPTY:(this.observers.push(t),o=new kS.a(this,t)),r&&t.add(t=new TS.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||CS.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class xS{constructor(t,e){this.time=t,this.value=e}}function NS(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new AS(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function jS(t,e){return e?je(()=>t,e):je(()=>t)}var PS=n("tf+s");const RS=new r.r("angularfire2.auth.use-emulator"),DS=new r.r("angularfire2.auth.settings"),MS=new r.r("angularfire2.auth.tenant-id"),LS=new r.r("angularfire2.auth.langugage-code"),FS=new r.r("angularfire2.auth.use-device-language"),US=new r.r("angularfire.auth.persistence");let VS=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new SS.d(i),f=Object(SS.h)(h),d=new fe.a,p=Object(St.a)(void 0).pipe(Object(TS.b)(h.outsideAngular),je(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(jt.a)(()=>Object(SS.g)(t,i,e)),Object(jt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(SS.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),NS({bufferSize:1,refCount:!1}));if(K(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(St.a)(null);else{p.pipe(rn()).subscribe();const t=p.pipe(je(t=>t.getRedirectResult().then(t=>t,()=>null)),f,NS({bufferSize:1,refCount:!1})),e=t=>new It.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(je(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(je(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(jS(n),Object(PS.a)(h.outsideAngular),Object(TS.b)(h.insideAngular)),this.user=t.pipe(jS(r),Object(PS.a)(h.outsideAngular),Object(TS.b)(h.insideAngular)),this.idToken=this.user.pipe(je(t=>t?Object(he.a)(t.getIdToken()):Object(St.a)(null))),this.idTokenResult=this.user.pipe(je(t=>t?Object(he.a)(t.getIdTokenResult()):Object(St.a)(null))),this.credential=Object(OS.a)(t,d,this.authState.pipe(At(t=>!t))).pipe(Object(jt.a)(t=>(null==t?void 0:t.user)?t:null),Object(PS.a)(h.outsideAngular),Object(TS.b)(h.insideAngular))}return Object(SS.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(SS.c),r.Vb(SS.b,8),r.Vb(r.C),r.Vb(r.A),r.Vb(RS,8),r.Vb(DS,8),r.Vb(MS,8),r.Vb(LS,8),r.Vb(FS,8),r.Vb(US,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Vb)(SS.c),Object(r.Vb)(SS.b,8),Object(r.Vb)(r.C),Object(r.Vb)(r.A),Object(r.Vb)(RS,8),Object(r.Vb)(DS,8),Object(r.Vb)(MS,8),Object(r.Vb)(LS,8),Object(r.Vb)(FS,8),Object(r.Vb)(US,8))},token:t,providedIn:"any"}),t})();Object(SS.e)(VS,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let qS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[VS]}),t})();function BS(t,e){return function(t,e=yS.b){return new It.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function HS(t,e){return BS(t,e).pipe(Object(jt.a)(t=>({payload:t,type:"query"})))}function KS(t,e){return HS(t,e).pipe(Ue(void 0),vS(),Object(jt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function zS(t,e,n){return KS(t,n).pipe(Ve((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return WS(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return WS(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return WS(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new wS(void 0,void 0)),Object(jt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function WS(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function GS(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class $S{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=KS(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(jt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Ue(void 0),vS(),At(([t,e])=>e.length>0||!t),Object(jt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Ve((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=GS(t);return zS(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return HS(this.query,this.afs.schedulers.outsideAngular).pipe(Object(jt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(he.a)(this.query.get(t)).pipe(Object(TS.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new QS(this.ref.doc(t),this.afs)}}class QS{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=eI(n,e);return new $S(r,i,this.afs)}snapshotChanges(){return BS(this.ref,this.afs.schedulers.outsideAngular).pipe(Ue(void 0),vS(),Object(jt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(jt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(he.a)(this.ref.get(t)).pipe(Object(TS.b)(this.afs.schedulers.insideAngular))}}class YS{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?KS(this.query,this.afs.schedulers.outsideAngular).pipe(Object(jt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),At(t=>t.length>0),this.afs.keepUnstableUntilFirst):KS(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Ve((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=GS(t);return zS(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return HS(this.query,this.afs.schedulers.outsideAngular).pipe(Object(jt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(he.a)(this.query.get(t)).pipe(Object(TS.b)(this.afs.schedulers.insideAngular))}}const XS=new r.r("angularfire2.enableFirestorePersistence"),JS=new r.r("angularfire2.firestore.persistenceSettings"),ZS=new r.r("angularfire2.firestore.settings"),tI=new r.r("angularfire2.firestore.use-emulator");function eI(t,e=(t=>t)){return{query:e(t),ref:t}}let nI=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new SS.d(o),this.keepUnstableUntilFirst=Object(SS.h)(this.schedulers);const c=Object(SS.g)(t,o,e);!IS.a.auth&&u&&Object(SS.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(SS.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!K(i)){const e=()=>{try{return Object(he.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Tb){return"undefined"!=typeof console&&console.warn(Tb),Object(St.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(St.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=eI(n,e),o=this.schedulers.ngZone.run(()=>r);return new $S(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new YS(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new QS(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(SS.c),r.Vb(SS.b,8),r.Vb(XS,8),r.Vb(ZS,8),r.Vb(r.C),r.Vb(r.A),r.Vb(JS,8),r.Vb(tI,8),r.Vb(RS,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Vb)(SS.c),Object(r.Vb)(SS.b,8),Object(r.Vb)(XS,8),Object(r.Vb)(ZS,8),Object(r.Vb)(r.C),Object(r.Vb)(r.A),Object(r.Vb)(JS,8),Object(r.Vb)(tI,8),Object(r.Vb)(RS,8))},token:t,providedIn:"any"}),t})(),rI=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:XS,useValue:!0},{provide:JS,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[nI]}),t})(),iI=(()=>{class t{constructor(t,e,n,r){this.afs=t,this.afAuth=e,this.router=n,this.ngZone=r,this.afAuth.authState.subscribe(t=>{t?(this.userData=t,localStorage.setItem("user",JSON.stringify(this.userData))):localStorage.removeItem("user")})}SignIn(t,e){return this.afAuth.signInWithEmailAndPassword(t,e).then(t=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(t.user)}).catch(t=>{window.alert(t.message)})}SignUp(t,e){return this.afAuth.createUserWithEmailAndPassword(t,e).then(t=>{this.SendVerificationMail(),this.SetUserData(t.user)}).catch(t=>{window.alert(t.message)})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(t=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),void 0!==t.user&&this.SetUserData(t.user)}).catch(t=>{window.alert(t)})}SetUserData(t){return null==t?null:this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return Object(oo.__awaiter)(this,void 0,void 0,function*(){yield this.afAuth.signOut(),localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}SendVerificationMail(){var t;return Object(oo.__awaiter)(this,void 0,void 0,function*(){return null===(t=yield this.afAuth.currentUser)||void 0===t?void 0:t.sendEmailVerification().then(()=>{this.router.navigate(["verify-email-address"])})})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(t=>{window.alert(t)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user")||"");return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new so.default.auth.GoogleAuthProvider)}token(){var t;return Object(oo.__awaiter)(this,void 0,void 0,function*(){return(yield null===(t=so.default.auth().currentUser)||void 0===t?void 0:t.getIdToken())||""})}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(nI),r.Vb(VS),r.Vb(Di),r.Vb(r.A))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),oI=(()=>{class t{constructor(t,e){this.authService=t,this.router=e}canActivate(t,e){return this.authService.isLoggedIn||this.router.navigate(["sign-in"]),!0}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(iI),r.Vb(Di))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),sI=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(iI))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-verify-email"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})(),aI=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-dashboard"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})();class uI{constructor(t){this.notifier=t}call(t,e){const n=new cI(t),r=Object(Ne.c)(this.notifier,new Ne.a(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class cI extends Ne.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}class lI{}const hI="*";function fI(t,e=null){return{type:4,styles:e,timings:t}}function dI(t,e=null){return{type:2,steps:t,options:e}}function pI(t){return{type:6,styles:t,offset:null}}function gI(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function mI(t,e=null){return{type:8,animation:t,options:e}}function yI(t,e=null){return{type:10,animation:t,options:e}}function vI(t){Promise.resolve(null).then(t)}class bI{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){vI(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class _I{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?vI(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}var wI=function(t){return t.Scale="scale",t}({});const EI=mI([pI({opacity:0,transform:"scale(0.5)"}),fI("{{time}} cubic-bezier(0.785, 0.135, 0.15, 0.86)",pI({opacity:1,transform:"scale(1)"}))]),TI=mI([fI("{{time}} cubic-bezier(0.785, 0.135, 0.15, 0.86)",pI({opacity:0,transform:"scale(0.5)"}))]);let SI=(()=>{class t{}return t.MOVIE_PLOT="Plot",t.MOVIE_DETAILS="Details",t.MOVIE_CREW="Crew",t.MOVIE_STATS="Stats",t.MOVIE_COMMENTS="Comments",t.MOVIE_URL_PARAMETER="idString",t.MOVIE_DYNAMIC_COMP="tabContent",t.CHART_SLIDE_CHUNK=12,t})();function II(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",11),r.Rb(1,"div",12),r.Yb("click",function(){r.ic(t);const n=e.$implicit;return r.bc(3).navigateTo(n.idString)}),r.Rb(2,"div",13),r.Rb(3,"figure",14),r.Nb(4,"img",15),r.Qb(),r.Qb(),r.Rb(5,"div",16),r.oc(6),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=e.$implicit;r.Cb(4),r.gc("src",t.poster,r.jc),r.Cb(2),r.qc(" ",t.title," ")}}function OI(t,e){if(1&t){const t=r.Sb();r.Rb(0,"div",3),r.Rb(1,"button",4),r.Yb("click",function(){return r.ic(t),r.bc(2).onPreviousClick()}),r.Nb(2,"span",5),r.Qb(),r.Rb(3,"button",6),r.Yb("click",function(){return r.ic(t),r.bc(2).onNextClick()}),r.Nb(4,"span",7),r.Qb(),r.Rb(5,"div",8),r.Rb(6,"div",9),r.mc(7,II,7,2,"div",10),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=r.bc().$implicit,e=r.bc();r.gc("@slideAnimation",e.animationType),r.Cb(7),r.gc("ngForOf",t.movies)}}function CI(t,e){if(1&t&&(r.Pb(0),r.mc(1,OI,8,2,"div",2),r.Ob()),2&t){const t=e.index,n=r.bc();r.Cb(1),r.gc("ngIf",t===n.getCurrentSlide())}}let kI=(()=>{class t{constructor(t){this.router=t,this.animationType=wI.Scale,this.slides=[],this.currentSlide=0,this.chunk=SI.CHART_SLIDE_CHUNK}ngOnInit(){let t;for(let e=0,n=this.chart.movies.$values.length;e<n;e+=this.chunk)t=this.chart.movies.$values.slice(e,e+this.chunk),this.slides.push({movies:t})}getCurrentSlide(){return this.currentSlide}getLastSlide(){return this.slides.length}getSlides(){return this.slides}onPreviousClick(){const t=this.currentSlide-1;this.currentSlide=t<0?this.slides.length-1:t}onNextClick(){const t=this.currentSlide+1;this.currentSlide=t===this.slides.length?0:t}navigateTo(t){this.router.navigate(["/details",t])}}var e;return t.\u0275fac=function(e){return new(e||t)(r.Mb(Di))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-chart-carousel"]],inputs:{chart:"chart",animationType:"animationType"},decls:4,vars:3,consts:[[4,"ngFor","ngForOf"],[1,"paginator"],["class","slide",4,"ngIf"],[1,"slide"],[1,"control","prev",3,"click"],[1,"arrow","left"],[1,"control","next",3,"click"],[1,"arrow","right"],[1,"centered-grid"],[1,"row","columns","is-multiline"],["class","column is-3",4,"ngFor","ngForOf"],[1,"column","is-3"],[1,"card",3,"click"],[1,"card-image"],[1,"image","is-16by9"],[3,"src"],[1,"overlay"]],template:function(t,e){1&t&&(r.mc(0,CI,2,1,"ng-container",0),r.Rb(1,"div",1),r.Rb(2,"div"),r.oc(3),r.Qb(),r.Qb()),2&t&&(r.gc("ngForOf",e.getSlides()),r.Cb(3),r.rc("Slide ",e.getCurrentSlide()+1," of ",e.getLastSlide(),""))},directives:[x,j],styles:[".slide[_ngcontent-%COMP%]{top:0;left:0;width:100%;object-fit:cover;border-radius:.5em}.control[_ngcontent-%COMP%], .slide[_ngcontent-%COMP%]{position:absolute;height:100%}.control[_ngcontent-%COMP%]{border:none;background-color:initial;outline:0;cursor:pointer;display:flex;flex-direction:column;justify-content:center;padding:.5em;font-size:3rem;opacity:80%;transition:opacity .15s cubic-bezier(.25,.46,.45,.84)}.control[_ngcontent-%COMP%]:focus, .control[_ngcontent-%COMP%]:hover{opacity:1}.control.next[_ngcontent-%COMP%]{right:0}.control.prev[_ngcontent-%COMP%]{left:0}.arrow[_ngcontent-%COMP%]{display:block;border-left:.1em solid #fff;border-bottom:.1em solid #fff;width:.5em;height:.5em}.arrow.left[_ngcontent-%COMP%]{transform:rotate(45deg)}.arrow.right[_ngcontent-%COMP%]{transform:rotate(225deg)}.centered-grid[_ngcontent-%COMP%]{margin-left:4.5rem;margin-right:4.5rem}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;padding:10px;opacity:0;touch-action:none;transition:opacity 1s}.card[_ngcontent-%COMP%]{cursor:pointer}.card[_ngcontent-%COMP%]:hover{transition-delay:.5s;z-index:10;transform:scale(1.7)}.card[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transition-delay:.5s;opacity:.2}.card[_ngcontent-%COMP%]:hover ~ .card[_ngcontent-%COMP%]{transform:translate3d(140px,0,0)}.card[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{color:#000;transition-delay:.5s;opacity:1;touch-action:auto;transform:scale(1)}.paginator[_ngcontent-%COMP%]{display:flex;justify-content:center;position:relative;top:32rem;color:#fff}"],data:{animation:[(e=[gI("void => scale",[yI(EI,{params:{time:"500ms"}})]),gI("scale => void",[yI(TI,{params:{time:"500ms"}})])],{type:7,name:"slideAnimation",definitions:e,options:{}})]}}),t})(),AI=(()=>{class t{constructor(t){this.client=t,this.moviesEndpoint="https://moviesss.azurewebsites.net/api/Chart/all",this.mockedMoviesFile="https://moviesss.azurewebsites.net/api/Chart/all"}charts$(){return this.client.get(this.getUrl(),{params:{max:"100",offset:"0"}}).pipe(He(t=>(console.log(t),Object(St.a)([]))))}getUrl(){return Object(r.W)()?this.mockedMoviesFile:this.moviesEndpoint}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(Qt))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function xI(t,e){if(1&t&&(r.Rb(0,"section",2),r.Rb(1,"section",3),r.oc(2),r.Qb(),r.Rb(3,"div",4),r.Nb(4,"app-chart-carousel",5),r.Qb(),r.Qb()),2&t){const t=e.$implicit,n=r.bc();r.Cb(2),r.pc(t.name),r.Cb(2),r.gc("chart",t)("animationType",n.animationType)}}let NI=(()=>{class t{constructor(t,e){this.chartsProvider=t,this.router=e,this.charts=[],this.animationType=wI.Scale,this.carousel=new kI(e),this.destroy$=new fe.a}ngOnInit(){var t;this.chartsProvider.charts$().pipe((t=this.destroy$,e=>e.lift(new uI(t)))).subscribe(t=>{0!==t.length?this.charts=t:this.showError()})}showError(){window.alert("Movies are not available.")}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(AI),r.Mb(Di))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-layout"]],viewQuery:function(t,e){if(1&t&&r.sc(kI,1),2&t){let t;r.hc(t=r.Zb())&&(e.carousel=t.first)}},decls:2,vars:1,consts:[[1,"container"],["class","section",4,"ngFor","ngForOf"],[1,"section"],[1,"message-header"],[1,"carousel-wrapper"],[3,"chart","animationType"]],template:function(t,e){1&t&&(r.Rb(0,"section",0),r.mc(1,xI,5,3,"section",1),r.Qb()),2&t&&(r.Cb(1),r.gc("ngForOf",e.charts))},directives:[x,kI],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%;width:100%}.carousel-wrapper[_ngcontent-%COMP%]{display:inline-block;height:30.5rem;width:100%;transform:translate(0)}.message-header[_ngcontent-%COMP%]{cursor:default}"]}),t})(),jI=(()=>{class t{constructor(t){this.client=t,this.moviesEndpoint="./config/movies-mock.json",this.mockedMoviesFile="./config/movies-mock.json",this.getMovieEndpoint="https://moviesss.azurewebsites.net/api/Movie/"}movies$(){return this.client.get(this.getUrl()).pipe(He(t=>(console.log(t),Object(St.a)([]))))}getMovie$(t){return this.client.get(this.getMovieEndpoint+t).pipe(He(t=>(console.log(t),Object(St.a)(null))))}getUrl(){return Object(r.W)()?this.mockedMoviesFile:this.moviesEndpoint}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(Qt))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),PI=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-movie-details-plot-tab"]],inputs:{movie:"movie"},decls:34,vars:1,template:function(t,e){1&t&&(r.Rb(0,"div"),r.oc(1,"tab works!"),r.Qb(),r.Rb(2,"div"),r.oc(3,"tab works!"),r.Qb(),r.Rb(4,"div"),r.oc(5,"tab works!"),r.Qb(),r.Rb(6,"div"),r.oc(7,"tab works!"),r.Qb(),r.Rb(8,"div"),r.oc(9,"tab works!"),r.Qb(),r.Rb(10,"div"),r.oc(11,"tab works!"),r.Qb(),r.Rb(12,"div"),r.oc(13,"tab works!"),r.Qb(),r.Rb(14,"div"),r.oc(15,"tab works!"),r.Qb(),r.Rb(16,"div"),r.oc(17,"tab works!"),r.Qb(),r.Rb(18,"div"),r.oc(19,"tab works!"),r.Qb(),r.Rb(20,"div"),r.oc(21,"tab works!"),r.Qb(),r.Rb(22,"div"),r.oc(23,"tab works!"),r.Qb(),r.Rb(24,"div"),r.oc(25,"tab works!"),r.Qb(),r.Rb(26,"div"),r.oc(27,"tab works!"),r.Qb(),r.Rb(28,"div"),r.oc(29,"tab works!"),r.Qb(),r.Rb(30,"div"),r.oc(31,"tab works!"),r.Qb(),r.Rb(32,"div"),r.oc(33),r.Qb()),2&t&&(r.Cb(33),r.pc(e.movie.title))},styles:[""]}),t})(),RI=(()=>{class t{ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-sign-in"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Rb(0,"div"),r.oc(1,"Test"),r.Qb())},styles:[""]}),t})(),DI=(()=>{class t{constructor(){this.tabs=[{title:SI.MOVIE_PLOT,active:!0,icon:"./assets/plot-icon.png",orderNumber:0,component:PI},{title:SI.MOVIE_DETAILS,active:!1,icon:"./assets/details-icon.png",orderNumber:1,component:RI},{title:SI.MOVIE_CREW,active:!1,icon:"./assets/crew-icon.png",orderNumber:2,component:RI},{title:SI.MOVIE_STATS,active:!1,icon:"./assets/stats-icon.png",orderNumber:4,component:RI},{title:SI.MOVIE_COMMENTS,active:!1,icon:"./assets/comment-icon.png",orderNumber:3,component:RI}]}tabs$(){return Object(St.a)(this.tabs.sort((t,e)=>t.orderNumber<e.orderNumber?-1:t.orderNumber>e.orderNumber?1:0))}getTabByOrderNumber(t){let e;return this.tabs$().subscribe(n=>{e=n.find(e=>e.orderNumber===t)}),e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const MI=["tabContent"];function LI(t,e){if(1&t){const t=r.Sb();r.Rb(0,"li",4),r.Yb("click",function(){r.ic(t);const n=e.$implicit;return r.bc().changeTab(n.orderNumber)}),r.Nb(1,"img",5),r.oc(2),r.Qb()}if(2&t){const t=e.$implicit;r.Eb("active",t.active),r.Cb(1),r.gc("src",t.icon,r.jc),r.Cb(1),r.qc(" ",t.title," ")}}function FI(t,e){}let UI,VI=(()=>{class t{constructor(t,e,n){this.resolver=t,this.tabsProvider=e,this.changeDetectorReference=n,this.tabs=[],e.tabs$().subscribe(t=>this.tabs=t)}ngAfterViewInit(){const t=this.tabsProvider.getTabByOrderNumber(0),e=this.resolver.resolveComponentFactory(t.component);this.componentRef=this.container.createComponent(e),this.componentRef.instance.movie=this.movie,this.changeDetectorReference.detectChanges()}getTabs(){return this.tabs}changeTab(t){this.tabs=this.tabs.map((e,n)=>Object.assign(Object.assign({},e),n===t?{active:!0}:{active:!1})),this.container.clear();const e=this.tabsProvider.getTabByOrderNumber(t),n=this.resolver.resolveComponentFactory(e.component);this.componentRef=this.container.createComponent(n),this.componentRef.instance.data=this.movie}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.j),r.Mb(DI),r.Mb(r.h))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-movie-details-tabs"]],viewQuery:function(t,e){if(1&t&&r.sc(MI,1,r.R),2&t){let t;r.hc(t=r.Zb())&&(e.container=t.first)}},inputs:{movie:"movie"},decls:6,vars:1,consts:[[1,"tabs"],[1,"selection"],["class","tab",3,"active","click",4,"ngFor","ngForOf"],["tabContent",""],[1,"tab",3,"click"],[1,"icon",3,"src"]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Rb(1,"div",1),r.Rb(2,"ul"),r.mc(3,LI,3,4,"li",2),r.Qb(),r.Qb(),r.mc(4,FI,0,0,"ng-template",null,3,r.nc),r.Qb()),2&t&&(r.Cb(3),r.gc("ngForOf",e.getTabs()))},directives:[x],styles:[".tabs[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;padding:3rem;margin:3rem auto;background:#fff;border-radius:.25rem}.tab-content[_ngcontent-%COMP%]{margin-top:1rem}.tab[_ngcontent-%COMP%]{display:inline-block;margin:0 0 -1px;padding:1rem 1.5rem;text-align:center;border:1px solid transparent;cursor:pointer}.icon[_ngcontent-%COMP%]{margin-right:.6rem}.tab.active[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;border-top:1px solid #ddd;border-color:#000 #ddd #fff;border-style:solid;border-width:2px 1px 1px}li[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),t})();function qI(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}try{UI="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Gk){UI=!1}let BI,HI=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!UI)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(r.C))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Vb)(r.C))},token:t,providedIn:"root"}),t})();"undefined"!=typeof Element&&Element;const KI="cdk-high-contrast-black-on-white",zI="cdk-high-contrast-white-on-black",WI="cdk-high-contrast-active";let GI=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(WI),t.remove(KI),t.remove(zI);const e=this.getHighContrastMode();1===e?(t.add(WI),t.add(KI)):2===e&&(t.add(WI),t.add(zI))}}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(HI),r.Vb(s))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Vb)(HI),Object(r.Vb)(s))},token:t,providedIn:"root"}),t})(),$I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})();const QI=new r.Q("11.2.12");function YI(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function XI(t){switch(t.length){case 0:return new bI;case 1:return t[0];default:return new _I(t)}}function JI(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case hI:a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function ZI(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&tO(n,"start",t)));break;case"done":t.onDone(()=>r(n&&tO(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&tO(n,"destroy",t)))}}function tO(t,e,n){const r=n.totalTime,i=eO(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function eO(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function nO(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function rO(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let iO=(t,e)=>!1,oO=(t,e)=>!1,sO=(t,e,n)=>[];const aO=YI();(aO||"undefined"!=typeof Element)&&(iO=(t,e)=>t.contains(e),oO=(()=>{if(aO||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):oO}})(),sO=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let uO=null,cO=!1;function lO(t){uO||(uO=("undefined"!=typeof document?document.body:null)||{},cO=!!uO.style&&"WebkitAppearance"in uO.style);let e=!0;return uO.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in uO.style,!e&&cO)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in uO.style),e}const hO=oO,fO=iO,dO=sO;function pO(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let gO=(()=>{class t{validateStyleProperty(t){return lO(t)}matchesElement(t,e){return hO(t,e)}containsElement(t,e){return fO(t,e)}query(t,e,n){return dO(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new bI(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),mO=(()=>{class t{}return t.NOOP=new gO,t})();const yO="ng-enter",vO="ng-leave",bO="ng-trigger",_O=".ng-trigger",wO="ng-animating",EO=".ng-animating";function TO(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:SO(parseFloat(e[1]),e[2])}function SO(t,e){switch(e){case"s":return 1e3*t;default:return t}}function IO(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=SO(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=SO(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function OO(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function CO(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else OO(t,n);return n}function kO(t,e,n){return n?e+":"+n+";":""}function AO(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=kO(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=kO(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function xO(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=FO(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),YI()&&AO(t))}function NO(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=FO(e);t.style[n]=""}),YI()&&AO(t))}function jO(t){return Array.isArray(t)?1==t.length?t[0]:dI(t):t}const PO=new RegExp("{{\\s*(.+?)\\s*}}","g");function RO(t){let e=[];if("string"==typeof t){let n;for(;n=PO.exec(t);)e.push(n[1]);PO.lastIndex=0}return e}function DO(t,e,n){const r=t.toString(),i=r.replace(PO,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function MO(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const LO=/-+([a-z0-9])/g;function FO(t){return t.replace(LO,(...t)=>t[1].toUpperCase())}function UO(t,e){return 0===t||0===e}function VO(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach(function(e){n[e]=BO(t,e)})}}return e}function qO(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function BO(t,e){return window.getComputedStyle(t)[e]}const HO="*";function KO(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(GO(i,s)),"<"!=o[0]||i==HO&&s==HO||e.push(GO(s,i))}(t,n,e)):n.push(t),n}const zO=new Set(["true","1"]),WO=new Set(["false","0"]);function GO(t,e){const n=zO.has(t)||WO.has(t),r=zO.has(e)||WO.has(e);return(i,o)=>{let s=t==HO||t==i,a=e==HO||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?zO.has(t):WO.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?zO.has(e):WO.has(e)),s&&a}}const $O=new RegExp("s*:selfs*,?","g");function QO(t,e,n){return new YO(t).build(e,n)}class YO{constructor(t){this._driver=t}build(t,e){const n=new XO(e);return this._resetContextStyleTimingState(n),qO(this,jO(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(JO(t)){const e=t;Object.keys(e).forEach(t=>{RO(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=MO(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=qO(this,jO(t.animation),e);return{type:1,matchers:KO(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:ZO(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>qO(this,t,e)),options:ZO(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=qO(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:ZO(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return tC(IO(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=tC(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||IO(r,e),tC(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:pI({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=pI(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==hI?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(JO(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=RO(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(JO(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(JO(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,f=e.currentTime,d=e.currentAnimateTimings,p=d.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=f+d.delay+s,d.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:qO(this,jO(t.animation),e),options:ZO(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:ZO(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:ZO(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace($O,"")),[t=t.replace(/@\*/g,_O).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,EO),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,nO(e.collectedStyles,e.currentQuerySelector,{});const s=qO(this,jO(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:ZO(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:IO(t.timings,e.errors,!0);return{type:12,animation:qO(this,jO(t.animation),e),timings:n,options:null}}}class XO{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function JO(t){return!Array.isArray(t)&&"object"==typeof t}function ZO(t){var e;return t?(t=OO(t)).params&&(t.params=(e=t.params)?OO(e):null):t={},t}function tC(t,e,n){return{duration:t,delay:e,easing:n}}function eC(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class nC{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const rC=new RegExp(":enter","g"),iC=new RegExp(":leave","g");function oC(t,e,n,r,i,o={},s={},a,u,c=[]){return(new sC).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class sC{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new nC;const l=new uC(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),qO(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[eC(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?TO(n.duration):null,o=null!=n.delay?TO(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),qO(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=aC);const t=TO(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>qO(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?TO(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),qO(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return IO(e.params?DO(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?TO(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=aC);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),qO(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;qO(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const aC={};class uC{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=aC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new cC(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=TO(n.duration)),null!=n.delay&&(r.delay=TO(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=DO(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new uC(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=aC,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new lC(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(rC,"."+this._enterClassName)).replace(iC,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class cC{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new cC(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||hI,this._currentKeyframe[t]=hI}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=hI})):CO(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=DO(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:hI),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=CO(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):r==hI&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?MO(t.values()):[],o=e.size?MO(e.values()):[];if(n){const t=r[0],e=OO(t);t.offset=0,e.offset=1,r=[t,e]}return eC(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class lC extends cC{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=CO(t[0],!1);a.offset=0,i.push(a);const u=CO(t[0],!1);u.offset=hC(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=CO(t[r],!1);s.offset=hC((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return eC(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function hC(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class fC{}class dC extends fC{normalizePropertyName(t,e){return FO(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(pC[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const pC=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function gC(t,e,n,r,i,o,s,a,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}const mC={};class yC{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||mC,f=this.buildStyles(n,s&&s.params||mC,l),d=a&&a.params||mC,p=this.buildStyles(r,d,l),g=new Set,m=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),d)},_=c?[]:oC(t,e,this.ast.animation,i,o,f,p,b,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return gC(e,this._triggerName,n,r,v,f,p,[],[],m,y,w,l);_.forEach(t=>{const n=t.element,r=nO(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=nO(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const E=MO(g.values());return gC(e,this._triggerName,n,r,v,f,p,_,E,m,y,w)}}class vC{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=OO(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=DO(o,r,e)),n[t]=o})}}),n}}class bC{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new vC(t.style,t.options&&t.options.params||{})}),_C(this.states,"true","1"),_C(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new yC(t,e,this.states))}),this.fallbackTransition=new yC(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function _C(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const wC=new nC;class EC{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=QO(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=JI(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=oC(this._driver,e,i,yO,vO,{},{},n,wC,r),o.forEach(t=>{const e=nO(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,hI)})});const a=XI(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=eO(e,"","","");return ZI(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const TC="ng-animate-queued",SC="ng-animate-disabled",IC=".ng-animate-disabled",OC=[],CC={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},kC={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class AC{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=OO(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const xC="void",NC=new AC(xC);class jC{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,UC(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=nO(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=nO(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(UC(t,bO),UC(t,"ng-trigger-"+e),a[e]=NC),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new RC(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(UC(t,bO),UC(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new AC(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=NC),u.value!==xC&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{NO(t,n),xO(t,r)})}return}const c=nO(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(UC(t,TC),o.onStart(()=>{VC(t,TC)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,_O,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,xC,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&XI(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const o=this._triggers[i].fallbackTransition,s=n[i]||NC,a=new AC(xC),u=new RC(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:o,fromState:s,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==CC||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){UC(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=eO(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,ZI(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class PC{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new jC(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(DC(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!DC(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),UC(t,SC)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),VC(t,SC))}removeNode(t,e,n,r){if(DC(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return DC(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,_O,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,EO,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return XI(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=CC,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,IC)&&this.markElementAsDisabled(t,!1),this.driver.query(t,IC,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)UC(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?XI(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new nC,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=FC(h,this.collectedEnterElements),d=new Map;let p=0;f.forEach((t,e)=>{const n=yO+p++;d.set(e,n),t.forEach(t=>UC(t,n))});const g=[],m=new Set,y=new Set;for(let x=0;x<this.collectedLeaveElements.length;x++){const t=this.collectedLeaveElements[x],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,b=FC(h,Array.from(m));b.forEach((t,e)=>{const n=vO+p++;v.set(e,n),t.forEach(t=>UC(t,n))}),t.push(()=>{f.forEach((t,e)=>{const n=d.get(e);t.forEach(t=>VC(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>VC(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let x=this._namespaceList.length-1;x>=0;x--)this._namespaceList[x].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),f=d.get(i),p=this._buildInstruction(t,n,f,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>NO(i,p.fromStyles)),e.onDestroy(()=>xO(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>NO(i,p.fromStyles)),e.onDestroy(()=>xO(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>nO(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const E=new Map,T=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(T.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,E))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{nO(E,e,[]).push(t),t.destroy()})});const S=g.filter(t=>HC(t,a,u)),I=new Map;LC(I,this.driver,y,u,hI).forEach(t=>{HC(t,a,u)&&S.push(t)});const O=new Map;f.forEach((t,e)=>{LC(O,this.driver,new Set(t),a,"!")}),S.forEach(t=>{const e=I.get(t),n=O.get(t);I.set(t,Object.assign(Object.assign({},e),n))});const C=[],k=[],A={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>xO(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=A;if(T.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=T.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>T.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,E,i,O,I);if(o.setRealPlayer(n),t===A)C.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=XI(e)),r.push(o)}}else NO(e,s.fromStyles),o.onDestroy(()=>xO(e,s.toStyles)),k.push(o),c.has(e)&&r.push(o)}),k.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=XI(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let x=0;x<g.length;x++){const t=g[x],e=t.__ng_removed;if(VC(t,vO),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,EO,!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?qC(this,t,r):this.processLeaveNode(t)}return g.length=0,C.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),C}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==xC;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=nO(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}NO(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const f=h.__ng_removed;if(f&&f.removedBeforeQueried)return new bI(e.duration,e.delay);const d=h!==a,p=function(t){const e=[];return BC(t,e),e}((n.get(h)||OC).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=o.get(h),y=JI(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),d){const e=new RC(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{nO(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>UC(t,wO));const f=XI(h);return f.onDestroy(()=>{c.forEach(t=>VC(t,wO)),xO(a,e.toStyles)}),l.forEach(t=>{nO(r,t,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new bI(t.duration,t.delay)}}class RC{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new bI,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>ZI(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){nO(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function DC(t){return t&&1===t.nodeType}function MC(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function LC(t,e,n,r,i){const o=[];n.forEach(t=>o.push(MC(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=kC,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>MC(t,o[a++])),s}function FC(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function UC(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function VC(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function qC(t,e,n){XI(n).onDone(()=>t.processLeaveNode(e))}function BC(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof _I?BC(r.players,e):e.push(r)}}function HC(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class KC{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new PC(t,e,n),this._timelineEngine=new EC(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=QO(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new bC(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=rO(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=rO(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function zC(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=GC(e[0]),e.length>1&&(r=GC(e[e.length-1]))):e&&(n=GC(e)),n||r?new WC(t,n,r):null}let WC=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&xO(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(xO(this._element,this._initialStyles),this._endStyles&&(xO(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(NO(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(NO(this._element,this._endStyles),this._endStyles=null),xO(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function GC(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];$C(i)&&(e=e||{},e[i]=t[i])}return e}function $C(t){return"display"===t||"position"===t}const QC="animation",YC="animationend";class XC{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=rk(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),nk(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),ek(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){JC(this._element,this._name,"paused")}resume(){JC(this._element,this._name,"running")}setPosition(t){const e=ZC(this._element,this._name);this._position=t*this._duration,nk(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),ek(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=rk(t,"").split(","),r=tk(n,e);r>=0&&(n.splice(r,1),nk(t,"",n.join(",")))}(this._element,this._name))}}function JC(t,e,n){nk(t,"PlayState",n,ZC(t,e))}function ZC(t,e){const n=rk(t,"");return n.indexOf(",")>0?tk(n.split(","),e):tk([n],e)}function tk(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function ek(t,e,n){n?t.removeEventListener(YC,e):t.addEventListener(YC,e)}function nk(t,e,n,r){const i=QC+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function rk(t,e){return t.style[QC+e]||""}class ik{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new XC(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:BO(this.element,n))})}this.currentSnapshot=t}}class ok extends bI{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=pO(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class sk{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(t){return lO(t)}matchesElement(t,e){return hO(t,e)}containsElement(t,e){return fO(t,e)}query(t,e,n){return dO(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>pO(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){const a=o.filter(t=>t instanceof ik),u={};UO(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=VO(t,e,u));if(0==n)return new ok(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const f=zC(t,e),d=new ik(t,e,l,n,r,i,c,f);return d.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),d}}class ak{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:BO(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class uk{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(ck().toString()),this._cssKeyframesDriver=new sk}validateStyleProperty(t){return lO(t)}matchesElement(t,e){return hO(t,e)}containsElement(t,e){return fO(t,e)}query(t,e,n){return dO(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof ak);UO(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=zC(t,e=VO(t,e=e.map(t=>CO(t,!1)),u));return new ak(t,e,a,l)}}function ck(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let lk=(()=>{class t extends lI{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.S.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?dI(t):t;return dk(this._renderer,null,e,"register",[n]),new hk(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(r.G),r.Vb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class hk extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new fk(this._id,t,e||{},this._renderer)}}class fk{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return dk(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function dk(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const pk="@",gk="@.disabled";let mk=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new yk("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new vk(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(r.G),r.Vb(KC),r.Vb(r.A))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class yk{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==pk&&e==gk?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class vk extends yk{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==pk?"."==e.charAt(1)&&e==gk?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==pk){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return i.charAt(0)!=pk&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let bk=(()=>{class t extends KC{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(s),r.Vb(mO),r.Vb(fC))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const _k=new r.r("AnimationModuleType"),wk=[{provide:mO,useFactory:function(){return"function"==typeof ck()?new uk:new sk}},{provide:_k,useValue:"BrowserAnimations"},{provide:lI,useClass:lk},{provide:fC,useFactory:function(){return new dC}},{provide:KC,useClass:bk},{provide:r.G,useFactory:function(t,e,n){return new mk(t,e,n)},deps:[lt,KC,r.A]}];let Ek=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:wk,imports:[Tt]}),t})();const Tk=new r.Q("11.2.12"),Sk=new r.r("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Ik,Ok=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return Object(r.W)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&Tk.full!==QI.full&&console.warn("The Angular Material version ("+Tk.full+") does not match the Angular CDK version ("+QI.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(GI),r.Vb(Sk,8),r.Vb(s))},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[$I],$I]}),t})();function Ck(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),e&&this._elementRef.nativeElement.classList.add(`mat-${e}`),this._color=e)}}}try{Ik="undefined"!=typeof Intl}catch(Gk){Ik=!1}function kk(t,e){if(1&t&&(r.ac(),r.Nb(0,"circle",3)),2&t){const t=r.bc();r.lc("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),r.Db("r",t._getCircleRadius())}}function Ak(t,e){if(1&t&&(r.ac(),r.Nb(0,"circle",3)),2&t){const t=r.bc();r.lc("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),r.Db("r",t._getCircleRadius())}}function xk(t,e){if(1&t&&(r.ac(),r.Nb(0,"circle",3)),2&t){const t=r.bc();r.lc("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),r.Db("r",t._getCircleRadius())}}function Nk(t,e){if(1&t&&(r.ac(),r.Nb(0,"circle",3)),2&t){const t=r.bc();r.lc("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),r.Db("r",t._getCircleRadius())}}const jk=".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n";class Pk{constructor(t){this._elementRef=t}}const Rk=Ck(Pk,"primary"),Dk=new r.r("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});let Mk=(()=>{class t extends Rk{constructor(e,n,r,i,o){super(e),this._elementRef=e,this._document=r,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const s=t._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),s.has(r.head)||s.set(r.head,new Set([100])),this._fallbackAnimation=n.EDGE||n.TRIDENT,this._noopAnimations="NoopAnimations"===i&&!!o&&!o._forceAnimations,o&&(o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=qI(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=qI(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,qI(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=function(t){if(function(){if(null==BI){const t="undefined"!=typeof document?document.head:null;BI=!(!t||!t.createShadowRoot&&!t.attachShadow)}return BI}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(t)||this._document.head,this._attachStyleNode(),t.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const e=this._styleRoot,n=this._diameter,r=t._diameters;let i=r.get(e);if(!i||!i.has(n)){const t=this._document.createElement("style");t.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),t.textContent=this._getAnimationText(),e.appendChild(t),i||(i=new Set,r.set(e,i)),i.add(n)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.l),r.Mb(HI),r.Mb(s,8),r.Mb(_k,8),r.Mb(Dk))},t.\u0275cmp=r.Gb({type:t,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(r.Db("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),r.lc("width",e.diameter,"px")("height",e.diameter,"px"),r.Eb("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[r.zb],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(r.ac(),r.Rb(0,"svg",0),r.mc(1,kk,1,9,"circle",1),r.mc(2,Ak,1,7,"circle",2),r.Qb()),2&t&&(r.lc("width",e.diameter,"px")("height",e.diameter,"px"),r.gc("ngSwitch","indeterminate"===e.mode),r.Db("viewBox",e._getViewBox()),r.Cb(1),r.gc("ngSwitchCase",!0),r.Cb(1),r.gc("ngSwitchCase",!1))},directives:[M,L],styles:[jk],encapsulation:2,changeDetection:0}),t._diameters=new WeakMap,t})(),Lk=(()=>{class t extends Mk{constructor(t,e,n,r,i){super(t,e,n,r,i),this.mode="indeterminate"}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.l),r.Mb(HI),r.Mb(s,8),r.Mb(_k,8),r.Mb(Dk))},t.\u0275cmp=r.Gb({type:t,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(t,e){2&t&&(r.lc("width",e.diameter,"px")("height",e.diameter,"px"),r.Eb("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color"},features:[r.zb],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(r.ac(),r.Rb(0,"svg",0),r.mc(1,xk,1,9,"circle",1),r.mc(2,Nk,1,7,"circle",2),r.Qb()),2&t&&(r.lc("width",e.diameter,"px")("height",e.diameter,"px"),r.gc("ngSwitch","indeterminate"===e.mode),r.Db("viewBox",e._getViewBox()),r.Cb(1),r.gc("ngSwitchCase",!0),r.Cb(1),r.gc("ngSwitchCase",!1))},directives:[M,L],styles:[jk],encapsulation:2,changeDetection:0}),t})(),Fk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[Ok,H],Ok]}),t})();function Uk(t,e){1&t&&r.Nb(0,"mat-spinner",9),2&t&&r.gc("diameter",50)}function Vk(t,e){if(1&t){const t=r.Sb();r.Rb(0,"section",1),r.Rb(1,"div",2),r.oc(2),r.Qb(),r.Rb(3,"div",3),r.mc(4,Uk,1,1,"mat-spinner",4),r.Qb(),r.Rb(5,"div",5),r.Rb(6,"iframe",6),r.Yb("load",function(){return r.ic(t),r.bc().onLoad()}),r.Qb(),r.Qb(),r.Rb(7,"div",7),r.Nb(8,"app-movie-details-tabs",8),r.Qb(),r.Qb()}if(2&t){const t=e.ngIf,n=r.bc();r.Cb(2),r.pc(t.title),r.Cb(2),r.gc("ngIf",n.getShowLoading()),r.Cb(4),r.gc("movie",t)}}let qk=(()=>{class t{constructor(t,e){this.route=t,this.movieService=e,this.showLoading=!0}ngOnInit(){this.movie$=this.route.paramMap.pipe(je(t=>this.movieService.getMovie$(t.get(SI.MOVIE_URL_PARAMETER))))}getShowLoading(){return this.showLoading}getMovie$(){return this.movie$}onLoad(){this.showLoading=!1}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(gr),r.Mb(jI))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-details-page"]],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"title","has-text-centered"],[1,"spinner-container"],["color","#fff",3,"diameter",4,"ngIf"],[1,"block-iframe"],["src","https://www.youtube.com/embed/-964sSBviK0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen",1,"has-text-centered",3,"load"],[1,"block-tabs"],[1,"tabs",3,"movie"],["color","#fff",3,"diameter"]],template:function(t,e){1&t&&(r.mc(0,Vk,9,3,"section",0),r.cc(1,"async")),2&t&&r.gc("ngIf",r.dc(1,1,e.getMovie$()))},directives:[j,VI,Lk],pipes:[B],styles:["iframe[_ngcontent-%COMP%]{width:70%;height:100%;border-radius:3rem}.block-iframe[_ngcontent-%COMP%]{align-items:center;height:30rem}.block-iframe[_ngcontent-%COMP%], .block-tabs[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.tabs[_ngcontent-%COMP%]{width:90%;height:100%}.title[_ngcontent-%COMP%]{color:#fff}.spinner-container[_ngcontent-%COMP%]{height:3.5rem;width:100%;display:flex;justify-content:center;align-items:center}"]}),t})();const Bk=[{path:"sign-in",component:RI},{path:"register-user",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-sign-up"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})()},{path:"dashboard",component:aI,canActivate:[oI]},{path:"forgot-password",component:(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(iI))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-forgot-password"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})()},{path:"verify-email-address",component:sI},{path:"",component:NI},{path:"details/:idString",component:qk},{path:"**",redirectTo:"/sign-in"}];let Hk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[Yi.forRoot(Bk)],Yi]}),t})(),Kk=(()=>{class t{constructor(){this.title="movies-web-client"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-root"]],decls:6,vars:0,consts:[["routerLink","/details"],["routerLinkActive","true",1,"button"],["routerLink",""]],template:function(t,e){1&t&&(r.Rb(0,"body"),r.Rb(1,"a",0),r.Nb(2,"button",1),r.Qb(),r.Rb(3,"a",2),r.Nb(4,"button",1),r.Qb(),r.Nb(5,"router-outlet"),r.Qb())},directives:[Li,Ui,Vi],styles:["body[_ngcontent-%COMP%]{min-height:100vh;padding:0;background-color:#1e1e1e}"]}),t})();const zk={apiKey:"AIzaSyAPDrF3QZgy0Ugpt7QObLuuyQYdEe71H_0",authDomain:"sep6-3e33f.firebaseapp.com",databaseURL:"https://sep6-3e33f-default-rtdb.europe-west1.firebasedatabase.app",projectId:"sep6-3e33f",storageBucket:"sep6-3e33f.appspot.com",messagingSenderId:"475689474726",appId:"1:475689474726:web:2894f95c246ccbe3963267"};let Wk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t,bootstrap:[Kk]}),t.\u0275inj=r.Jb({providers:[iI],imports:[[Tt,le,Hk,Ek,SS.a.initializeApp(zk),qS,rI,Fk]]}),t})();Object(r.U)(),wt().bootstrapModule(Wk).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);